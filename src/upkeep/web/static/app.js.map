{
  "version": 3,
  "sources": ["ts/modules/ui.ts", "ts/modules/dashboard.ts", "ts/modules/utils.ts", "ts/modules/operation-times.ts", "ts/modules/maintenance.ts", "ts/modules/storage.ts", "ts/modules/schedule.ts", "ts/modules/app_uninstaller.ts", "../../../../node_modules/internmap/src/index.js", "../../../../node_modules/d3-dispatch/src/dispatch.js", "../../../../node_modules/d3-selection/src/namespaces.js", "../../../../node_modules/d3-selection/src/namespace.js", "../../../../node_modules/d3-selection/src/creator.js", "../../../../node_modules/d3-selection/src/selector.js", "../../../../node_modules/d3-selection/src/selection/select.js", "../../../../node_modules/d3-selection/src/array.js", "../../../../node_modules/d3-selection/src/selectorAll.js", "../../../../node_modules/d3-selection/src/selection/selectAll.js", "../../../../node_modules/d3-selection/src/matcher.js", "../../../../node_modules/d3-selection/src/selection/selectChild.js", "../../../../node_modules/d3-selection/src/selection/selectChildren.js", "../../../../node_modules/d3-selection/src/selection/filter.js", "../../../../node_modules/d3-selection/src/selection/sparse.js", "../../../../node_modules/d3-selection/src/selection/enter.js", "../../../../node_modules/d3-selection/src/constant.js", "../../../../node_modules/d3-selection/src/selection/data.js", "../../../../node_modules/d3-selection/src/selection/exit.js", "../../../../node_modules/d3-selection/src/selection/join.js", "../../../../node_modules/d3-selection/src/selection/merge.js", "../../../../node_modules/d3-selection/src/selection/order.js", "../../../../node_modules/d3-selection/src/selection/sort.js", "../../../../node_modules/d3-selection/src/selection/call.js", "../../../../node_modules/d3-selection/src/selection/nodes.js", "../../../../node_modules/d3-selection/src/selection/node.js", "../../../../node_modules/d3-selection/src/selection/size.js", "../../../../node_modules/d3-selection/src/selection/empty.js", "../../../../node_modules/d3-selection/src/selection/each.js", "../../../../node_modules/d3-selection/src/selection/attr.js", "../../../../node_modules/d3-selection/src/window.js", "../../../../node_modules/d3-selection/src/selection/style.js", "../../../../node_modules/d3-selection/src/selection/property.js", "../../../../node_modules/d3-selection/src/selection/classed.js", "../../../../node_modules/d3-selection/src/selection/text.js", "../../../../node_modules/d3-selection/src/selection/html.js", "../../../../node_modules/d3-selection/src/selection/raise.js", "../../../../node_modules/d3-selection/src/selection/lower.js", "../../../../node_modules/d3-selection/src/selection/append.js", "../../../../node_modules/d3-selection/src/selection/insert.js", "../../../../node_modules/d3-selection/src/selection/remove.js", "../../../../node_modules/d3-selection/src/selection/clone.js", "../../../../node_modules/d3-selection/src/selection/datum.js", "../../../../node_modules/d3-selection/src/selection/on.js", "../../../../node_modules/d3-selection/src/selection/dispatch.js", "../../../../node_modules/d3-selection/src/selection/iterator.js", "../../../../node_modules/d3-selection/src/selection/index.js", "../../../../node_modules/d3-selection/src/select.js", "../../../../node_modules/d3-color/src/define.js", "../../../../node_modules/d3-color/src/color.js", "../../../../node_modules/d3-interpolate/src/basis.js", "../../../../node_modules/d3-interpolate/src/basisClosed.js", "../../../../node_modules/d3-interpolate/src/constant.js", "../../../../node_modules/d3-interpolate/src/color.js", "../../../../node_modules/d3-interpolate/src/rgb.js", "../../../../node_modules/d3-interpolate/src/number.js", "../../../../node_modules/d3-interpolate/src/string.js", "../../../../node_modules/d3-interpolate/src/transform/decompose.js", "../../../../node_modules/d3-interpolate/src/transform/parse.js", "../../../../node_modules/d3-interpolate/src/transform/index.js", "../../../../node_modules/d3-timer/src/timer.js", "../../../../node_modules/d3-timer/src/timeout.js", "../../../../node_modules/d3-transition/src/transition/schedule.js", "../../../../node_modules/d3-transition/src/interrupt.js", "../../../../node_modules/d3-transition/src/selection/interrupt.js", "../../../../node_modules/d3-transition/src/transition/tween.js", "../../../../node_modules/d3-transition/src/transition/interpolate.js", "../../../../node_modules/d3-transition/src/transition/attr.js", "../../../../node_modules/d3-transition/src/transition/attrTween.js", "../../../../node_modules/d3-transition/src/transition/delay.js", "../../../../node_modules/d3-transition/src/transition/duration.js", "../../../../node_modules/d3-transition/src/transition/ease.js", "../../../../node_modules/d3-transition/src/transition/easeVarying.js", "../../../../node_modules/d3-transition/src/transition/filter.js", "../../../../node_modules/d3-transition/src/transition/merge.js", "../../../../node_modules/d3-transition/src/transition/on.js", "../../../../node_modules/d3-transition/src/transition/remove.js", "../../../../node_modules/d3-transition/src/transition/select.js", "../../../../node_modules/d3-transition/src/transition/selectAll.js", "../../../../node_modules/d3-transition/src/transition/selection.js", "../../../../node_modules/d3-transition/src/transition/style.js", "../../../../node_modules/d3-transition/src/transition/styleTween.js", "../../../../node_modules/d3-transition/src/transition/text.js", "../../../../node_modules/d3-transition/src/transition/textTween.js", "../../../../node_modules/d3-transition/src/transition/transition.js", "../../../../node_modules/d3-transition/src/transition/end.js", "../../../../node_modules/d3-transition/src/transition/index.js", "../../../../node_modules/d3-ease/src/cubic.js", "../../../../node_modules/d3-transition/src/selection/transition.js", "../../../../node_modules/d3-transition/src/selection/index.js", "../../../../node_modules/d3-brush/src/brush.js", "../../../../node_modules/d3-hierarchy/src/hierarchy/count.js", "../../../../node_modules/d3-hierarchy/src/hierarchy/each.js", "../../../../node_modules/d3-hierarchy/src/hierarchy/eachBefore.js", "../../../../node_modules/d3-hierarchy/src/hierarchy/eachAfter.js", "../../../../node_modules/d3-hierarchy/src/hierarchy/find.js", "../../../../node_modules/d3-hierarchy/src/hierarchy/sum.js", "../../../../node_modules/d3-hierarchy/src/hierarchy/sort.js", "../../../../node_modules/d3-hierarchy/src/hierarchy/path.js", "../../../../node_modules/d3-hierarchy/src/hierarchy/ancestors.js", "../../../../node_modules/d3-hierarchy/src/hierarchy/descendants.js", "../../../../node_modules/d3-hierarchy/src/hierarchy/leaves.js", "../../../../node_modules/d3-hierarchy/src/hierarchy/links.js", "../../../../node_modules/d3-hierarchy/src/hierarchy/iterator.js", "../../../../node_modules/d3-hierarchy/src/hierarchy/index.js", "../../../../node_modules/d3-hierarchy/src/accessors.js", "../../../../node_modules/d3-hierarchy/src/constant.js", "../../../../node_modules/d3-hierarchy/src/treemap/round.js", "../../../../node_modules/d3-hierarchy/src/treemap/dice.js", "../../../../node_modules/d3-hierarchy/src/treemap/slice.js", "../../../../node_modules/d3-hierarchy/src/treemap/squarify.js", "../../../../node_modules/d3-hierarchy/src/treemap/index.js", "../../../../node_modules/d3-scale/src/init.js", "../../../../node_modules/d3-scale/src/ordinal.js", "../../../../node_modules/d3-zoom/src/transform.js", "ts/modules/disk_viz.ts", "ts/modules/duplicate_finder.ts", "ts/app.ts"],
  "sourcesContent": ["/**\n * UI utilities: theme, notifications, loading, modals\n */\n\nimport type { ToastType, TabName } from '../types';\n\n// ============================================================================\n// Theme Management\n// ============================================================================\n\nexport function initTheme(): void {\n  const savedTheme = localStorage.getItem('theme') || 'system';\n  applyTheme(savedTheme);\n\n  // Listen for system theme changes when in system mode\n  window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {\n    const currentTheme = localStorage.getItem('theme') || 'system';\n    if (currentTheme === 'system') {\n      applyTheme('system');\n    }\n  });\n}\n\nexport function toggleTheme(): void {\n  // Cycle through: light \u2192 dark \u2192 system \u2192 light\n  const currentTheme = localStorage.getItem('theme') || 'system';\n  let newTheme: string;\n\n  if (currentTheme === 'light') {\n    newTheme = 'dark';\n  } else if (currentTheme === 'dark') {\n    newTheme = 'system';\n  } else {\n    newTheme = 'light';\n  }\n\n  applyTheme(newTheme);\n  localStorage.setItem('theme', newTheme);\n}\n\nfunction applyTheme(theme: string): void {\n  // If system theme, detect browser preference\n  let actualTheme = theme;\n  if (theme === 'system') {\n    actualTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n  }\n\n  document.documentElement.setAttribute('data-theme', actualTheme);\n  const icon = document.getElementById('theme-icon');\n  if (icon) {\n    // Show icon based on theme mode\n    if (theme === 'light') {\n      icon.textContent = '\u2600\uFE0F';\n    } else if (theme === 'dark') {\n      icon.textContent = '\uD83C\uDF19';\n    } else {\n      icon.textContent = '\uD83D\uDDA5\uFE0F';  // System mode\n    }\n  }\n}\n\n// ============================================================================\n// Toast Notifications\n// ============================================================================\n\nexport function showToast(message: string, type: ToastType = 'info', duration: number = 3000): void {\n  const toast = document.createElement('div');\n  toast.className = `toast ${type}`;\n  toast.textContent = message;\n\n  const container = document.getElementById('toast-container');\n  if (!container) {\n    console.error('Toast container not found');\n    return;\n  }\n\n  container.appendChild(toast);\n\n  // Trigger animation\n  setTimeout(() => toast.classList.add('show'), 10);\n\n  // Auto-remove after duration\n  setTimeout(() => {\n    toast.classList.remove('show');\n    setTimeout(() => toast.remove(), 300);\n  }, duration);\n}\n\n// ============================================================================\n// Loading Indicator\n// ============================================================================\n\nexport function showLoading(message: string = 'Loading...'): void {\n  const loading = document.getElementById('loading-indicator');\n  const loadingMessage = document.getElementById('loading-message');\n  if (loading) {\n    loading.classList.add('active');\n    if (loadingMessage) {\n      loadingMessage.textContent = message;\n    }\n  }\n}\n\nexport function hideLoading(): void {\n  const loading = document.getElementById('loading-indicator');\n  if (loading) {\n    loading.classList.remove('active');\n  }\n}\n\n// ============================================================================\n// Progress Overlay Modal\n// ============================================================================\n\nlet progressOverlayActive = false;\nlet progressCancelCallback: (() => void) | null = null;\nlet progressStartTime: number | null = null;\n\nexport function showProgressOverlay(title: string, total: number, cancelCallback: () => void): void {\n  const overlay = document.getElementById('progress-overlay');\n  const titleEl = document.getElementById('progress-title');\n  const percentEl = document.getElementById('progress-percent');\n  const currentEl = document.getElementById('progress-current');\n  const barEl = document.getElementById('progress-bar');\n\n  if (!overlay || !titleEl || !percentEl || !currentEl || !barEl) {\n    console.error('Progress overlay elements not found');\n    return;\n  }\n\n  titleEl.textContent = title;\n  percentEl.textContent = '0%';\n  currentEl.textContent = '0';\n  const remainingEl = document.getElementById('progress-remaining');\n  if (remainingEl) {\n    remainingEl.textContent = '--';\n  }\n  barEl.style.width = '0%';\n\n  overlay.classList.add('active');\n  progressOverlayActive = true;\n  progressCancelCallback = cancelCallback;\n  progressStartTime = Date.now();\n\n  // ESC key to close\n  document.addEventListener('keydown', handleProgressEscape);\n}\n\nexport function updateProgressOverlay(current: number, total: number, message: string = ''): void {\n  if (!progressOverlayActive) return;\n\n  const percent = Math.round((current / total) * 100);\n  const percentEl = document.getElementById('progress-percent');\n  const currentEl = document.getElementById('progress-current');\n  const barEl = document.getElementById('progress-bar');\n  const remainingEl = document.getElementById('progress-remaining');\n  const messageEl = document.getElementById('progress-message');\n\n  if (!percentEl || !currentEl || !barEl) return;\n\n  // Animate values\n  const currentPercent = parseInt(percentEl.textContent || '0');\n  animateValue(percentEl, currentPercent, percent, 200, 0, '%');\n  currentEl.textContent = String(current);\n  barEl.style.width = percent + '%';\n\n  // Calculate time remaining\n  if (current > 0 && progressStartTime && remainingEl) {\n    const elapsed = (Date.now() - progressStartTime) / 1000; // seconds\n    const rate = current / elapsed; // items per second\n    const remaining = total - current;\n    const eta = remaining / rate; // seconds\n\n    if (eta < 60) {\n      remainingEl.textContent = Math.round(eta) + 's';\n    } else {\n      const minutes = Math.floor(eta / 60);\n      const seconds = Math.round(eta % 60);\n      remainingEl.textContent = `${minutes}m ${seconds}s`;\n    }\n  }\n\n  if (message && messageEl) {\n    messageEl.textContent = message;\n  }\n}\n\nexport function hideProgressOverlay(): void {\n  const overlay = document.getElementById('progress-overlay');\n  if (overlay) {\n    overlay.classList.remove('active');\n  }\n  progressOverlayActive = false;\n  progressCancelCallback = null;\n  progressStartTime = null;\n  document.removeEventListener('keydown', handleProgressEscape);\n}\n\nexport function cancelProgress(): void {\n  if (progressCancelCallback) {\n    progressCancelCallback();\n  }\n  hideProgressOverlay();\n  showToast('Operation cancelled', 'warning');\n}\n\nfunction handleProgressEscape(e: KeyboardEvent): void {\n  if (e.key === 'Escape' && progressOverlayActive) {\n    cancelProgress();\n  }\n}\n\n// ============================================================================\n// Value Animation\n// ============================================================================\n\n/**\n * Animate a number from old value to new value\n */\nexport function animateValue(\n  element: HTMLElement,\n  start: number,\n  end: number,\n  duration: number = 300,\n  decimals: number = 1,\n  suffix: string = ''\n): void {\n  const startTime = performance.now();\n  const delta = end - start;\n\n  function update(currentTime: number): void {\n    const elapsed = currentTime - startTime;\n    const progress = Math.min(elapsed / duration, 1);\n\n    // Ease-out cubic\n    const easeProgress = 1 - Math.pow(1 - progress, 3);\n    const current = start + (delta * easeProgress);\n\n    element.textContent = current.toFixed(decimals) + suffix;\n\n    if (progress < 1) {\n      requestAnimationFrame(update);\n    }\n  }\n\n  requestAnimationFrame(update);\n}\n\n// ============================================================================\n// System Configuration\n// ============================================================================\n\nexport async function reloadScripts(): Promise<void> {\n  const btn = document.getElementById('reload-scripts-btn') as HTMLButtonElement;\n  const statusEl = document.getElementById('reload-scripts-status');\n\n  if (!btn || !statusEl) return;\n\n  // Disable button and show loading state\n  btn.disabled = true;\n  btn.textContent = '\u23F3 Reloading...';\n  statusEl.textContent = 'Copying updated scripts to system location...';\n  statusEl.style.color = 'var(--text-secondary)';\n\n  try {\n    const response = await fetch('/api/system/reload-scripts', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' }\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.detail || 'Failed to reload scripts');\n    }\n\n    const result = await response.json();\n\n    // Success\n    btn.textContent = '\u2713 Reloaded';\n    statusEl.textContent = result.message || 'Scripts reloaded successfully. Changes will take effect immediately.';\n    statusEl.style.color = 'var(--success)';\n    showToast('Scripts reloaded successfully', 'success');\n\n    // Reset button after 3 seconds\n    setTimeout(() => {\n      btn.disabled = false;\n      btn.textContent = '\uD83D\uDD04 Reload Scripts';\n      statusEl.textContent = '';\n    }, 3000);\n\n  } catch (error) {\n    // Error\n    const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n    btn.textContent = '\u2717 Failed';\n    statusEl.textContent = `Error: ${errorMessage}`;\n    statusEl.style.color = 'var(--danger)';\n    showToast(`Failed to reload scripts: ${errorMessage}`, 'error');\n\n    // Reset button after 5 seconds\n    setTimeout(() => {\n      btn.disabled = false;\n      btn.textContent = '\uD83D\uDD04 Reload Scripts';\n    }, 5000);\n  }\n}\n\n// ============================================================================\n// Settings Management\n// ============================================================================\n\n// Dashboard refresh interval ID (for clearing/resetting)\nlet dashboardRefreshInterval: ReturnType<typeof setInterval> | null = null;\nlet processRefreshInterval: ReturnType<typeof setInterval> | null = null;\n\n/**\n * Set theme explicitly (called from settings panel)\n */\nexport function setTheme(theme: string): void {\n  applyTheme(theme);\n  localStorage.setItem('theme', theme);\n  updateThemeSelector(theme);\n  showToast(`Theme set to ${theme}`, 'success', 2000);\n}\n\n/**\n * Update theme selector UI to show active selection\n */\nfunction updateThemeSelector(activeTheme: string): void {\n  const selector = document.getElementById('theme-selector');\n  if (!selector) return;\n\n  selector.querySelectorAll('.theme-option').forEach(btn => {\n    const btnTheme = btn.getAttribute('data-theme');\n    if (btnTheme === activeTheme) {\n      btn.classList.add('active');\n    } else {\n      btn.classList.remove('active');\n    }\n  });\n}\n\n/**\n * Toggle auto-refresh on/off\n */\nexport function toggleAutoRefresh(enabled: boolean): void {\n  localStorage.setItem('autoRefresh', String(enabled));\n\n  if (enabled) {\n    const interval = parseInt(localStorage.getItem('refreshInterval') || '10', 10);\n    startAutoRefresh(interval);\n    showToast('Auto-refresh enabled', 'success', 2000);\n  } else {\n    stopAutoRefresh();\n    showToast('Auto-refresh disabled', 'info', 2000);\n  }\n}\n\n/**\n * Set refresh interval (in seconds)\n */\nexport function setRefreshInterval(seconds: number): void {\n  localStorage.setItem('refreshInterval', String(seconds));\n\n  // Update UI\n  const selector = document.getElementById('interval-selector');\n  if (selector) {\n    selector.querySelectorAll('.interval-option').forEach(btn => {\n      const btnInterval = parseInt(btn.getAttribute('data-interval') || '0', 10);\n      if (btnInterval === seconds) {\n        btn.classList.add('active');\n      } else {\n        btn.classList.remove('active');\n      }\n    });\n  }\n\n  // Restart auto-refresh if enabled\n  const autoRefresh = localStorage.getItem('autoRefresh') !== 'false';\n  if (autoRefresh) {\n    startAutoRefresh(seconds);\n  }\n\n  showToast(`Refresh interval set to ${seconds}s`, 'success', 2000);\n}\n\n/**\n * Start auto-refresh with given interval\n */\nfunction startAutoRefresh(seconds: number): void {\n  stopAutoRefresh(); // Clear existing intervals\n\n  const ms = seconds * 1000;\n\n  dashboardRefreshInterval = setInterval(() => {\n    const dashboardTab = document.getElementById('dashboard');\n    if (dashboardTab && dashboardTab.classList.contains('active')) {\n      const loadSystemInfo = (window as any).loadSystemInfo;\n      const loadHealthScore = (window as any).loadHealthScore;\n      if (loadSystemInfo) loadSystemInfo();\n      if (loadHealthScore) loadHealthScore();\n    }\n  }, ms);\n\n  // Processes refresh at 2x the interval (minimum 10s)\n  const processMs = Math.max(ms * 2, 10000);\n  processRefreshInterval = setInterval(() => {\n    const dashboardTab = document.getElementById('dashboard');\n    if (dashboardTab && dashboardTab.classList.contains('active')) {\n      const loadTopProcesses = (window as any).loadTopProcesses;\n      if (loadTopProcesses) loadTopProcesses();\n    }\n  }, processMs);\n}\n\n/**\n * Stop auto-refresh\n */\nfunction stopAutoRefresh(): void {\n  if (dashboardRefreshInterval) {\n    clearInterval(dashboardRefreshInterval);\n    dashboardRefreshInterval = null;\n  }\n  if (processRefreshInterval) {\n    clearInterval(processRefreshInterval);\n    processRefreshInterval = null;\n  }\n}\n\n/**\n * Toggle default preview mode for maintenance\n */\nexport function togglePreviewMode(enabled: boolean): void {\n  localStorage.setItem('defaultPreviewMode', String(enabled));\n  showToast(enabled ? 'Preview mode enabled by default' : 'Preview mode disabled', 'info', 2000);\n}\n\n/**\n * Toggle confirmation dialogs\n */\nexport function toggleConfirmations(enabled: boolean): void {\n  localStorage.setItem('requireConfirmation', String(enabled));\n  showToast(enabled ? 'Confirmations enabled' : 'Confirmations disabled', 'info', 2000);\n}\n\n/**\n * Get whether preview mode is default\n */\nexport function isDefaultPreviewMode(): boolean {\n  return localStorage.getItem('defaultPreviewMode') === 'true';\n}\n\n/**\n * Get whether confirmations are required\n */\nexport function requiresConfirmation(): boolean {\n  return localStorage.getItem('requireConfirmation') !== 'false';\n}\n\n/**\n * Initialize settings panel with saved values\n */\nexport function initSettings(): void {\n  // Theme selector\n  const savedTheme = localStorage.getItem('theme') || 'system';\n  updateThemeSelector(savedTheme);\n\n  // Auto-refresh toggle\n  const autoRefresh = localStorage.getItem('autoRefresh') !== 'false';\n  const autoRefreshToggle = document.getElementById('auto-refresh-toggle') as HTMLInputElement;\n  if (autoRefreshToggle) {\n    autoRefreshToggle.checked = autoRefresh;\n  }\n\n  // Refresh interval selector\n  const interval = parseInt(localStorage.getItem('refreshInterval') || '10', 10);\n  const intervalSelector = document.getElementById('interval-selector');\n  if (intervalSelector) {\n    intervalSelector.querySelectorAll('.interval-option').forEach(btn => {\n      const btnInterval = parseInt(btn.getAttribute('data-interval') || '0', 10);\n      if (btnInterval === interval) {\n        btn.classList.add('active');\n      } else {\n        btn.classList.remove('active');\n      }\n    });\n  }\n\n  // Preview mode toggle\n  const previewMode = localStorage.getItem('defaultPreviewMode') === 'true';\n  const previewToggle = document.getElementById('preview-mode-toggle') as HTMLInputElement;\n  if (previewToggle) {\n    previewToggle.checked = previewMode;\n  }\n\n  // Confirmations toggle\n  const confirmations = localStorage.getItem('requireConfirmation') !== 'false';\n  const confirmToggle = document.getElementById('confirm-toggle') as HTMLInputElement;\n  if (confirmToggle) {\n    confirmToggle.checked = confirmations;\n  }\n\n  // Load about info\n  loadAboutInfo();\n\n  // Start auto-refresh if enabled\n  if (autoRefresh) {\n    startAutoRefresh(interval);\n  }\n}\n\n/**\n * Load about section info (version, counts)\n */\nasync function loadAboutInfo(): Promise<void> {\n  const versionEl = document.getElementById('app-version');\n  const opsCountEl = document.getElementById('ops-count');\n  const schedulesCountEl = document.getElementById('schedules-count');\n\n  // Get version from meta tag\n  const versionMeta = document.querySelector('meta[name=\"app-version\"]');\n  if (versionEl && versionMeta) {\n    versionEl.textContent = versionMeta.getAttribute('content') || '--';\n  }\n\n  // Get operations count\n  try {\n    const opsResponse = await fetch('/api/maintenance/operations');\n    if (opsResponse.ok && opsCountEl) {\n      const data = await opsResponse.json();\n      opsCountEl.textContent = String(data.operations?.length || 0);\n    }\n  } catch {\n    // Ignore errors\n  }\n\n  // Get schedules count\n  try {\n    const schedResponse = await fetch('/api/schedules');\n    if (schedResponse.ok && schedulesCountEl) {\n      const data = await schedResponse.json();\n      schedulesCountEl.textContent = String(data.schedules?.length || 0);\n    }\n  } catch {\n    // Ignore errors\n  }\n}\n\n/**\n * Show keyboard shortcuts modal\n */\nexport function showKeyboardShortcuts(): void {\n  // Trigger the existing shortcuts modal if available\n  const event = new KeyboardEvent('keydown', { key: '?' });\n  document.dispatchEvent(event);\n}\n\n// ============================================================================\n// Tab Switching\n// ============================================================================\n\nexport function switchTab(tabName: TabName): void {\n  document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));\n  document.querySelectorAll('.tabs button').forEach(btn => btn.classList.remove('active'));\n\n  const tabContent = document.getElementById(tabName);\n  if (tabContent) {\n    tabContent.classList.add('active');\n  }\n\n  // Find and activate the corresponding tab button\n  const tabButtons = document.querySelectorAll('.tabs button');\n  tabButtons.forEach(btn => {\n    if (btn.textContent?.toLowerCase().includes(tabName)) {\n      btn.classList.add('active');\n    }\n  });\n\n  // Load data for the tab\n  if (tabName === 'dashboard') {\n    // Load dashboard data\n    const loadSystemInfo = (window as any).loadSystemInfo;\n    if (loadSystemInfo) loadSystemInfo();\n  } else if (tabName === 'maintenance') {\n    // Load operations\n    const loadOperations = (window as any).loadOperations;\n    if (loadOperations) loadOperations();\n  } else if (tabName === 'schedule') {\n    // Initialize schedule tab\n    const onScheduleTabShow = (window as any).onScheduleTabShow;\n    if (onScheduleTabShow) onScheduleTabShow();\n  }\n}\n", "/**\n * Dashboard module - System monitoring and health display\n */\n\nimport type { SystemInfoData, SparklineData, PreviousMetrics, ProcessInfo } from '../types';\nimport { showToast } from './ui';\nimport { animateValue } from './ui';\n\n// ============================================================================\n// Global State\n// ============================================================================\n\nexport const sparklineData: SparklineData = {\n  cpu: [],\n  memory: [],\n  disk: [],\n  timestamps: []\n};\n\nexport const previousMetrics: PreviousMetrics = {\n  cpu: null,\n  memory: null,\n  disk: null\n};\n\nexport let currentUsername: string | null = null;\n\n// ============================================================================\n// Retry Utility\n// ============================================================================\n\n/**\n * Fetch with automatic retry on failure\n * @param url - URL to fetch\n * @param maxRetries - Maximum number of retry attempts (default: 3)\n * @param delayMs - Initial delay between retries in ms (default: 1000)\n * @returns Promise with the fetch response\n */\nasync function fetchWithRetry(url: string, maxRetries = 3, delayMs = 1000): Promise<Response> {\n  let lastError: Error | null = null;\n  \n  for (let attempt = 0; attempt <= maxRetries; attempt++) {\n    try {\n      const response = await fetch(url);\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n      return response;\n    } catch (error) {\n      lastError = error as Error;\n      if (attempt < maxRetries) {\n        // Exponential backoff: 1s, 2s, 4s\n        await new Promise(resolve => setTimeout(resolve, delayMs * Math.pow(2, attempt)));\n      }\n    }\n  }\n  \n  throw lastError || new Error('Fetch failed after retries');\n}\n\n// ============================================================================\n// System Metrics & Health\n// ============================================================================\n\n/**\n * Load and display system information\n */\nexport async function loadSystemInfo(): Promise<void> {\n  try {\n    const response = await fetchWithRetry('/api/system/info');\n    const data: SystemInfoData = await response.json();\n\n    // Store username globally for use in path buttons\n    if (data.system && data.system.username) {\n      currentUsername = data.system.username;\n      // Also store on window for access from other modules\n      (window as any)._currentUsername = data.system.username;\n    }\n\n    // Calculate trends\n    const cpuTrend = calculateTrend(data.cpu.history);\n    const memoryTrend = calculateTrend(data.memory.history);\n    const diskTrend = calculateTrend(data.disk.history);\n\n    // System metrics with animations\n    const metricsDiv = document.getElementById('system-metrics');\n    if (!metricsDiv) return;\n\n    const isFirstLoad = previousMetrics.cpu === null;\n\n    if (isFirstLoad) {\n      // First load: build HTML structure\n      metricsDiv.innerHTML = `\n        <div class=\"metric-card\">\n          <h3>CPU Usage</h3>\n          <div class=\"value\" id=\"cpu-value\">${data.cpu.percent.toFixed(1)}%</div>\n          ${getTrendHTML(cpuTrend, data.cpu.history)}\n          <div class=\"sparkline-container\">\n            <canvas id=\"cpu-sparkline\" class=\"sparkline\" width=\"80\" height=\"24\"></canvas>\n          </div>\n          <div class=\"subvalue\">${data.cpu.count} cores</div>\n          <div class=\"progress-bar\">\n            <div class=\"progress-bar-fill ${getStatusClass(data.cpu.percent)}\" id=\"cpu-bar\"\n                 style=\"width: ${data.cpu.percent}%\"></div>\n          </div>\n        </div>\n        <div class=\"metric-card\">\n          <h3>Memory</h3>\n          <div class=\"value\" id=\"memory-value\">${data.memory.percent.toFixed(1)}%</div>\n          ${getTrendHTML(memoryTrend, data.memory.history)}\n          <div class=\"sparkline-container\">\n            <canvas id=\"memory-sparkline\" class=\"sparkline\" width=\"80\" height=\"24\"></canvas>\n          </div>\n          <div class=\"subvalue\">${data.memory.available_gb.toFixed(1)} GB available</div>\n          <div class=\"progress-bar\">\n            <div class=\"progress-bar-fill ${getStatusClass(data.memory.percent)}\" id=\"memory-bar\"\n                 style=\"width: ${data.memory.percent}%\"></div>\n          </div>\n        </div>\n        <div class=\"metric-card\">\n          <h3>Disk Space</h3>\n          <div class=\"value\" id=\"disk-value\">${data.disk.percent.toFixed(1)}%</div>\n          ${getTrendHTML(diskTrend, data.disk.history)}\n          <div class=\"sparkline-container\">\n            <canvas id=\"disk-sparkline\" class=\"sparkline\" width=\"80\" height=\"24\"></canvas>\n          </div>\n          <div class=\"subvalue\">${data.disk.free_gb.toFixed(1)} GB free of ${data.disk.total_gb.toFixed(1)} GB</div>\n          <div class=\"progress-bar\">\n            <div class=\"progress-bar-fill ${getStatusClass(data.disk.percent)}\" id=\"disk-bar\"\n                 style=\"width: ${data.disk.percent}%\"></div>\n          </div>\n        </div>\n        ${data.network ? `\n        <div class=\"metric-card\">\n          <h3>Network</h3>\n          <div class=\"value\" id=\"network-value\">\n            \u2193 ${data.network.download_mbps.toFixed(2)} MB/s\n          </div>\n          <div class=\"subvalue\" style=\"margin-top: 0.25rem;\">\n            \u2191 ${data.network.upload_mbps.toFixed(2)} MB/s\n          </div>\n          <div class=\"subvalue\" style=\"font-size: 0.75rem; margin-top: 0.5rem;\">\n            Total: \u2193${data.network.total_recv_gb} GB / \u2191${data.network.total_sent_gb} GB\n          </div>\n        </div>\n        ` : ''}\n        ${data.swap && data.swap.total_gb > 0 ? `\n        <div class=\"metric-card\">\n          <h3>Swap</h3>\n          <div class=\"value\" id=\"swap-value\">${data.swap.percent.toFixed(1)}%</div>\n          <div class=\"subvalue\">${data.swap.used_gb} GB used of ${data.swap.total_gb} GB</div>\n          <div class=\"progress-bar\">\n            <div class=\"progress-bar-fill ${getStatusClass(data.swap.percent)}\" id=\"swap-bar\"\n                 style=\"width: ${data.swap.percent}%\"></div>\n          </div>\n          ${data.swap.percent > 50 ? '<div class=\"warning\">\u26A0\uFE0F High swap usage indicates memory pressure</div>' : ''}\n        </div>\n        ` : ''}\n      `;\n\n      console.log('First load - Memory bar HTML rendered');\n      setTimeout(() => {\n        const memBar = document.getElementById('memory-bar');\n        if (memBar) {\n          console.log('Memory bar found after first load:', {\n            width: memBar.style.width,\n            className: memBar.className,\n            computedWidth: window.getComputedStyle(memBar).width,\n            parent: memBar.parentElement\n          });\n        } else {\n          console.error('Memory bar NOT found after first load!');\n        }\n      }, 100);\n    } else {\n      // Subsequent loads: animate values\n      const cpuValueEl = document.getElementById('cpu-value');\n      const memoryValueEl = document.getElementById('memory-value');\n      const diskValueEl = document.getElementById('disk-value');\n\n      if (cpuValueEl && previousMetrics.cpu !== null) {\n        animateValue(cpuValueEl, previousMetrics.cpu, data.cpu.percent, 300, 1, '%');\n      }\n      if (memoryValueEl && previousMetrics.memory !== null) {\n        animateValue(memoryValueEl, previousMetrics.memory, data.memory.percent, 300, 1, '%');\n      }\n      if (diskValueEl && previousMetrics.disk !== null) {\n        animateValue(diskValueEl, previousMetrics.disk, data.disk.percent, 300, 1, '%');\n      }\n\n      // Update progress bars smoothly\n      const cpuBar = document.getElementById('cpu-bar');\n      const memoryBar = document.getElementById('memory-bar');\n      const diskBar = document.getElementById('disk-bar');\n\n      if (!memoryBar) {\n        console.error('Memory bar element not found!');\n      } else {\n        console.log(`Memory bar found: width=${data.memory.percent}%, element:`, memoryBar);\n      }\n\n      if (cpuBar) {\n        cpuBar.style.width = data.cpu.percent + '%';\n        cpuBar.className = `progress-bar-fill ${getStatusClass(data.cpu.percent)}`;\n      }\n      if (memoryBar) {\n        memoryBar.style.width = data.memory.percent + '%';\n        memoryBar.className = `progress-bar-fill ${getStatusClass(data.memory.percent)}`;\n      }\n      if (diskBar) {\n        diskBar.style.width = data.disk.percent + '%';\n        diskBar.className = `progress-bar-fill ${getStatusClass(data.disk.percent)}`;\n      }\n\n      // Update trend indicators (recreate HTML for simplicity)\n      const cpuCard = document.querySelector('.metric-card:nth-child(1)');\n      const memoryCard = document.querySelector('.metric-card:nth-child(2)');\n      const diskCard = document.querySelector('.metric-card:nth-child(3)');\n\n      if (cpuCard) {\n        const existingTrend = cpuCard.querySelector('.trend');\n        if (existingTrend) existingTrend.remove();\n        const valueDiv = cpuCard.querySelector('.value');\n        if (valueDiv) {\n          valueDiv.insertAdjacentHTML('afterend', getTrendHTML(cpuTrend, data.cpu.history));\n        }\n      }\n      if (memoryCard) {\n        const existingTrend = memoryCard.querySelector('.trend');\n        if (existingTrend) existingTrend.remove();\n        const valueDiv = memoryCard.querySelector('.value');\n        if (valueDiv) {\n          valueDiv.insertAdjacentHTML('afterend', getTrendHTML(memoryTrend, data.memory.history));\n        }\n      }\n      if (diskCard) {\n        const existingTrend = diskCard.querySelector('.trend');\n        if (existingTrend) existingTrend.remove();\n        const valueDiv = diskCard.querySelector('.value');\n        if (valueDiv) {\n          valueDiv.insertAdjacentHTML('afterend', getTrendHTML(diskTrend, data.disk.history));\n        }\n      }\n    }\n\n    // Store current metrics for next animation\n    previousMetrics.cpu = data.cpu.percent;\n    previousMetrics.memory = data.memory.percent;\n    previousMetrics.disk = data.disk.percent;\n\n    // Fetch full sparkline data and draw\n    fetch('/api/system/sparkline')\n      .then(res => res.json())\n      .then(sparkData => {\n        console.log('Sparkline data received:', sparkData);\n        if (sparkData && sparkData.cpu && sparkData.cpu.length >= 2) {\n          drawSparkline('cpu-sparkline', sparkData.cpu, '#ff6961');\n          drawSparkline('memory-sparkline', sparkData.memory, '#0a84ff');\n          drawSparkline('disk-sparkline', sparkData.disk, '#ff9500');\n        } else {\n          console.warn('Sparkline data insufficient:', sparkData);\n        }\n      })\n      .catch(err => console.error('Error loading sparkline data:', err));\n\n    // System info\n    const systemInfoDiv = document.getElementById('system-info');\n    if (systemInfoDiv) {\n      systemInfoDiv.innerHTML = `\n        <dl class=\"info-item\">\n          <dt>Total Memory</dt>\n          <dd>${data.memory.total_gb.toFixed(1)} GB</dd>\n        </dl>\n        <dl class=\"info-item\">\n          <dt>Used Memory</dt>\n          <dd>${data.memory.used_gb.toFixed(1)} GB</dd>\n        </dl>\n        <dl class=\"info-item\">\n          <dt>Total Disk</dt>\n          <dd>${data.disk.total_gb.toFixed(1)} GB</dd>\n        </dl>\n        <dl class=\"info-item\">\n          <dt>Used Disk</dt>\n          <dd>${data.disk.used_gb.toFixed(1)} GB</dd>\n        </dl>\n      `;\n    }\n\n    // Maintenance status - Load last run time from API\n    const diskWarning = data.disk.percent > 80\n      ? `<div class=\"warning\">\u26A0\uFE0F Disk usage is high (${data.disk.percent.toFixed(1)}%). Consider running cleanup operations.</div>`\n      : '';\n    const memoryWarning = data.memory.percent > 80\n      ? `<div class=\"warning\">\u26A0\uFE0F Memory usage is high (${data.memory.percent.toFixed(1)}%).</div>`\n      : '';\n\n    // Fetch last maintenance run time\n    await loadLastMaintenanceRun(diskWarning, memoryWarning);\n\n  } catch (error) {\n    const metricsDiv = document.getElementById('system-metrics');\n    if (metricsDiv) {\n      metricsDiv.innerHTML = `<div class=\"error\">Error loading system info: ${(error as Error).message}</div>`;\n    }\n  }\n}\n\n/**\n * Get color for health score\n */\nfunction getHealthColor(score: number, overall: string): string {\n  // Use overall status for consistent coloring\n  switch (overall) {\n    case 'excellent': return '#32d74b';  // Green\n    case 'good': return '#0a84ff';       // Blue\n    case 'fair': return '#ff9500';       // Orange\n    case 'poor': return '#ff3b30';       // Red\n    default:\n      // Fallback to score-based coloring\n      if (score >= 90) return '#32d74b';\n      if (score >= 70) return '#0a84ff';\n      if (score >= 50) return '#ff9500';\n      return '#ff3b30';\n  }\n}\n\n/**\n * Generate SVG health gauge\n */\nfunction generateHealthGaugeSVG(score: number, overall: string): string {\n  const size = 180;\n  const strokeWidth = 12;\n  const radius = (size - strokeWidth) / 2;\n  const center = size / 2;\n\n  // Arc spans 240 degrees (from 150\u00B0 to 390\u00B0, or -30\u00B0 to 210\u00B0 from top)\n  const startAngle = 150;  // degrees\n  const endAngle = 390;    // degrees\n  const totalArc = endAngle - startAngle;  // 240 degrees\n\n  // Calculate the arc length based on score (0-100)\n  const scoreAngle = startAngle + (totalArc * score / 100);\n\n  // Convert to radians and calculate path\n  const toRadians = (deg: number) => (deg - 90) * Math.PI / 180;\n\n  const startX = center + radius * Math.cos(toRadians(startAngle));\n  const startY = center + radius * Math.sin(toRadians(startAngle));\n  const endX = center + radius * Math.cos(toRadians(endAngle));\n  const endY = center + radius * Math.sin(toRadians(endAngle));\n  const scoreX = center + radius * Math.cos(toRadians(scoreAngle));\n  const scoreY = center + radius * Math.sin(toRadians(scoreAngle));\n\n  // Large arc flag (1 if arc > 180 degrees)\n  const bgLargeArc = totalArc > 180 ? 1 : 0;\n  const scoreLargeArc = (scoreAngle - startAngle) > 180 ? 1 : 0;\n\n  const color = getHealthColor(score, overall);\n\n  // Background track path\n  const bgPath = `M ${startX} ${startY} A ${radius} ${radius} 0 ${bgLargeArc} 1 ${endX} ${endY}`;\n\n  // Score arc path\n  const scorePath = score > 0\n    ? `M ${startX} ${startY} A ${radius} ${radius} 0 ${scoreLargeArc} 1 ${scoreX} ${scoreY}`\n    : '';\n\n  // Status emoji\n  const emoji = overall === 'excellent' ? '\u2728' :\n                overall === 'good' ? '\uD83D\uDC4D' :\n                overall === 'fair' ? '\u26A0\uFE0F' : '\uD83D\uDD34';\n\n  return `\n    <svg width=\"${size}\" height=\"${size}\" viewBox=\"0 0 ${size} ${size}\" class=\"health-gauge-svg\">\n      <!-- Background track -->\n      <path\n        d=\"${bgPath}\"\n        fill=\"none\"\n        stroke=\"var(--border-light)\"\n        stroke-width=\"${strokeWidth}\"\n        stroke-linecap=\"round\"\n      />\n      <!-- Score arc with gradient -->\n      <defs>\n        <linearGradient id=\"healthGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n          <stop offset=\"0%\" style=\"stop-color:${color};stop-opacity:0.7\" />\n          <stop offset=\"100%\" style=\"stop-color:${color};stop-opacity:1\" />\n        </linearGradient>\n      </defs>\n      ${score > 0 ? `\n      <path\n        d=\"${scorePath}\"\n        fill=\"none\"\n        stroke=\"url(#healthGradient)\"\n        stroke-width=\"${strokeWidth}\"\n        stroke-linecap=\"round\"\n        class=\"health-gauge-arc\"\n      />\n      ` : ''}\n      <!-- Center score text -->\n      <text x=\"${center}\" y=\"${center - 10}\" text-anchor=\"middle\" class=\"health-gauge-score\" fill=\"${color}\">\n        ${score}\n      </text>\n      <text x=\"${center}\" y=\"${center + 20}\" text-anchor=\"middle\" class=\"health-gauge-label\">\n        ${overall.toUpperCase()}\n      </text>\n      <text x=\"${center}\" y=\"${center + 45}\" text-anchor=\"middle\" class=\"health-gauge-emoji\">\n        ${emoji}\n      </text>\n    </svg>\n  `;\n}\n\n/**\n * Load and display system health score with visual gauge\n */\nexport async function loadHealthScore(): Promise<void> {\n  const healthDiv = document.getElementById('health-score');\n  if (!healthDiv) return;\n\n  try {\n    const response = await fetchWithRetry('/api/system/health');\n    const data = await response.json();\n\n    // Generate SVG gauge\n    const gaugeSVG = generateHealthGaugeSVG(data.score, data.overall);\n\n    // Build issues list\n    let issuesHTML = '';\n    if (data.issues && data.issues.length > 0) {\n      issuesHTML = `\n        <div class=\"health-issues\">\n          <h4>Issues Detected:</h4>\n          <ul class=\"health-issues-list\">\n            ${data.issues.map((issue: string) => `\n              <li class=\"${issue.includes('Critical') ? 'critical' : 'warning'}\">\n                ${issue.includes('Critical') ? '\uD83D\uDD34' : '\u26A0\uFE0F'} ${issue}\n              </li>\n            `).join('')}\n          </ul>\n        </div>\n      `;\n    } else {\n      issuesHTML = `\n        <div class=\"health-all-clear\">\n          <span class=\"health-check-icon\">\u2713</span>\n          All systems healthy\n        </div>\n      `;\n    }\n\n    healthDiv.innerHTML = `\n      <div class=\"health-gauge-container\">\n        ${gaugeSVG}\n      </div>\n      ${issuesHTML}\n    `;\n  } catch (error) {\n    healthDiv.innerHTML = `<div class=\"error\">Error loading health score: ${(error as Error).message}</div>`;\n  }\n}\n\n/**\n * Load and display top resource consumers\n */\nexport async function loadTopProcesses(): Promise<void> {\n  const processesDiv = document.getElementById('top-processes');\n  if (!processesDiv) return;\n\n  try {\n    const response = await fetchWithRetry('/api/system/processes?limit=3');\n    const data = await response.json();\n\n    let html = '<div class=\"process-section\">';\n    html += '<h3 style=\"font-size: 0.875rem; margin-bottom: 0.5rem; color: var(--text-secondary);\">Top CPU Consumers</h3>';\n    html += '<div class=\"process-list\">';\n    data.top_cpu.forEach((proc: ProcessInfo, idx: number) => {\n      html += `\n        <div class=\"process-item\">\n          <div class=\"process-rank\">${idx + 1}</div>\n          <div class=\"process-name\">${proc.name}</div>\n          <div class=\"process-value\">${proc.cpu_percent}%</div>\n        </div>\n      `;\n    });\n    html += '</div></div>';\n\n    html += '<div class=\"process-section\" style=\"margin-top: 1.5rem;\">';\n    html += '<h3 style=\"font-size: 0.875rem; margin-bottom: 0.5rem; color: var(--text-secondary);\">Top Memory Consumers</h3>';\n    html += '<div class=\"process-list\">';\n    data.top_memory.forEach((proc: ProcessInfo, idx: number) => {\n      html += `\n        <div class=\"process-item\">\n          <div class=\"process-rank\">${idx + 1}</div>\n          <div class=\"process-name\">${proc.name}</div>\n          <div class=\"process-value\">${proc.memory_mb.toFixed(0)} MB</div>\n        </div>\n      `;\n    });\n    html += '</div></div>';\n\n    processesDiv.innerHTML = html;\n  } catch (error) {\n    processesDiv.innerHTML = `<div class=\"error\">Error loading processes: ${(error as Error).message}</div>`;\n  }\n}\n\n/**\n * Load and display last maintenance run time\n */\nexport async function loadLastMaintenanceRun(diskWarning: string = '', memoryWarning: string = ''): Promise<void> {\n  const statusDiv = document.getElementById('maintenance-status');\n  if (!statusDiv) return;\n\n  try {\n    const response = await fetch('/api/maintenance/last-run');\n    const data = await response.json();\n\n    let lastRunText: string;\n    if (data.status === 'never') {\n      lastRunText = '<strong>Never</strong>';\n    } else {\n      const lastRun = data.global_last_run || 'Unknown';\n      const relative = data.global_last_run_relative || '';\n      lastRunText = `<strong>${lastRun}</strong> <span style=\"color: var(--text-secondary);\">(${relative})</span>`;\n    }\n\n    statusDiv.innerHTML = `\n      <p>Last maintenance run: ${lastRunText}</p>\n      <p style=\"margin-top: 0.5rem;\">Recommendation: <strong>Run maintenance weekly</strong></p>\n      ${diskWarning}\n      ${memoryWarning}\n      ${!diskWarning && !memoryWarning ? '<div class=\"success\">\u2713 System is running smoothly</div>' : ''}\n    `;\n  } catch (error) {\n    // Fallback to \"Never\" if API fails\n    statusDiv.innerHTML = `\n      <p>Last maintenance run: <strong>Never</strong> <span style=\"color: var(--text-secondary);\">(check logs)</span></p>\n      <p style=\"margin-top: 0.5rem;\">Recommendation: <strong>Run maintenance weekly</strong></p>\n      ${diskWarning}\n      ${memoryWarning}\n      ${!diskWarning && !memoryWarning ? '<div class=\"success\">\u2713 System is running smoothly</div>' : ''}\n    `;\n  }\n}\n\n// ============================================================================\n// Sparkline & Trend Visualization\n// ============================================================================\n\n/**\n * Draw sparkline chart on canvas\n */\nexport function drawSparkline(canvasId: string, data: number[], color: string = '#0a84ff'): void {\n  const canvas = document.getElementById(canvasId) as HTMLCanvasElement | null;\n  if (!canvas) {\n    console.warn(`Canvas not found: ${canvasId}`);\n    return;\n  }\n  if (!data || data.length < 2) {\n    console.warn(`Insufficient data for ${canvasId}: ${data ? data.length : 0} points`);\n    return;\n  }\n\n  const ctx = canvas.getContext('2d');\n  if (!ctx) return;\n\n  const width = canvas.width;\n  const height = canvas.height;\n\n  // Clear canvas\n  ctx.clearRect(0, 0, width, height);\n\n  // Find min/max for scaling\n  const min = Math.min(...data);\n  const max = Math.max(...data);\n  const range = max - min || 1; // Avoid division by zero\n\n  // Draw line\n  ctx.beginPath();\n  ctx.strokeStyle = color;\n  ctx.lineWidth = 1.5;\n  ctx.lineJoin = 'round';\n\n  data.forEach((value, index) => {\n    const x = (index / (data.length - 1)) * width;\n    const y = height - ((value - min) / range) * height;\n\n    if (index === 0) {\n      ctx.moveTo(x, y);\n    } else {\n      ctx.lineTo(x, y);\n    }\n  });\n\n  ctx.stroke();\n}\n\n/**\n * Calculate trend from history array\n */\nexport function calculateTrend(history: number[]): 'up' | 'down' | 'neutral' {\n  if (!history || history.length < 2) return 'neutral';\n\n  const recent = history[history.length - 1]!;\n  const previous = history[history.length - 2]!;\n  const delta = recent - previous;\n\n  if (Math.abs(delta) < 0.5) return 'neutral'; // Threshold for neutral\n  return delta > 0 ? 'up' : 'down';\n}\n\n/**\n * Get trend display HTML\n */\nexport function getTrendHTML(trend: 'up' | 'down' | 'neutral', history: number[]): string {\n  if (!history || history.length < 2) return '';\n\n  const recent = history[history.length - 1]!;\n  const previous = history[history.length - 2]!;\n  const delta = Math.abs(recent - previous).toFixed(1);\n\n  const arrows: Record<string, string> = {\n    up: '\u2191',\n    down: '\u2193',\n    neutral: '\u2022'\n  };\n\n  return `<span class=\"trend ${trend}\">${arrows[trend]} ${delta}%</span>`;\n}\n\n/**\n * Get status class based on percentage\n */\nexport function getStatusClass(percent: number): string {\n  if (percent > 90) return 'danger';\n  if (percent > 75) return 'warning';\n  return '';\n}\n\n/**\n * Run a quick health check - comprehensive system scan with recommendations\n * This is the \"one-click\" feature that makes Upkeep competitive with CleanMyMac X\n */\nexport async function runQuickHealthCheck(): Promise<void> {\n  const btn = document.querySelector('.hero-card button') as HTMLButtonElement;\n  const originalText = btn?.innerHTML;\n  \n  try {\n    // Update button to show loading state\n    if (btn) {\n      btn.disabled = true;\n      btn.innerHTML = '\uD83D\uDD04 Scanning...';\n    }\n    \n    // Show toast\n    showToast('Starting health check...', 'info');\n    \n    // Run the preflight/doctor check which scans the system\n    const response = await fetch('/api/maintenance/doctor');\n    \n    if (!response.ok) {\n      throw new Error('Health check failed');\n    }\n    \n    const result = await response.json();\n    \n    // Reload all dashboard data\n    await Promise.all([\n      loadSystemInfo(),\n      loadHealthScore(),\n      loadTopProcesses()\n    ]);\n    \n    // Show results\n    const issueCount = result.issues?.length ?? 0;\n    if (issueCount === 0) {\n      showToast('\u2705 Your Mac is healthy! No issues found.', 'success');\n    } else {\n      showToast(`Found ${issueCount} item${issueCount > 1 ? 's' : ''} to review. Check the Maintenance tab.`, 'warning');\n      // Switch to maintenance tab to show issues\n      const switchTab = (window as any).showTab;\n      if (switchTab) {\n        setTimeout(() => switchTab('maintenance'), 1500);\n      }\n    }\n    \n  } catch (error) {\n    console.error('Health check error:', error);\n    showToast('Health check encountered an error. Please try again.', 'error');\n  } finally {\n    // Restore button\n    if (btn && originalText) {\n      btn.disabled = false;\n      btn.innerHTML = originalText;\n    }\n  }\n}\n", "/**\n * Utility functions for formatting, sanitization, and logging\n */\n\n// Debug mode - set to false for production\nconst DEBUG_MODE = false;\n\n/**\n * Debug logger - only logs when DEBUG_MODE is true\n * Use this instead of console.log for development debugging\n */\nexport function debug(...args: unknown[]): void {\n  if (DEBUG_MODE) {\n    console.log('[DEBUG]', ...args);\n  }\n}\n\n/**\n * Error logger - always logs errors\n */\nexport function logError(message: string, error?: unknown): void {\n  console.error(`[Upkeep Error] ${message}`, error ?? '');\n}\n\n/**\n * Warning logger - for non-critical issues\n */\nexport function logWarn(message: string, ...args: unknown[]): void {\n  console.warn(`[Upkeep] ${message}`, ...args);\n}\n\n/**\n * Format bytes to human-readable string\n */\nexport function formatBytes(bytes: number, decimals: number = 2): string {\n  if (bytes === 0) return '0 Bytes';\n\n  const k = 1024;\n  const dm = decimals < 0 ? 0 : decimals;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB'];\n\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\n}\n\n/**\n * Format duration in seconds to human-readable string\n */\nexport function formatDuration(seconds: number): string {\n  if (seconds < 60) {\n    return `${seconds.toFixed(0)}s`;\n  } else if (seconds < 3600) {\n    const minutes = Math.floor(seconds / 60);\n    const secs = Math.round(seconds % 60);\n    return `${minutes}m ${secs}s`;\n  } else {\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor((seconds % 3600) / 60);\n    return `${hours}h ${minutes}m`;\n  }\n}\n\n/**\n * Format time remaining\n */\nexport function formatTimeRemaining(seconds: number): string {\n  if (seconds < 60) {\n    return Math.round(seconds) + 's';\n  } else if (seconds < 3600) {\n    const minutes = Math.floor(seconds / 60);\n    const secs = Math.round(seconds % 60);\n    return `${minutes}m ${secs}s`;\n  } else {\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor((seconds % 3600) / 60);\n    return `${hours}h ${minutes}m`;\n  }\n}\n\n/**\n * Escape HTML to prevent XSS\n * WARNING: Only use for element text content, not for attributes\n */\nexport function escapeHtml(str: string): string {\n  const div = document.createElement('div');\n  div.textContent = str;\n  return div.innerHTML;\n}\n\n/**\n * Handle search key events\n */\nexport function handleSearchKey(event: KeyboardEvent, searchInputId: string, searchFunction: () => void): void {\n  if (event.key === 'Enter') {\n    searchFunction();\n  } else if (event.key === 'Escape') {\n    const searchInput = document.getElementById(searchInputId) as HTMLInputElement;\n    if (searchInput) {\n      searchInput.value = '';\n      searchFunction();\n    }\n  }\n}\n", "/**\n * Operation Time Tracking\n *\n * Tracks historical execution times for maintenance operations\n * to provide accurate ETA calculations.\n */\n\ninterface OperationTimeData {\n  runs: number[];  // Last N run times in seconds\n  average: number; // Average of runs\n}\n\ninterface OperationTimesStorage {\n  [operationId: string]: OperationTimeData;\n}\n\nconst STORAGE_KEY = 'upkeep-operation-times';\nconst MAX_STORED_RUNS = 5;  // Keep last 5 runs for rolling average\nconst DEFAULT_DURATION = 30; // Default 30 seconds if no history\n\n/**\n * Load operation times from localStorage\n */\nexport function loadOperationTimes(): OperationTimesStorage {\n  try {\n    const data = localStorage.getItem(STORAGE_KEY);\n    if (!data) return {};\n    return JSON.parse(data);\n  } catch (error) {\n    console.error('Failed to load operation times:', error);\n    return {};\n  }\n}\n\n/**\n * Save operation times to localStorage\n */\nfunction saveOperationTimes(times: OperationTimesStorage): void {\n  try {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(times));\n  } catch (error) {\n    console.error('Failed to save operation times:', error);\n  }\n}\n\n/**\n * Record operation duration\n */\nexport function recordOperationTime(operationId: string, durationSeconds: number): void {\n  const times = loadOperationTimes();\n\n  // Get existing data or create new\n  const data = times[operationId] || { runs: [], average: 0 };\n\n  // Add new duration\n  data.runs.push(Math.round(durationSeconds));\n\n  // Keep only last N runs\n  if (data.runs.length > MAX_STORED_RUNS) {\n    data.runs = data.runs.slice(-MAX_STORED_RUNS);\n  }\n\n  // Calculate average (round to 2 decimals for stable display/testing)\n  const avg = data.runs.reduce((sum, time) => sum + time, 0) / data.runs.length;\n  data.average = Math.round(avg * 100) / 100;\n\n  times[operationId] = data;\n  saveOperationTimes(times);\n}\n\n/**\n * Get average duration for an operation\n */\nexport function getAverageDuration(operationId: string): number {\n  const times = loadOperationTimes();\n  const data = times[operationId];\n\n  if (!data || data.runs.length === 0) {\n    return DEFAULT_DURATION;\n  }\n\n  return data.average;\n}\n\n/**\n * Get median duration for an operation (more resistant to outliers than average)\n */\nexport function getMedianDuration(operationId: string): number | null {\n  const times = loadOperationTimes();\n  const data = times[operationId];\n\n  if (!data || data.runs.length === 0) {\n    return null;  // No data available\n  }\n\n  // Sort runs to find median\n  const sorted = [...data.runs].sort((a, b) => a - b);\n  const mid = Math.floor(sorted.length / 2);\n\n  if (sorted.length % 2 === 0) {\n    // Even number: average of two middle values\n    const a = sorted[mid - 1];\n    const b = sorted[mid];\n    if (typeof a !== 'number' || typeof b !== 'number') return null;\n    return (a + b) / 2;\n  }\n\n  // Odd number: middle value\n  const m = sorted[mid];\n  return typeof m === 'number' ? m : null;\n}\n\n/**\n * Get formatted typical duration string for display\n * Returns null if no historical data exists\n */\nexport function getTypicalDurationDisplay(operationId: string): string | null {\n  const median = getMedianDuration(operationId);\n\n  if (median === null) {\n    return null;  // No data - don't show anything\n  }\n\n  // Format as human-readable duration\n  if (median < 60) {\n    return `${Math.round(median)}s`;\n  } else if (median < 3600) {\n    const minutes = Math.floor(median / 60);\n    const seconds = Math.round(median % 60);\n    return seconds > 0 ? `${minutes}m ${seconds}s` : `${minutes}m`;\n  } else {\n    const hours = Math.floor(median / 3600);\n    const minutes = Math.round((median % 3600) / 60);\n    return minutes > 0 ? `${hours}h ${minutes}m` : `${hours}h`;\n  }\n}\n\n/**\n * Calculate ETA for remaining operations\n */\nexport function calculateETA(\n  remainingOperationIds: string[],\n  currentOperationId: string | null,\n  currentOperationProgress: number\n): number {\n  let eta = 0;\n\n  // Add time for remaining operations (not yet started)\n  for (const opId of remainingOperationIds) {\n    eta += getAverageDuration(opId);\n  }\n\n  // Add remaining time for current operation\n  if (currentOperationId) {\n    const avgDuration = getAverageDuration(currentOperationId);\n\n    // Defensive: clamp progress to [0, 1] so weird UI states don't inflate ETA\n    const progress = Math.max(0, Math.min(1, currentOperationProgress));\n    const remainingProgress = 1 - progress;\n\n    eta += avgDuration * remainingProgress;\n  }\n\n  return Math.round(eta);\n}\n\n/**\n * Get historical data for an operation (for debugging/display)\n */\nexport function getOperationHistory(operationId: string): OperationTimeData | null {\n  const times = loadOperationTimes();\n  return times[operationId] || null;\n}\n\n/**\n * Clear all historical data (for testing/reset)\n */\nexport function clearOperationTimes(): void {\n  localStorage.removeItem(STORAGE_KEY);\n}\n", "/**\n * Maintenance module - Operations execution and progress tracking\n */\n\nimport type { MaintenanceOperation, OperationEvent } from '../types';\nimport { showToast } from './ui';\nimport { formatDuration } from './utils';\nimport { escapeHtml } from './utils';\nimport { recordOperationTime, calculateETA, getAverageDuration, getTypicalDurationDisplay, getMedianDuration } from './operation-times';\n\n// ============================================================================\n// Global State\n// ============================================================================\n\nexport let runningOperations = false;\nexport let operationInvocationId = 0; // Track which invocation is current (prevents race conditions)\nexport let allOperations: MaintenanceOperation[] = [];\n\n// Progress tracking\nexport let operationStartTime = 0;\nexport let batchStartTime = 0;  // Track when entire batch started\nexport let currentOperationIndex = 0;\nexport let totalOperations = 0;\nexport let operationTimes: number[] = [];\nexport let progressTimerInterval: number | null = null;\nexport let queueStatusInterval: number | null = null;\nexport let currentOperationId: string | null = null;\nexport let selectedOperationIds: string[] = [];  // Track which operations were selected\n\n// Per-operation stats from server (last run + typical runtime)\nlet operationStats: Record<string, any> = {};\n\n// Category filter state\nlet activeCategory: string | null = null;\nlet collapsedCategories: Set<string> = new Set();\n\n// Smart category defaults - these start collapsed\nconst DEFAULT_COLLAPSED_CATEGORIES = new Set([\n  'Reports',\n  'Cleanup Operations',\n  'Cache Cleanup',\n  'Space Cleanup',\n]);\n\n// Category display order and icons\nconst CATEGORY_CONFIG: Record<string, { icon: string; order: number }> = {\n  'Update Operations': { icon: '\uD83D\uDCE6', order: 1 },\n  'Disk / Filesystem': { icon: '\uD83D\uDCBE', order: 2 },\n  'System': { icon: '\u2699\uFE0F', order: 3 },\n  'Cleanup Operations': { icon: '\uD83E\uDDF9', order: 4 },\n  'Cache Cleanup': { icon: '\uD83D\uDDD1\uFE0F', order: 5 },\n  'Space Cleanup': { icon: '\uD83D\uDCC1', order: 6 },\n  'Reports': { icon: '\uD83D\uDCCA', order: 7 },\n};\n\n// Initialize collapsed state from localStorage or defaults\nfunction initCollapsedState(): void {\n  const saved = localStorage.getItem('upkeep-collapsed-categories');\n  if (saved) {\n    try {\n      collapsedCategories = new Set(JSON.parse(saved));\n    } catch {\n      collapsedCategories = new Set(DEFAULT_COLLAPSED_CATEGORIES);\n    }\n  } else {\n    collapsedCategories = new Set(DEFAULT_COLLAPSED_CATEGORIES);\n  }\n}\n\n// Save collapsed state to localStorage\nfunction saveCollapsedState(): void {\n  localStorage.setItem('upkeep-collapsed-categories', JSON.stringify([...collapsedCategories]));\n}\n\n// ============================================================================\n// Load Operations\n// ============================================================================\n\n/**\n * Load and display available maintenance operations\n */\nexport async function loadOperations(): Promise<void> {\n  try {\n    // Add cache-busting parameter to force fresh data\n    const cacheBuster = Date.now();\n    const response = await fetch(`/api/maintenance/operations?_=${cacheBuster}`);\n    const data = await response.json();\n\n    if (!data.operations || data.operations.length === 0) {\n      const operationsDiv = document.getElementById('operations-list');\n      if (operationsDiv) {\n        operationsDiv.innerHTML = '<div class=\"error\">No operations available</div>';\n      }\n      return;\n    }\n\n    allOperations = data.operations;\n\n    // Sort by category\n    allOperations.sort((a, b) => {\n      if (a.category === b.category) {\n        return a.name.localeCompare(b.name);\n      }\n      return a.category.localeCompare(b.category);\n    });\n\n    // Fetch per-operation last run data\n    let operationsHistory: Record<string, any> = {};\n    try {\n      const lastRunResponse = await fetch('/api/maintenance/last-run');\n      const lastRunData = await lastRunResponse.json();\n      operationsHistory = lastRunData.operations || {};\n      operationStats = operationsHistory;\n    } catch (error) {\n      console.warn('Could not fetch per-operation history:', error);\n    }\n\n    // Run preflight checks (Doctor)\n    runDoctor().catch(() => {});\n\n    // Generate operation HTML with category grouping\n    let html = '';\n    \n    // Build operations map for reference\n    allOperations.map(op => {\n      const opHistory = operationsHistory[op.id];\n\n      // Typical duration (server-provided preferred; fallback to localStorage)\n      const typicalDuration = opHistory?.typical_display || getTypicalDurationDisplay(op.id);\n      const durationHtml = typicalDuration\n        ? ` | \u23F1\uFE0F Typically <strong>${typicalDuration}</strong>`\n        : '';\n\n      let lastRunHtml = '';\n      if (opHistory && opHistory.last_run_relative) {\n        const statusIcon = opHistory.success ? '\u2713' : '\u2717';\n        const statusColor = opHistory.success ? 'var(--success-color)' : 'var(--error-color)';\n        lastRunHtml = `<div style=\"font-size: 0.8rem; color: var(--text-secondary); margin-top: 0.5rem;\">\n          \uD83D\uDCC5 Last run: <strong>${opHistory.last_run_relative}</strong> <span style=\"color: ${statusColor}\">${statusIcon}</span>${durationHtml}\n        </div>`;\n      } else {\n        const typicalFallback = durationHtml || ' | \u23F1\uFE0F Typically <strong>\u2014</strong> <span style=\"opacity:0.7;\">(first run)</span>';\n        lastRunHtml = `<div style=\"font-size: 0.8rem; color: var(--text-secondary); margin-top: 0.5rem;\">\n          \uD83D\uDCC5 Last run: <strong>Never run</strong>${durationHtml || typicalFallback}\n        </div>`;\n      }\n\n      // Build WHY/WHAT accordion if meaningful data is available\n      let whyWhatHtml = '';\n      if (op.why || op.what || (op.when_to_run && op.when_to_run.length > 0)) {\n        const hasWhen = Array.isArray(op.when_to_run) && op.when_to_run.length > 0;\n        const hasContext = !!op.why?.context;\n        const hasProblems = Array.isArray(op.why?.problems) && op.why!.problems.length > 0;\n        const hasOutcomes = Array.isArray(op.what?.outcomes) && op.what!.outcomes.length > 0;\n        const hasTimeline = !!op.what?.timeline;\n\n        // Only render the accordion if it will contain something useful.\n        const hasAnyDetails = hasWhen || hasContext || hasProblems || hasOutcomes || hasTimeline;\n\n        if (hasAnyDetails) {\n          const whenToRunHtml = hasWhen\n            ? `\n              <div class=\"operation-when\">\n                <h5>\uD83D\uDCC5 When to Run This</h5>\n                <ul>\n                  ${op.when_to_run!.map((when) => `<li>${escapeHtml(String(when))}</li>`).join('')}\n                </ul>\n              </div>\n            `\n            : '';\n\n          const contextHtml = hasContext\n            ? `<p class=\"operation-context\">${escapeHtml(String(op.why!.context))}</p>`\n            : '';\n\n          const problemsHtml = hasProblems\n            ? op.why!.problems\n                .map(\n                  (problem: any) =>\n                    `<li><strong>${escapeHtml(String(problem.symptom))}</strong><br>${escapeHtml(String(problem.description))}</li>`\n                )\n                .join('')\n            : '';\n\n          const outcomesHtml = hasOutcomes\n            ? op.what!.outcomes\n                .map((outcome: any) => {\n                  const icon =\n                    outcome.type === 'positive'\n                      ? '\u2705'\n                      : outcome.type === 'warning'\n                        ? '\u26A0\uFE0F'\n                        : outcome.type === 'temporary'\n                          ? '\u23F1\uFE0F'\n                          : '\u2139\uFE0F';\n                  return `<li>${icon} ${escapeHtml(String(outcome.description))}</li>`;\n                })\n                .join('')\n            : '';\n\n          const timelineHtml = hasTimeline\n            ? `<p class=\"operation-timeline\"><strong>\u23F1\uFE0F How Long:</strong> ${escapeHtml(String(op.what!.timeline))}</p>`\n            : '';\n\n          whyWhatHtml = `\n            <details class=\"operation-details\">\n              <summary>\u2139\uFE0F Why run this & What to expect</summary>\n              <div class=\"operation-details-content\">\n                ${whenToRunHtml}\n                ${contextHtml}\n                ${hasProblems ? `<div class=\"operation-why\"><h5>\uD83D\uDD0D Problems This Solves</h5><ul>${problemsHtml}</ul></div>` : ''}\n                ${hasOutcomes || hasTimeline ? `<div class=\"operation-what\"><h5>\u2728 What Happens After Running</h5>${hasOutcomes ? `<ul>${outcomesHtml}</ul>` : ''}${timelineHtml}</div>` : ''}\n              </div>\n            </details>\n          `;\n        }\n      }\n\n      return `\n        <div class=\"operation-item\" data-operation-id=\"${op.id}\" data-category=\"${op.category}\">\n          <input type=\"checkbox\" id=\"op-${op.id}\" value=\"${op.id}\"\n                 ${op.recommended ? 'checked' : ''}>\n          <div class=\"operation-info\">\n            <h4>\n              ${op.name}\n              ${op.recommended ? '<span class=\"badge recommended\">Recommended</span>' : '<span class=\"badge optional\">Optional</span>'}\n            </h4>\n            <p>${op.description}</p>\n            ${whyWhatHtml}\n            ${lastRunHtml}\n          </div>\n        </div>\n      `;\n    });\n    \n    // Initialize collapsed state from localStorage\n    initCollapsedState();\n    \n    // Get unique categories and sort by defined order\n    const categories = [...new Set(allOperations.map(op => op.category))].sort((a, b) => {\n      const orderA = CATEGORY_CONFIG[a]?.order ?? 99;\n      const orderB = CATEGORY_CONFIG[b]?.order ?? 99;\n      return orderA - orderB;\n    });\n    \n    // Separate recommended operations\n    const recommendedOps = allOperations.filter(op => op.recommended);\n    \n    // Build category filter buttons\n    const filterButtonsHtml = `\n      <div class=\"category-filters\" style=\"display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 1rem; align-items: center;\">\n        <button class=\"category-filter-btn active\" data-category=\"\" onclick=\"window.upkeepFilterByCategory(null)\">\n          All (${allOperations.length})\n        </button>\n        ${categories.map(cat => {\n          const count = allOperations.filter(op => op.category === cat).length;\n          const icon = CATEGORY_CONFIG[cat]?.icon || '\uD83D\uDCCB';\n          return `<button class=\"category-filter-btn\" data-category=\"${cat}\" onclick=\"window.upkeepFilterByCategory('${cat}')\">\n            ${icon} ${cat} (${count})\n          </button>`;\n        }).join('')}\n        <span style=\"flex-grow: 1;\"></span>\n        <button class=\"expand-collapse-btn\" onclick=\"window.upkeepExpandAll()\" title=\"Expand all categories\">\n          \u229E Expand\n        </button>\n        <button class=\"expand-collapse-btn\" onclick=\"window.upkeepCollapseAll()\" title=\"Collapse all categories\">\n          \u229F Collapse\n        </button>\n      </div>\n    `;\n    \n    // Helper to render an operation item\n    const renderOperationItem = (op: any, isRecommendedSection = false): string => {\n      const opHistory = operationsHistory[op.id];\n      const typicalDuration = opHistory?.typical_display || getTypicalDurationDisplay(op.id);\n      const durationHtml = typicalDuration ? ` | \u23F1\uFE0F Typically <strong>${typicalDuration}</strong>` : '';\n      \n      let lastRunHtml = '';\n      if (opHistory && opHistory.last_run_relative) {\n        const statusIcon = opHistory.success ? '\u2713' : '\u2717';\n        const statusColor = opHistory.success ? 'var(--success-color)' : 'var(--error-color)';\n        lastRunHtml = `<div style=\"font-size: 0.8rem; color: var(--text-secondary); margin-top: 0.5rem;\">\n          \uD83D\uDCC5 Last run: <strong>${opHistory.last_run_relative}</strong> <span style=\"color: ${statusColor}\">${statusIcon}</span>${durationHtml}\n        </div>`;\n      } else {\n        lastRunHtml = `<div style=\"font-size: 0.8rem; color: var(--text-secondary); margin-top: 0.5rem;\">\n          \uD83D\uDCC5 Last run: <strong>Never run</strong>${durationHtml || ' | \u23F1\uFE0F Typically <strong>\u2014</strong> (first run)'}\n        </div>`;\n      }\n      \n      let whyWhatHtml = '';\n      if (op.why || op.what || (op.when_to_run && op.when_to_run.length > 0)) {\n        let detailsContent = '';\n        \n        // WHY section - Problems this solves\n        if (op.why) {\n          detailsContent += `<div class=\"operation-why\">`;\n          detailsContent += `<h5>\uD83E\uDD14 Why run this?</h5>`;\n          if (op.why.context) {\n            detailsContent += `<div class=\"operation-context\">${escapeHtml(op.why.context)}</div>`;\n          }\n          if (op.why.problems && op.why.problems.length > 0) {\n            detailsContent += `<ul>`;\n            for (const problem of op.why.problems) {\n              detailsContent += `<li><strong>${escapeHtml(problem.symptom)}</strong> ${escapeHtml(problem.description)}</li>`;\n            }\n            detailsContent += `</ul>`;\n          }\n          detailsContent += `</div>`;\n        }\n        \n        // WHAT section - Expected outcomes\n        if (op.what) {\n          detailsContent += `<div class=\"operation-what\">`;\n          detailsContent += `<h5>\uD83D\uDCCB What to expect</h5>`;\n          if (op.what.outcomes && op.what.outcomes.length > 0) {\n            detailsContent += `<ul>`;\n            for (const outcome of op.what.outcomes) {\n              const icon = outcome.type === 'positive' ? '\u2705' : \n                          outcome.type === 'warning' ? '\u26A0\uFE0F' : \n                          outcome.type === 'temporary' ? '\u23F3' : \n                          outcome.type === 'neutral' ? '\u2796' : '\u2139\uFE0F';\n              detailsContent += `<li>${icon} ${escapeHtml(outcome.description)}</li>`;\n            }\n            detailsContent += `</ul>`;\n          }\n          if (op.what.timeline) {\n            detailsContent += `<div class=\"operation-timeline\"><strong>\u23F1\uFE0F Timeline:</strong> ${escapeHtml(op.what.timeline)}</div>`;\n          }\n        }\n        \n        // WHEN section - When to run\n        if (op.when_to_run && op.when_to_run.length > 0) {\n          detailsContent += `<div class=\"operation-when\">`;\n          detailsContent += `<h5>\uD83D\uDCC5 When to run</h5>`;\n          detailsContent += `<ul>`;\n          for (const when of op.when_to_run) {\n            detailsContent += `<li>${escapeHtml(when)}</li>`;\n          }\n          detailsContent += `</ul>`;\n          detailsContent += `</div>`;\n        }\n        \n        whyWhatHtml = `<details class=\"operation-details\"><summary>\u2139\uFE0F Why run this & What to expect</summary><div class=\"operation-details-content\">${detailsContent}</div></details>`;\n      }\n      \n      return `\n        <div class=\"operation-item\" data-operation-id=\"${op.id}\" data-category=\"${op.category}\" style=\"transition: all 0.2s ease;\">\n          <input type=\"checkbox\" id=\"op-${op.id}\" value=\"${op.id}\" ${op.recommended ? 'checked' : ''}>\n          <div class=\"operation-info\">\n            <h4>${op.name} ${op.recommended ? '<span class=\"badge recommended\">Recommended</span>' : '<span class=\"badge optional\">Optional</span>'}</h4>\n            <p>${op.description}</p>\n            ${whyWhatHtml}\n            ${lastRunHtml}\n          </div>\n        </div>\n      `;\n    };\n    \n    // Build HTML with smart collapsible categories\n    html = filterButtonsHtml;\n    \n    // Add Recommended section (always visible)\n    if (recommendedOps.length > 0) {\n      html += `\n        <div class=\"category-header recommended-header\" style=\"display: flex; align-items: center; gap: 0.5rem; padding: 0.75rem; background: linear-gradient(135deg, var(--accent-color) 0%, #5856d6 100%); color: white; border-radius: 6px; margin: 0.5rem 0;\">\n          <span style=\"font-size: 1.1rem;\">\u2B50</span>\n          <strong>Recommended</strong>\n          <span style=\"opacity: 0.8; font-size: 0.85rem;\">(${recommendedOps.length})</span>\n        </div>\n      `;\n      recommendedOps.forEach(op => {\n        html += renderOperationItem(op, true);\n      });\n    }\n    \n    // Add each category with collapsible sections\n    for (const category of categories) {\n      const categoryOps = allOperations.filter(op => op.category === category && !op.recommended);\n      if (categoryOps.length === 0) continue;\n      \n      const icon = CATEGORY_CONFIG[category]?.icon || '\uD83D\uDCCB';\n      const isCollapsed = collapsedCategories.has(category);\n      \n      html += `\n        <div class=\"category-header ${isCollapsed ? 'collapsed' : ''}\" data-category=\"${category}\" \n             style=\"display: flex; align-items: center; gap: 0.5rem; padding: 0.75rem; background: var(--bg-tertiary); border-radius: 6px; margin: 1rem 0 0.5rem; cursor: pointer; user-select: none;\"\n             onclick=\"window.upkeepToggleCategory('${category}')\">\n          <span class=\"collapse-icon\" style=\"font-size: 0.75rem; transition: transform 0.2s;\">${isCollapsed ? '\u25B6' : '\u25BC'}</span>\n          <span style=\"font-size: 1.1rem;\">${icon}</span>\n          <strong>${category}</strong>\n          <span style=\"color: var(--text-secondary); font-size: 0.85rem;\">(${categoryOps.length})</span>\n        </div>\n      `;\n      \n      categoryOps.forEach(op => {\n        const itemStyle = isCollapsed ? 'display: none; max-height: 0; opacity: 0;' : '';\n        html += renderOperationItem(op).replace('style=\"transition:', `style=\"${itemStyle} transition:`);\n      });\n    }\n\n    const operationsDiv = document.getElementById('operations-list');\n    if (operationsDiv) {\n      operationsDiv.innerHTML = html;\n    }\n\n    const selectedCount = allOperations.filter(op => op.recommended).length;\n    showToast(`Loaded ${allOperations.length} operations (${selectedCount} recommended)`, 'success', 2000);\n\n    // Fetch and display global last maintenance run timestamp\n    try {\n      const lastRunResponse = await fetch('/api/maintenance/last-run');\n      const lastRunData = await lastRunResponse.json();\n\n      // Remove any existing info-banner to prevent duplicates\n      const existingBanners = document.querySelectorAll('.info-banner');\n      existingBanners.forEach(banner => banner.remove());\n\n      if (lastRunData.success && lastRunData.status === 'completed') {\n        const banner = document.createElement('div');\n        banner.className = 'info-banner';\n        banner.style.cssText = 'padding: 0.75rem; background: var(--success-bg); color: var(--success-color); border-radius: 6px; margin-bottom: 1rem; font-size: 0.875rem;';\n        const relative = lastRunData.global_last_run_relative || 'Recently';\n        banner.innerHTML = `\uD83D\uDCC5 Last maintenance run: <strong>${relative}</strong>`;\n        operationsDiv?.insertAdjacentElement('beforebegin', banner);\n      } else if (lastRunData.status === 'never') {\n        const banner = document.createElement('div');\n        banner.className = 'info-banner';\n        banner.style.cssText = 'padding: 0.75rem; background: var(--warning-bg); color: var(--warning-color); border-radius: 6px; margin-bottom: 1rem; font-size: 0.875rem;';\n        banner.innerHTML = `\u2139\uFE0F Maintenance has never been run`;\n        operationsDiv?.insertAdjacentElement('beforebegin', banner);\n      }\n    } catch (error) {\n      console.warn('Could not fetch last run info:', error);\n    }\n  } catch (error) {\n    console.error('Error loading operations:', error);\n    const operationsDiv = document.getElementById('operations-list');\n    if (operationsDiv) {\n      operationsDiv.innerHTML = `<div class=\"error\">Error loading operations: ${(error as Error).message}</div>`;\n    }\n    showToast('Failed to load operations', 'error');\n  }\n}\n\n// ============================================================================\n// Operation Selection & Templates\n// ============================================================================\n\n/**\n * Select all operations\n */\nexport function selectAllOperations(): void {\n  const checkboxes = document.querySelectorAll<HTMLInputElement>('#operations-list input[type=\"checkbox\"]');\n  checkboxes.forEach(cb => cb.checked = true);\n  showToast(`Selected all ${checkboxes.length} operations`, 'info', 2000);\n}\n\n/**\n * Deselect all operations\n */\nexport function deselectAllOperations(): void {\n  const checkboxes = document.querySelectorAll<HTMLInputElement>('#operations-list input[type=\"checkbox\"]');\n  checkboxes.forEach(cb => cb.checked = false);\n  showToast('Deselected all operations', 'info', 2000);\n}\n\n/**\n * Filter operations by category\n */\nexport function filterByCategory(category: string | null): void {\n  activeCategory = category;\n  \n  // Update filter button states\n  document.querySelectorAll('.category-filter-btn').forEach(btn => {\n    btn.classList.toggle('active', btn.getAttribute('data-category') === category);\n  });\n  \n  // Show/hide operations\n  document.querySelectorAll<HTMLElement>('.operation-item').forEach(item => {\n    const opId = item.getAttribute('data-operation-id');\n    const op = allOperations.find(o => o.id === opId);\n    if (op) {\n      const shouldShow = !category || op.category === category;\n      item.style.display = shouldShow ? '' : 'none';\n    }\n  });\n  \n  // Show/hide category headers\n  document.querySelectorAll<HTMLElement>('.category-header').forEach(header => {\n    const cat = header.getAttribute('data-category');\n    header.style.display = !category || cat === category ? '' : 'none';\n  });\n  \n  const filterText = category || 'all';\n  showToast(`Showing ${filterText} operations`, 'info', 1500);\n}\n\n/**\n * Toggle category collapse with animation\n */\nexport function toggleCategory(category: string): void {\n  if (collapsedCategories.has(category)) {\n    collapsedCategories.delete(category);\n  } else {\n    collapsedCategories.add(category);\n  }\n  \n  // Save preference\n  saveCollapsedState();\n  \n  // Toggle visibility of operations in this category with animation\n  const items = document.querySelectorAll<HTMLElement>(`.operation-item[data-category=\"${category}\"]`);\n  const isCollapsed = collapsedCategories.has(category);\n  \n  items.forEach(item => {\n    if (isCollapsed) {\n      item.style.maxHeight = '0';\n      item.style.opacity = '0';\n      item.style.overflow = 'hidden';\n      item.style.marginBottom = '0';\n      item.style.padding = '0';\n      setTimeout(() => { item.style.display = 'none'; }, 200);\n    } else {\n      item.style.display = '';\n      item.style.overflow = 'hidden';\n      setTimeout(() => {\n        item.style.maxHeight = '500px';\n        item.style.opacity = '1';\n        item.style.marginBottom = '';\n        item.style.padding = '';\n      }, 10);\n    }\n  });\n  \n  // Update header icon and style\n  const header = document.querySelector<HTMLElement>(`.category-header[data-category=\"${category}\"]`);\n  if (header) {\n    const icon = header.querySelector('.collapse-icon');\n    if (icon) {\n      icon.textContent = isCollapsed ? '\u25B6' : '\u25BC';\n    }\n    header.classList.toggle('collapsed', isCollapsed);\n  }\n}\n\n/**\n * Expand all categories\n */\nexport function expandAllCategories(): void {\n  const categories = [...new Set(allOperations.map(op => op.category))];\n  categories.forEach(cat => {\n    if (collapsedCategories.has(cat)) {\n      toggleCategory(cat);\n    }\n  });\n  showToast('All categories expanded', 'info', 1500);\n}\n\n/**\n * Collapse all categories\n */\nexport function collapseAllCategories(): void {\n  const categories = [...new Set(allOperations.map(op => op.category))];\n  categories.forEach(cat => {\n    if (!collapsedCategories.has(cat)) {\n      toggleCategory(cat);\n    }\n  });\n  showToast('All categories collapsed', 'info', 1500);\n}\n\n/**\n * Apply template selection\n */\nexport function applyTemplate(template: { name: string; operations: string[] }): void {\n  console.log('Applying template:', template);\n\n  // First, deselect all operations\n  const checkboxes = document.querySelectorAll<HTMLInputElement>('#operations-list input[type=\"checkbox\"]');\n  checkboxes.forEach(cb => cb.checked = false);\n\n  // Then select operations from the template\n  if (template.operations && template.operations.length > 0) {\n    let selectedCount = 0;\n    template.operations.forEach(opId => {\n      const checkbox = document.getElementById(`op-${opId}`) as HTMLInputElement | null;\n      if (checkbox) {\n        checkbox.checked = true;\n        selectedCount++;\n      } else {\n        console.warn(`Operation not found: ${opId}`);\n      }\n    });\n\n    showToast(`Applied \"${template.name}\" - ${selectedCount} operations selected`, 'success', 3000);\n  } else {\n    showToast(`Applied \"${template.name}\"`, 'info', 2000);\n  }\n}\n\n// ============================================================================\n// Run Operations\n// ============================================================================\n\n/**\n * Run selected maintenance operations\n */\nexport async function runSelectedOperations(): Promise<void> {\n  console.log('=== runSelectedOperations CALLED ===');\n  const checkboxes = document.querySelectorAll<HTMLInputElement>('#operations-list input[type=\"checkbox\"]:checked');\n  console.log('Found checked checkboxes:', checkboxes.length);\n  const selected = Array.from(checkboxes).map(cb => cb.value);\n  console.log('Selected operations:', selected);\n\n  // Store selected operations for historical ETA calculation\n  selectedOperationIds = selected;\n\n  if (selected.length === 0) {\n    console.log('No operations selected');\n    alert('No operations selected');\n    return;\n  }\n\n  // Increment invocation ID to track this specific run\n  operationInvocationId++;\n  const thisInvocationId = operationInvocationId;\n  console.log('Operation invocation ID:', thisInvocationId);\n\n  runningOperations = true;\n  const runBtn = document.getElementById('run-btn') as HTMLButtonElement | null;\n  if (runBtn) runBtn.disabled = true;\n\n  // Disable Select All/Deselect All buttons during operations\n  // UX Best Practice: Disable (don't hide) to maintain layout stability\n  // Research: Nielsen Norman Group, Material Design, Microsoft HIG\n  // Benefits: Prevents CLS (Cumulative Layout Shift), better accessibility, clear state communication\n  const selectAllBtn = document.getElementById('select-all-btn') as HTMLButtonElement | null;\n  const deselectAllBtn = document.getElementById('deselect-all-btn') as HTMLButtonElement | null;\n  if (selectAllBtn) {\n    selectAllBtn.disabled = true;\n    selectAllBtn.setAttribute('aria-disabled', 'true');\n    selectAllBtn.title = 'Selection locked while operations are running';\n  }\n  if (deselectAllBtn) {\n    deselectAllBtn.disabled = true;\n    deselectAllBtn.setAttribute('aria-disabled', 'true');\n    deselectAllBtn.title = 'Selection locked while operations are running';\n  }\n\n  // Show Skip/Cancel buttons\n  const skipBtn = document.getElementById('skip-btn') as HTMLElement | null;\n  const cancelBtn = document.getElementById('cancel-btn') as HTMLElement | null;\n  if (skipBtn) skipBtn.style.display = 'inline-block';\n  if (cancelBtn) cancelBtn.style.display = 'inline-block';\n  console.log('Showing Skip/Cancel buttons for invocation', thisInvocationId);\n\n  // Show progress container and initialize progress\n  const progressContainer = document.getElementById('progress-container');\n  if (progressContainer) progressContainer.style.display = 'block';\n  currentOperationIndex = 0;\n  totalOperations = selected.length;\n  operationTimes = [];\n  batchStartTime = Date.now();  // Track batch start time for elapsed metric\n  updateProgress();\n  startProgressTimer();\n  startQueueStatusPolling();\n\n  // Show and populate output area\n  const progressText = document.getElementById('progress-text') as HTMLElement | null;\n  if (progressText) {\n    progressText.style.display = 'block';\n    progressText.textContent = 'Connecting to server...\\n';\n    progressText.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n  }\n\n  try {\n    const response = await fetch('/api/maintenance/run', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        operation_ids: selected\n      })\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.detail || 'Failed to start operations');\n    }\n\n    // Handle Server-Sent Events stream\n    const reader = response.body?.getReader();\n    if (!reader) {\n      throw new Error('Failed to get response reader');\n    }\n\n    const decoder = new TextDecoder();\n    let buffer = '';\n\n    while (true) {\n      const { done, value } = await reader.read();\n\n      if (done) {\n        break;\n      }\n\n      // Decode and process SSE data\n      buffer += decoder.decode(value, { stream: true });\n      const lines = buffer.split('\\n');\n      buffer = lines.pop() || '';\n\n      for (const line of lines) {\n        if (line.startsWith('data: ')) {\n          const jsonData = line.slice(6);\n          try {\n            const event: OperationEvent = JSON.parse(jsonData);\n            handleOperationEvent(event);\n          } catch (e) {\n            console.error('Error parsing SSE data:', e);\n          }\n        }\n      }\n    }\n\n  } catch (error) {\n    if (progressText) {\n      progressText.textContent += `\\n\\nError: ${(error as Error).message}\\n`;\n    }\n    console.error('Error running operations:', error);\n  } finally {\n    // Only cleanup if this is still the current invocation\n    if (thisInvocationId === operationInvocationId) {\n      console.log('Cleaning up invocation', thisInvocationId, '(current)');\n      if (runBtn) runBtn.disabled = false;\n      if (skipBtn) skipBtn.style.display = 'none';\n      if (cancelBtn) cancelBtn.style.display = 'none';\n      runningOperations = false;\n\n      stopProgressTimer();\n      stopQueueStatusPolling();\n      batchStartTime = 0;  // Reset batch timer\n      if (progressContainer) progressContainer.style.display = 'none';\n\n      // Re-enable Select All/Deselect All buttons\n      if (selectAllBtn) {\n        selectAllBtn.disabled = false;\n        selectAllBtn.removeAttribute('aria-disabled');\n        selectAllBtn.title = '';\n      }\n      if (deselectAllBtn) {\n        deselectAllBtn.disabled = false;\n        deselectAllBtn.removeAttribute('aria-disabled');\n        deselectAllBtn.title = '';\n      }\n    } else {\n      console.log('Skipping cleanup for invocation', thisInvocationId, '(superseded by', operationInvocationId, ')');\n    }\n  }\n}\n\n/**\n * Skip the current operation\n */\nexport async function skipCurrentOperation(): Promise<void> {\n  // Skipping is often safe, but accidental clicks are costly/confusing.\n  // Use a lightweight confirmation to avoid surprise skips.\n  if (!confirm('Skip the current operation?')) {\n    return;\n  }\n\n  try {\n    const response = await fetch('/api/maintenance/skip', {\n      method: 'POST'\n    });\n\n    if (!response.ok) {\n      throw new Error(`HTTP ${response.status}`);\n    }\n\n    const result = await response.json();\n\n    const progressText = document.getElementById('progress-text');\n    if (progressText) {\n      const message = result.message || 'Skipped by user';\n      progressText.textContent += `\\n\\n\u23ED\uFE0F ${message}\\n`;\n    }\n\n    showToast('Operation skipped', 'info', 2000);\n\n  } catch (error) {\n    console.error('Error skipping operation:', error);\n    alert('Error skipping operation: ' + (error as Error).message);\n  }\n}\n\n/**\n * Cancel all running operations\n */\nexport async function cancelOperations(): Promise<void> {\n  if (!confirm('Cancel all running operations?')) {\n    return;\n  }\n\n  try {\n    const response = await fetch('/api/maintenance/cancel', {\n      method: 'POST'\n    });\n\n    const result = await response.json();\n\n    const progressText = document.getElementById('progress-text');\n    if (progressText) {\n      progressText.textContent += `\\n\\n\u26A0\uFE0F ${result.message}\\n`;\n    }\n\n    // Hide buttons and increment invocation ID\n    operationInvocationId++;\n    runningOperations = false;\n    const runBtn = document.getElementById('run-btn') as HTMLButtonElement | null;\n    const skipBtn = document.getElementById('skip-btn') as HTMLElement | null;\n    const cancelBtn = document.getElementById('cancel-btn') as HTMLElement | null;\n    if (runBtn) runBtn.disabled = false;\n    if (skipBtn) skipBtn.style.display = 'none';\n    if (cancelBtn) cancelBtn.style.display = 'none';\n\n    stopProgressTimer();\n    stopQueueStatusPolling();\n    batchStartTime = 0;  // Reset batch timer\n    const progressContainer = document.getElementById('progress-container');\n    if (progressContainer) progressContainer.style.display = 'none';\n\n    const selectAllBtn = document.getElementById('select-all-btn') as HTMLButtonElement | null;\n    const deselectAllBtn = document.getElementById('deselect-all-btn') as HTMLButtonElement | null;\n    if (selectAllBtn) {\n      selectAllBtn.disabled = false;\n      selectAllBtn.removeAttribute('aria-disabled');\n      selectAllBtn.title = '';\n    }\n    if (deselectAllBtn) {\n      deselectAllBtn.disabled = false;\n      deselectAllBtn.removeAttribute('aria-disabled');\n      deselectAllBtn.title = '';\n    }\n\n    console.log('Operations cancelled, incremented invocation ID to', operationInvocationId);\n\n  } catch (error) {\n    console.error('Error cancelling operations:', error);\n    alert('Error cancelling operations: ' + (error as Error).message);\n  }\n}\n\n// ============================================================================\n// Event Handlers\n// ============================================================================\n\n/**\n * Handle operation event from SSE stream\n */\nexport function handleOperationEvent(event: OperationEvent): void {\n  const progressText = document.getElementById('progress-text');\n  if (!progressText) return;\n\n  switch (event.type) {\n    case 'start':\n      progressText.textContent += `\\n${event.message}\\n`;\n      progressText.textContent += `${'='.repeat(60)}\\n\\n`;\n\n      // Hide copy button when starting new operations\n      const inlineActionsStart = document.getElementById('inline-progress-actions');\n      if (inlineActionsStart) {\n        inlineActionsStart.style.display = 'none';\n        inlineActionsStart.innerHTML = '';\n      }\n\n      setTimeout(() => {\n        window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });\n      }, 50);\n      break;\n\n    case 'operation_start':\n      progressText.textContent += `\\n[${event.progress}] Starting: ${event.operation_name}\\n`;\n      progressText.textContent += `${'-'.repeat(60)}\\n`;\n\n      operationStartTime = Date.now();\n      currentOperationId = event.operation_id || null;\n      currentOperationIndex++;\n      updateProgress();\n      break;\n\n    case 'output':\n      progressText.textContent += `${event.line}\\n`;\n      progressText.scrollTop = progressText.scrollHeight;\n      break;\n\n    case 'operation_complete':\n      const status = event.success ? '\u2713 Success' : '\u2717 Failed';\n      progressText.textContent += `\\n${status} (exit code: ${event.returncode})\\n`;\n\n      if (operationStartTime > 0 && currentOperationId) {\n        const durationMs = Date.now() - operationStartTime;\n        const durationSec = durationMs / 1000;\n\n        // Record to historical tracking (successful runs only for a cleaner median)\n        if (event.success) {\n          recordOperationTime(currentOperationId, durationSec);\n        }\n\n        // Also track for current batch average\n        operationTimes.push(durationMs);\n\n        updateProgress();\n      }\n      currentOperationId = null;\n      break;\n\n    case 'operation_skipped':\n      progressText.textContent += `\\n\u23ED\uFE0F  Skipped by user\\n`;\n      break;\n\n    case 'operation_error':\n      progressText.textContent += `\\nError: ${event.message}\\n`;\n      break;\n\n    case 'summary':\n      progressText.textContent += `\\n${'='.repeat(60)}\\n`;\n      progressText.textContent += `\\nSummary:\\n`;\n      progressText.textContent += `  Total operations: ${event.total}\\n`;\n      progressText.textContent += `  Successful: ${event.successful}\\n`;\n      progressText.textContent += `  Failed: ${event.failed}\\n`;\n\n      // Display disk space comparison if available\n      if (event.disk_before && event.disk_after && event.space_recovered_display) {\n        progressText.textContent += `\\n\uD83D\uDCCA Disk Space:\\n`;\n        progressText.textContent += `  Before: ${event.disk_before.free_gb} GB free\\n`;\n        progressText.textContent += `  After:  ${event.disk_after.free_gb} GB free\\n`;\n\n        // Highlight space recovered with emoji\n        const spaceRecovered = event.space_recovered_bytes || 0;\n        if (spaceRecovered > 0) {\n          progressText.textContent += `  \u2728 Space recovered: ${event.space_recovered_display}\\n`;\n        } else if (spaceRecovered < 0) {\n          progressText.textContent += `  \uD83D\uDCE5 Space used: ${event.space_recovered_display}\\n`;\n        } else {\n          progressText.textContent += `  \u2796 No change in disk space\\n`;\n        }\n      }\n      break;\n\n    case 'complete':\n      progressText.textContent += `\\n${event.message}\\n`;\n      progressText.textContent += `${'='.repeat(60)}\\n`;\n\n      refreshLastRunTimestamp();\n\n      // Add copy button\n      const inlineActions = document.getElementById('inline-progress-actions');\n      if (inlineActions) {\n        inlineActions.innerHTML = '';\n        inlineActions.style.display = 'flex';\n\n        const copyBtn = document.createElement('button');\n        copyBtn.className = 'primary';\n        copyBtn.id = 'copy-output-btn';\n        copyBtn.innerHTML = '\uD83D\uDCCB Copy Output to Clipboard';\n        copyBtn.onclick = () => copyOutputToClipboard();\n        inlineActions.appendChild(copyBtn);\n\n        setTimeout(() => {\n          copyBtn.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n        }, 100);\n      }\n      break;\n\n    case 'cancelled':\n      progressText.textContent += `\\n${event.message}\\n`;\n      break;\n\n    case 'error':\n      progressText.textContent += `\\nError: ${event.message}\\n`;\n      break;\n  }\n\n  progressText.scrollTop = progressText.scrollHeight;\n}\n\n/**\n * Copy operation output to clipboard\n */\nexport async function copyOutputToClipboard(): Promise<void> {\n  const progressText = document.getElementById('progress-text');\n  const copyBtn = document.getElementById('copy-output-btn') as HTMLButtonElement | null;\n\n  if (!progressText || !copyBtn) return;\n\n  try {\n    await navigator.clipboard.writeText(progressText.textContent || '');\n\n    const originalText = copyBtn.innerHTML;\n    copyBtn.innerHTML = '\u2713 Copied to Clipboard!';\n    copyBtn.className = 'primary success-flash';\n\n    setTimeout(() => {\n      copyBtn.innerHTML = originalText;\n      copyBtn.className = 'primary';\n    }, 2000);\n\n  } catch (error) {\n    console.error('Failed to copy to clipboard:', error);\n\n    const originalText = copyBtn.innerHTML;\n    copyBtn.innerHTML = '\u2717 Copy Failed';\n    copyBtn.className = 'danger';\n\n    setTimeout(() => {\n      copyBtn.innerHTML = originalText;\n      copyBtn.className = 'primary';\n    }, 2000);\n  }\n}\n\n// ============================================================================\n// Progress Tracking\n// ============================================================================\n\n/**\n * Update elapsed time for entire batch\n */\nfunction updateElapsedTime(): void {\n  if (batchStartTime > 0) {\n    const elapsed = Date.now() - batchStartTime;\n    const elapsedEl = document.getElementById('total-elapsed');\n    if (elapsedEl) {\n      elapsedEl.textContent = formatDuration(elapsed / 1000);\n    }\n  }\n}\n\n/**\n * Start progress timer\n */\nexport function startProgressTimer(): void {\n  if (progressTimerInterval) {\n    clearInterval(progressTimerInterval);\n  }\n\n  progressTimerInterval = window.setInterval(() => {\n    // Update current operation timer\n    if (operationStartTime > 0) {\n      const elapsed = Date.now() - operationStartTime;\n      const timerEl = document.getElementById('current-op-timer');\n      if (timerEl) {\n        const currentDuration = formatDuration(elapsed / 1000);\n\n        // Show typical duration if available (server preferred; fallback to localStorage)\n        if (currentOperationId) {\n          const serverTypicalSec = operationStats?.[currentOperationId]?.typical_seconds;\n          const medianSec = typeof serverTypicalSec === 'number' ? serverTypicalSec : getMedianDuration(currentOperationId);\n\n          if (medianSec !== null && typeof medianSec === 'number' && !Number.isNaN(medianSec)) {\n            const typicalDuration = formatDuration(medianSec);\n            timerEl.textContent = `${currentDuration} / Typically ${typicalDuration}`;\n            timerEl.setAttribute('title', 'Typical runtime (median of recent runs)');\n          } else {\n            timerEl.textContent = `${currentDuration} / Typically \u2014`;\n            timerEl.setAttribute('title', 'No historical runtime yet (first run)');\n          }\n        } else {\n          timerEl.textContent = currentDuration;\n        }\n      }\n    }\n\n    // Update total elapsed time\n    updateElapsedTime();\n  }, 1000);\n}\n\n/**\n * Stop progress timer\n */\nexport function stopProgressTimer(): void {\n  if (progressTimerInterval) {\n    clearInterval(progressTimerInterval);\n    progressTimerInterval = null;\n  }\n}\n\n/**\n * Update progress display\n */\nexport function updateProgress(): void {\n  const percent = totalOperations > 0\n    ? Math.round((currentOperationIndex / totalOperations) * 100)\n    : 0;\n\n  console.log('updateProgress:', { currentOperationIndex, totalOperations, percent });\n\n  // Use unique IDs to avoid conflicts with progress-overlay modal\n  const progressBar = document.getElementById('maintenance-progress-bar') as HTMLElement | null;\n  const progressPercent = document.getElementById('maintenance-progress-percent');\n\n  if (progressBar) {\n    progressBar.style.width = percent + '%';\n    console.log('Set maintenance-progress-bar width to:', percent + '%');\n  } else {\n    console.error('maintenance-progress-bar element not found!');\n  }\n\n  if (progressPercent) {\n    progressPercent.textContent = percent + '%';\n    console.log('Set maintenance-progress-percent text to:', percent + '%');\n  } else {\n    console.error('maintenance-progress-percent element not found!');\n  }\n\n  const progressLabel = document.getElementById('progress-label');\n  if (progressLabel) {\n    progressLabel.textContent = `Operation ${currentOperationIndex} of ${totalOperations}`;\n  }\n\n  const opsProgress = document.getElementById('ops-progress');\n  if (opsProgress) {\n    opsProgress.textContent = `${currentOperationIndex}/${totalOperations}`;\n  }\n\n  // Calculate estimated remaining time using historical data\n  const estRemaining = document.getElementById('est-remaining');\n  if (estRemaining) {\n    if (currentOperationIndex >= totalOperations) {\n      estRemaining.textContent = 'Complete';\n    } else if (selectedOperationIds.length > 0) {\n      // Calculate remaining operations\n      const remainingOps = selectedOperationIds.slice(currentOperationIndex);\n\n      // Calculate progress of current operation (if any)\n      const currentProgress = currentOperationId && operationStartTime > 0\n        ? Math.min((Date.now() - operationStartTime) / (getAverageDuration(currentOperationId) * 1000), 0.99)\n        : 0;\n\n      // Use historical averages for accurate ETA\n      const etaSeconds = calculateETA(remainingOps, currentOperationId, currentProgress);\n      estRemaining.textContent = formatDuration(etaSeconds);\n    } else {\n      estRemaining.textContent = 'Calculating...';\n    }\n  }\n}\n\n/**\n * Start queue status polling\n */\nexport function startQueueStatusPolling(): void {\n  if (queueStatusInterval) {\n    clearInterval(queueStatusInterval);\n  }\n\n  queueStatusInterval = window.setInterval(async () => {\n    try {\n      const response = await fetch('/api/maintenance/queue');\n      const data = await response.json();\n\n      const queueDiv = document.getElementById('queue-status');\n      if (data.queued_count > 0) {\n        if (queueDiv) queueDiv.style.display = 'flex';\n        const queueCount = document.getElementById('queue-count');\n        if (queueCount) queueCount.textContent = String(data.queued_count);\n      } else {\n        if (queueDiv) queueDiv.style.display = 'none';\n      }\n\n      if (data.current_operation) {\n        console.log('Current operation:', data.current_operation);\n      }\n    } catch (error) {\n      console.error('Error polling queue status:', error);\n    }\n  }, 2000);\n}\n\n/**\n * Stop queue status polling\n */\nexport function stopQueueStatusPolling(): void {\n  if (queueStatusInterval) {\n    clearInterval(queueStatusInterval);\n    queueStatusInterval = null;\n  }\n}\n\n/**\n * Refresh last run timestamp after operations complete\n */\nasync function refreshLastRunTimestamp(): Promise<void> {\n  try {\n    const response = await fetch('/api/maintenance/last-run');\n    const data = await response.json();\n\n    // Update the global \"Last maintenance run\" banner (Task #130 fix)\n    const banners = document.querySelectorAll('.info-banner');\n    banners.forEach(banner => {\n      if (data.global_last_run_relative) {\n        banner.innerHTML = `\uD83D\uDCC5 Last maintenance run: <strong>${data.global_last_run_relative}</strong>`;\n        // Update style to success\n        (banner as HTMLElement).style.background = 'var(--success-bg)';\n        (banner as HTMLElement).style.color = 'var(--success-color)';\n      }\n    });\n\n    // Also update per-operation \"Last run\" timestamps in the operations list\n    if (data.operations) {\n      for (const [opId, opData] of Object.entries(data.operations)) {\n        const opItem = document.querySelector(`[data-operation-id=\"${opId}\"]`);\n        if (opItem) {\n          const lastRunDiv = opItem.querySelector('.operation-info > div:last-child');\n          if (lastRunDiv && (opData as any).last_run_relative) {\n            const statusIcon = (opData as any).success ? '\u2713' : '\u2717';\n            const statusColor = (opData as any).success ? 'var(--success-color)' : 'var(--error-color)';\n            const typicalDuration = (opData as any).typical_display || '';\n            const durationHtml = typicalDuration ? ` | \u23F1\uFE0F Typically <strong>${typicalDuration}</strong>` : '';\n            lastRunDiv.innerHTML = `\n              \uD83D\uDCC5 Last run: <strong>${(opData as any).last_run_relative}</strong> <span style=\"color: ${statusColor}\">${statusIcon}</span>${durationHtml}\n            `;\n          }\n        }\n      }\n    }\n  } catch (error) {\n    console.error('Error refreshing timestamp:', error);\n  }\n}\n\n// ============================================================================\n// Quick Start Wizard\n// ============================================================================\n\n// Research-based presets for Mac maintenance (2025-2026 best practices)\nconst WIZARD_PRESETS: Record<string, string[]> = {\n  // Quick Clean: Fast cleanup for weekly/biweekly use (~5 min)\n  // Use case: \"I just need to free up some space quickly\"\n  quick: ['browser-cache', 'trim-caches', 'trim-logs'],\n\n  // Weekly Routine: Comprehensive weekly maintenance (~15 min)\n  // Use case: Regular Sunday morning maintenance\n  weekly: ['brew-update', 'mas-update', 'disk-verify', 'browser-cache', 'trim-caches', 'trim-logs', 'periodic', 'spotlight-status'],\n\n  // Full Checkup: All recommended + comprehensive safe operations (~30 min)\n  // Use case: Monthly deep maintenance or before major work\n  full: ['brew-update', 'mas-update', 'disk-verify', 'browser-cache', 'dev-cache', 'dev-tools-cache', 'trim-caches', 'trim-logs', 'smart-check', 'periodic', 'spotlight-status', 'dns-flush'],\n\n  // Developer: Optimized for software developers (~20 min, 20-60GB savings)\n  // Use case: When Xcode/npm/pip caches are eating disk space\n  developer: ['dev-cache', 'dev-tools-cache', 'browser-cache', 'trim-caches', 'brew-cleanup', 'dns-flush'],\n\n  // Security: Focus on updates and system integrity (~10 min)\n  // Use case: After security advisories or monthly security check\n  security: ['macos-check', 'brew-update', 'mas-update', 'disk-verify', 'smart-check']\n};\n\nexport function showQuickStartWizard(): void {\n  const modal = document.getElementById('wizard-modal');\n  if (modal) {\n    modal.classList.add('active');\n  }\n}\n\nexport function closeWizard(): void {\n  const modal = document.getElementById('wizard-modal');\n  if (modal) {\n    modal.classList.remove('active');\n  }\n}\n\nexport async function selectWizardOption(option: string): Promise<void> {\n  closeWizard();\n\n  if (option === 'custom') {\n    showToast('Select operations below', 'info', 2000);\n    return;\n  }\n\n  // Get operations for this preset\n  const operationsToRun = WIZARD_PRESETS[option] || [];\n\n  // Select the operations\n  document.querySelectorAll('#operations-list input[type=\"checkbox\"]').forEach((cb) => {\n    const checkbox = cb as HTMLInputElement;\n    checkbox.checked = operationsToRun.includes(checkbox.value);\n  });\n\n  // Show confirmation\n  const optionNames: Record<string, string> = {\n    quick: 'Quick Clean',\n    weekly: 'Weekly Routine',\n    full: 'Full Checkup'\n  };\n\n  showToast(`\u2728 Selected: ${optionNames[option]} (${operationsToRun.length} operations)`, 'success', 3000);\n\n  // Scroll to operations list\n  const operationsList = document.getElementById('operations-list');\n  if (operationsList) {\n    operationsList.scrollIntoView({ behavior: 'smooth' });\n  }\n\n  // Hide wizard prompt after first use\n  const wizardPrompt = document.getElementById('wizard-prompt');\n  if (wizardPrompt) {\n    wizardPrompt.style.display = 'none';\n  }\n}\n\n// ============================================================================\n// Keyboard Shortcuts\n// ============================================================================\n\nfunction isTypingInField(target: EventTarget | null): boolean {\n  const el = target as HTMLElement | null;\n  if (!el) return false;\n  const tag = (el.tagName || '').toLowerCase();\n  return tag === 'input' || tag === 'textarea' || tag === 'select' || el.isContentEditable;\n}\n\nexport async function runDoctor(): Promise<void> {\n  const panel = document.getElementById('doctor-panel');\n  const results = document.getElementById('doctor-results');\n  if (!panel || !results) return;\n\n  try {\n    const res = await fetch('/api/maintenance/doctor');\n    const data = await res.json();\n\n    if (!data.success) {\n      panel.style.display = 'block';\n      results.innerHTML = `<div style=\"color: var(--danger);\">Doctor check failed.</div>`;\n      return;\n    }\n\n    const issues: any[] = data.issues || [];\n    if (issues.length === 0) {\n      panel.style.display = 'none';\n      results.innerHTML = '';\n      return;\n    }\n\n    panel.style.display = 'block';\n\n    const rows = issues.map((i) => {\n      const severityColor = i.severity === 'error' ? 'var(--danger)' : (i.severity === 'warning' ? 'var(--warning)' : 'var(--text-secondary)');\n      const affects = Array.isArray(i.affects_operations) && i.affects_operations.length\n        ? `<div style=\"color: var(--text-secondary); font-size: 0.8rem; margin-top: 0.25rem;\">Affects: ${i.affects_operations.join(', ')}</div>`\n        : '';\n\n      const button = i.fix_action\n        ? `<button class=\"secondary\" style=\"white-space: nowrap;\" onclick=\"fixDoctorIssue('${i.fix_action}')\">${i.fix_label || 'Fix'}</button>`\n        : '';\n\n      return `\n        <div style=\"display:flex; justify-content: space-between; gap: 1rem; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 10px; background: var(--bg-secondary);\">\n          <div>\n            <div style=\"font-weight: 600; color: ${severityColor};\">${escapeHtml(i.title || 'Issue')}</div>\n            <div style=\"color: var(--text-secondary); font-size: 0.875rem; margin-top: 0.15rem;\">${escapeHtml(i.detail || '')}</div>\n            ${affects}\n          </div>\n          <div style=\"display:flex; align-items:center; gap: 0.5rem;\">\n            ${button}\n          </div>\n        </div>\n      `;\n    }).join('');\n\n    results.innerHTML = `<div style=\"display:grid; gap: 0.75rem;\">${rows}</div>`;\n  } catch (e) {\n    panel.style.display = 'block';\n    results.innerHTML = `<div style=\"color: var(--danger);\">Doctor check failed.</div>`;\n  }\n}\n\n// Called from HTML via window.fixDoctorIssue\nexport async function fixDoctorIssue(action: string): Promise<void> {\n  try {\n    const res = await fetch('/api/maintenance/doctor/fix', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ action })\n    });\n    const data = await res.json();\n    if (!res.ok || !data.success) {\n      throw new Error(data.detail || data.error || 'Failed');\n    }\n    showToast(data.message || 'Fix started', 'success', 4000);\n    // Re-check after a short delay\n    setTimeout(() => runDoctor().catch(() => {}), 1500);\n  } catch (e: any) {\n    showToast(e?.message || 'Fix failed', 'error', 5000);\n  }\n}\n\nexport function closeShortcuts(): void {\n  const modal = document.getElementById('shortcuts-modal');\n  if (modal) modal.classList.remove('active');\n}\n\nfunction openShortcuts(): void {\n  const modal = document.getElementById('shortcuts-modal');\n  if (modal) modal.classList.add('active');\n}\n\nexport function initKeyboardShortcuts(): void {\n  document.addEventListener('keydown', (e: KeyboardEvent) => {\n    // Don't trigger global shortcuts while typing\n    if (isTypingInField(e.target)) return;\n\n    // \"?\" opens shortcuts\n    if (e.key === '?' || (e.key === '/' && e.shiftKey)) {\n      e.preventDefault();\n      openShortcuts();\n      return;\n    }\n\n    // \"/\" focuses operation search\n    if (e.key === '/' && !e.metaKey && !e.ctrlKey && !e.altKey) {\n      const search = document.getElementById('operation-search') as HTMLInputElement | null;\n      if (search) {\n        e.preventDefault();\n        search.focus();\n      }\n      return;\n    }\n\n    // Escape closes modals\n    if (e.key === 'Escape') {\n      closeShortcuts();\n      closeWizard();\n      const closeScheduleModalFn = (window as any).closeScheduleModal as undefined | (() => void);\n      if (closeScheduleModalFn) closeScheduleModalFn();\n    }\n  });\n}\n\n/**\n * Export the latest maintenance log as a downloadable text file.\n * Calls the /api/maintenance/export-log endpoint which returns a file download.\n */\nexport function exportLatestLog(): void {\n  // Create a temporary link to trigger the download\n  const link = document.createElement('a');\n  link.href = '/api/maintenance/export-log';\n  link.download = 'upkeep-log.txt';\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n}\n\n", "/**\n * Storage module - Storage analysis and file management\n */\n\nimport type { StorageAnalyzeResponse } from '../types';\nimport { showToast, showProgressOverlay, updateProgressOverlay, hideProgressOverlay } from './ui';\nimport { escapeHtml } from './utils';\n\n// ============================================================================\n// Global State\n// ============================================================================\n\nexport const selectedFiles: Set<string> = new Set();\n\n// ============================================================================\n// Storage Analysis\n// ============================================================================\n\n/**\n * Analyze storage at specified path\n */\nexport async function analyzeStorage(): Promise<void> {\n  const pathInput = document.getElementById('path-input') as HTMLInputElement | null;\n  const path = pathInput?.value || '/Users';\n  const resultsDiv = document.getElementById('storage-results');\n  const analyzeBtn = document.getElementById('analyze-btn-text');\n\n  if (!resultsDiv || !analyzeBtn) return;\n\n  resultsDiv.innerHTML = '<div class=\"loading\"><div class=\"spinner\"></div> Analyzing storage...</div>';\n  analyzeBtn.innerHTML = '<div class=\"spinner\"></div>';\n  selectedFiles.clear();\n  updateBreadcrumbs(path);\n\n  try {\n    const response = await fetch(`/api/storage/analyze?path=${encodeURIComponent(path)}`);\n\n    if (!response.ok) {\n      let errorMsg = `Server error: ${response.status}`;\n      try {\n        const errorData = await response.json();\n        errorMsg = errorData.detail || errorMsg;\n      } catch {\n        // Response is not JSON\n      }\n      analyzeBtn.textContent = 'Analyze';\n      resultsDiv.innerHTML = `<div class=\"error\">${errorMsg}</div>`;\n      showToast(errorMsg, 'error');\n      return;\n    }\n\n    const data: StorageAnalyzeResponse = await response.json();\n    analyzeBtn.textContent = 'Analyze';\n\n    if (!data.success) {\n      const errorMsg = (data as any).error || 'Unknown error occurred';\n      resultsDiv.innerHTML = `<div class=\"error\">${errorMsg}</div>`;\n      showToast(errorMsg, 'error');\n      return;\n    }\n\n    showToast(`Analyzed: ${data.file_count} files, ${data.total_size_gb.toFixed(2)} GB`, 'success');\n\n    // Generate category breakdown visualization\n    const categoryViz = renderCategoryBreakdown(data.category_sizes, data.total_size_bytes);\n\n    resultsDiv.innerHTML = `\n      <h3 style=\"margin-top: 2rem;\">Results for ${data.path || path}</h3>\n      <div class=\"metric-grid\" style=\"margin-top: 1rem;\">\n        <div class=\"metric-card\">\n          <h3>Total Size</h3>\n          <div class=\"value\">${data.total_size_gb.toFixed(2)} GB</div>\n        </div>\n        <div class=\"metric-card\">\n          <h3>Files</h3>\n          <div class=\"value\">${data.file_count.toLocaleString()}</div>\n        </div>\n        <div class=\"metric-card\">\n          <h3>Directories</h3>\n          <div class=\"value\">${data.dir_count.toLocaleString()}</div>\n        </div>\n      </div>\n      ${categoryViz}\n      <h3 style=\"margin-top: 2rem;\">Largest Items</h3>\n      <p style=\"color: var(--text-secondary); margin-top: 0.5rem;\">Select items to delete</p>\n      <div class=\"file-list\">\n        ${data.largest_entries.map((entry, idx) => {\n          const displayName = entry.path.split('/').pop();\n          return `\n          <div class=\"file-item\">\n            <input type=\"checkbox\" id=\"file-${idx}\" data-path=\"${entry.path.replace(/\"/g, '&quot;').replace(/'/g, '&#39;')}\">\n            <div class=\"file-info\">\n              <strong>${displayName}</strong><br>\n              <small style=\"color: var(--text-secondary);\">${entry.path}</small>\n            </div>\n            <div class=\"file-size\">\n              <strong>${entry.size_gb.toFixed(2)} GB</strong><br>\n              <small style=\"color: var(--text-secondary);\">${entry.is_dir ? 'Directory' : 'File'}</small>\n            </div>\n          </div>\n        `;\n        }).join('')}\n      </div>\n      <div class=\"button-group\">\n        <button class=\"primary\" id=\"trash-btn\">\n          \uD83D\uDDD1\uFE0F Move to Trash (<span id=\"selected-count\">0</span>)\n        </button>\n        <button class=\"danger\" id=\"permanent-delete-btn\">\n          \u26A0\uFE0F Permanently Delete (<span id=\"selected-count-permanent\">0</span>)\n        </button>\n        <button class=\"secondary\" id=\"select-all-btn\">Select All</button>\n        <button class=\"secondary\" id=\"deselect-all-btn\">Deselect All</button>\n      </div>\n    `;\n\n    // Attach event listeners\n    console.log('=== ATTACHING EVENT LISTENERS ===');\n    const trashBtn = document.getElementById('trash-btn');\n    const permBtn = document.getElementById('permanent-delete-btn');\n    const selAllBtn = document.getElementById('select-all-btn');\n    const deselAllBtn = document.getElementById('deselect-all-btn');\n\n    console.log('Trash button found:', trashBtn);\n    console.log('Permanent button found:', permBtn);\n\n    if (trashBtn) {\n      trashBtn.addEventListener('click', () => {\n        console.log('TRASH BUTTON CLICKED!');\n        deleteSelected('trash');\n      });\n      console.log('\u2713 Trash button listener attached');\n    }\n\n    if (permBtn) {\n      permBtn.addEventListener('click', () => {\n        console.log('PERMANENT DELETE BUTTON CLICKED!');\n        deleteSelected('permanent');\n      });\n      console.log('\u2713 Permanent button listener attached');\n    }\n\n    if (selAllBtn) {\n      selAllBtn.addEventListener('click', selectAllFiles);\n      console.log('\u2713 Select all button listener attached');\n    }\n\n    if (deselAllBtn) {\n      deselAllBtn.addEventListener('click', deselectAllFiles);\n      console.log('\u2713 Deselect all button listener attached');\n    }\n\n    // Attach checkbox event listeners\n    const checkboxes = document.querySelectorAll<HTMLInputElement>('#storage-results input[type=\"checkbox\"]');\n    console.log('Found checkboxes:', checkboxes.length);\n    checkboxes.forEach((checkbox, idx) => {\n      checkbox.addEventListener('change', () => {\n        console.log(`Checkbox ${idx} changed, path:`, checkbox.dataset.path);\n        if (checkbox.dataset.path) {\n          toggleFileSelection(checkbox.dataset.path);\n        }\n      });\n    });\n    console.log('\u2713 All checkbox listeners attached');\n\n  } catch (error) {\n    const errorMsg = (error as Error).message || 'Failed to analyze storage';\n    resultsDiv.innerHTML = `<div class=\"error\">Error: ${errorMsg}</div>`;\n    analyzeBtn.textContent = 'Analyze';\n    showToast(errorMsg, 'error');\n  }\n}\n\n// ============================================================================\n// File Selection\n// ============================================================================\n\n/**\n * Toggle file selection\n */\nexport function toggleFileSelection(path: string): void {\n  console.log('toggleFileSelection called with:', path);\n  console.log('selectedFiles before:', Array.from(selectedFiles));\n  if (selectedFiles.has(path)) {\n    selectedFiles.delete(path);\n    console.log('Removed path');\n  } else {\n    selectedFiles.add(path);\n    console.log('Added path');\n  }\n  console.log('selectedFiles after:', Array.from(selectedFiles));\n  updateSelectedCount();\n}\n\n/**\n * Update selected file count display\n */\nexport function updateSelectedCount(): void {\n  const count = selectedFiles.size;\n  const countEl = document.getElementById('selected-count');\n  const countElPermanent = document.getElementById('selected-count-permanent');\n  if (countEl) countEl.textContent = String(count);\n  if (countElPermanent) countElPermanent.textContent = String(count);\n}\n\n/**\n * Select all files\n */\nexport function selectAllFiles(): void {\n  const checkboxes = document.querySelectorAll<HTMLInputElement>('#storage-results input[type=\"checkbox\"]');\n  checkboxes.forEach(cb => {\n    cb.checked = true;\n    if (cb.dataset.path) {\n      selectedFiles.add(cb.dataset.path);\n    }\n  });\n  updateSelectedCount();\n}\n\n/**\n * Deselect all files\n */\nexport function deselectAllFiles(): void {\n  const checkboxes = document.querySelectorAll<HTMLInputElement>('#storage-results input[type=\"checkbox\"]');\n  checkboxes.forEach(cb => {\n    cb.checked = false;\n  });\n  selectedFiles.clear();\n  updateSelectedCount();\n}\n\n// ============================================================================\n// File Deletion\n// ============================================================================\n\n/**\n * Delete selected files (move to trash or permanent)\n */\nexport async function deleteSelected(mode: 'trash' | 'permanent' = 'trash'): Promise<void> {\n  console.log('=== deleteSelected CALLED ===');\n  console.log('Mode:', mode);\n  console.log('selectedFiles.size:', selectedFiles.size);\n  console.log('selectedFiles contents:', Array.from(selectedFiles));\n\n  if (selectedFiles.size === 0) {\n    console.log('No files selected, showing toast');\n    showToast('No files selected', 'warning');\n    return;\n  }\n\n  // Different confirmation messages based on mode\n  let confirmMessage: string;\n  if (mode === 'permanent') {\n    confirmMessage = `\u26A0\uFE0F PERMANENTLY DELETE ${selectedFiles.size} item(s)?\\n\\n` +\n                    `This CANNOT be undone! Files will be deleted forever.\\n\\n` +\n                    `Consider using \"Move to Trash\" instead (recoverable).`;\n  } else {\n    confirmMessage = `Move ${selectedFiles.size} item(s) to Trash?\\n\\n` +\n                    `You can recover them from macOS Trash if needed.`;\n  }\n\n  console.log('Showing confirmation dialog');\n  const confirmed = confirm(confirmMessage);\n  console.log('User confirmed:', confirmed);\n\n  if (!confirmed) {\n    console.log('User cancelled');\n    return;\n  }\n\n  console.log('Proceeding with delete...');\n\n  const totalFiles = selectedFiles.size;\n  let deleted = 0;\n  let failed = 0;\n  const failedPaths: Array<{ path: string; error: string }> = [];\n  let operationCancelled = false;\n\n  // Disable both buttons\n  const trashBtn = document.getElementById('trash-btn') as HTMLButtonElement | null;\n  const permanentBtn = document.getElementById('permanent-delete-btn') as HTMLButtonElement | null;\n  if (trashBtn) trashBtn.disabled = true;\n  if (permanentBtn) permanentBtn.disabled = true;\n\n  // Show progress overlay\n  const actionTitle = mode === 'permanent' ? '\u26A0\uFE0F Permanently Deleting Files...' : '\uD83D\uDDD1\uFE0F Moving Files to Trash...';\n  showProgressOverlay(actionTitle, totalFiles, () => {\n    operationCancelled = true;\n  });\n\n  // Delete each file sequentially with progress updates\n  let current = 0;\n  for (const path of selectedFiles) {\n    if (operationCancelled) {\n      break;\n    }\n\n    current++;\n    const fileName = path.split('/').pop();\n    updateProgressOverlay(current, totalFiles, `Processing: ${fileName}`);\n\n    try {\n      const response = await fetch(`/api/storage/delete?path=${encodeURIComponent(path)}&mode=${mode}`, {\n        method: 'DELETE'\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({ detail: 'Unknown error' }));\n        throw new Error(errorData.detail || `HTTP ${response.status}`);\n      }\n\n      const result = await response.json();\n\n      if (result.success) {\n        deleted++;\n      } else {\n        failed++;\n        failedPaths.push({ path, error: result.error || 'Unknown error' });\n        console.error(`Failed to ${mode === 'permanent' ? 'delete' : 'move to trash'} ${path}:`, result.error);\n      }\n    } catch (error) {\n      failed++;\n      failedPaths.push({ path, error: (error as Error).message });\n      console.error(`Error processing ${path}:`, error);\n    }\n  }\n\n  // Hide progress overlay\n  hideProgressOverlay();\n\n  // Re-enable buttons\n  if (trashBtn) trashBtn.disabled = false;\n  if (permanentBtn) permanentBtn.disabled = false;\n\n  // Clear selection\n  selectedFiles.clear();\n  updateSelectedCount();\n\n  // Show final results\n  const successVerb = mode === 'permanent' ? 'deleted' : 'moved to Trash';\n  const failedVerb = mode === 'permanent' ? 'delete' : 'move';\n\n  if (operationCancelled) {\n    showToast(`\u26A0\uFE0F Operation cancelled. Processed ${deleted + failed}/${totalFiles} items.`, 'warning', 4000);\n  } else if (deleted > 0 && failed === 0) {\n    showToast(`\u2705 Successfully ${successVerb} ${deleted} item(s)`, 'success', 4000);\n    if (mode === 'trash') {\n      showToast('\uD83D\uDCA1 Tip: You can recover files from macOS Trash', 'info', 3000);\n    }\n  } else if (deleted > 0 && failed > 0) {\n    showToast(`\u26A0\uFE0F ${successVerb.charAt(0).toUpperCase() + successVerb.slice(1)} ${deleted}, failed to ${failedVerb} ${failed} item(s)`, 'warning', 6000);\n    console.error('Failed operations:', failedPaths);\n  } else {\n    showToast(`\u274C Failed to ${failedVerb} all ${failed} item(s)`, 'error', 6000);\n    console.error('Failed operations:', failedPaths);\n  }\n\n  // Refresh storage view to verify actual filesystem state\n  showToast('Refreshing view...', 'info', 2000);\n  await analyzeStorage();\n}\n\n// ============================================================================\n// Path Navigation\n// ============================================================================\n\n/**\n * Update breadcrumbs navigation\n */\nexport function updateBreadcrumbs(path: string): void {\n  const breadcrumbsDiv = document.getElementById('breadcrumbs');\n  if (!breadcrumbsDiv) return;\n\n  const parts = path.split('/').filter(p => p);\n  if (parts.length === 0) {\n    breadcrumbsDiv.innerHTML = '<span class=\"breadcrumb\" onclick=\"setPath(\\'/\\')\">Root</span>';\n    return;\n  }\n\n  let html = '<span class=\"breadcrumb\" onclick=\"setPath(\\'/\\')\">\uD83C\uDFE0 Root</span>';\n  let currentPath = '';\n\n  parts.forEach((part, index) => {\n    currentPath += '/' + part;\n    const fullPath = currentPath;\n    html += ` <span class=\"breadcrumb-separator\">/</span> `;\n    html += `<span class=\"breadcrumb\" onclick=\"setPath('${fullPath}')\">${part}</span>`;\n  });\n\n  breadcrumbsDiv.innerHTML = html;\n}\n\n/**\n * Navigate to a specific path\n */\nexport function navigateToPath(path: string): void {\n  const pathInput = document.getElementById('path-input') as HTMLInputElement | null;\n  if (pathInput) {\n    pathInput.value = path;\n    updateBreadcrumbs(path);\n    showToast(`Path set to: ${path}`, 'info', 2000);\n  }\n}\n\n/**\n * Alias for navigateToPath (used by HTML onclick handlers)\n */\nexport function setPath(path: string): void {\n  navigateToPath(path);\n}\n\n/**\n * Get current username from stored system info\n */\nexport function getUsername(): string {\n  // Access global state from dashboard module\n  return (window as any)._currentUsername || 'username';\n}\n\n// ============================================================================\n// Category Breakdown Visualization\n// ============================================================================\n\n/** Category display configuration */\nconst CATEGORY_CONFIG: Record<string, { icon: string; color: string; label: string }> = {\n  images: { icon: '\uD83D\uDDBC\uFE0F', color: '#ff6961', label: 'Images' },\n  videos: { icon: '\uD83C\uDFAC', color: '#779ecb', label: 'Videos' },\n  audio: { icon: '\uD83C\uDFB5', color: '#77dd77', label: 'Audio' },\n  documents: { icon: '\uD83D\uDCC4', color: '#fdfd96', label: 'Documents' },\n  archives: { icon: '\uD83D\uDCE6', color: '#c5a3ff', label: 'Archives' },\n  code: { icon: '\uD83D\uDCBB', color: '#ffb347', label: 'Code' },\n};\n\n/**\n * Format bytes to human-readable string\n */\nfunction formatBytes(bytes: number): string {\n  if (bytes === 0) return '0 B';\n  const k = 1024;\n  const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n}\n\n/**\n * Render category breakdown as a visual bar chart\n */\nexport function renderCategoryBreakdown(\n  categorySizes: Record<string, number> | undefined,\n  totalBytes: number | undefined\n): string {\n  // Handle missing or empty data\n  if (!categorySizes || typeof categorySizes !== 'object') {\n    return '';\n  }\n\n  // Filter to categories with actual data\n  const entries = Object.entries(categorySizes)\n    .filter(([_, size]) => size > 0)\n    .sort((a, b) => b[1] - a[1]); // Sort by size descending\n\n  if (entries.length === 0) {\n    return '';\n  }\n\n  // Calculate total categorized bytes and \"other\" category\n  const categorizedTotal = entries.reduce((sum, [_, size]) => sum + size, 0);\n  const total = totalBytes || categorizedTotal;\n  const otherBytes = total > categorizedTotal ? total - categorizedTotal : 0;\n\n  // Find max for scaling bars (use largest category)\n  const maxSize = Math.max(...entries.map(([_, size]) => size), otherBytes);\n\n  // Build bar items\n  const bars = entries.map(([category, size]) => {\n    const config = CATEGORY_CONFIG[category] || { icon: '\uD83D\uDCC1', color: '#888', label: category };\n    const percentage = total > 0 ? (size / total * 100).toFixed(1) : '0';\n    const barWidth = maxSize > 0 ? (size / maxSize * 100) : 0;\n\n    return `\n      <div class=\"category-bar-item\">\n        <div class=\"category-bar-label\">\n          <span class=\"category-icon\">${config.icon}</span>\n          <span class=\"category-name\">${config.label}</span>\n          <span class=\"category-size\">${formatBytes(size)}</span>\n          <span class=\"category-percent\">${percentage}%</span>\n        </div>\n        <div class=\"category-bar-track\">\n          <div class=\"category-bar-fill\" style=\"width: ${barWidth}%; background: ${config.color};\"></div>\n        </div>\n      </div>\n    `;\n  }).join('');\n\n  // Add \"Other\" category if significant\n  let otherBar = '';\n  if (otherBytes > 0 && total > 0) {\n    const otherPercent = (otherBytes / total * 100).toFixed(1);\n    const otherWidth = maxSize > 0 ? (otherBytes / maxSize * 100) : 0;\n    otherBar = `\n      <div class=\"category-bar-item\">\n        <div class=\"category-bar-label\">\n          <span class=\"category-icon\">\uD83D\uDCC1</span>\n          <span class=\"category-name\">Other</span>\n          <span class=\"category-size\">${formatBytes(otherBytes)}</span>\n          <span class=\"category-percent\">${otherPercent}%</span>\n        </div>\n        <div class=\"category-bar-track\">\n          <div class=\"category-bar-fill\" style=\"width: ${otherWidth}%; background: #888;\"></div>\n        </div>\n      </div>\n    `;\n  }\n\n  return `\n    <div class=\"category-breakdown\">\n      <h3 style=\"margin-top: 2rem;\">\uD83D\uDCCA Storage by Category</h3>\n      <p style=\"color: var(--text-secondary); margin-top: 0.5rem; margin-bottom: 1rem;\">\n        Breakdown of ${formatBytes(categorizedTotal)} categorized across ${entries.length} file types\n      </p>\n      <div class=\"category-bars\">\n        ${bars}\n        ${otherBar}\n      </div>\n    </div>\n  `;\n}\n", "/**\n * Schedule module - Schedule management and automation\n */\n\nimport type { Schedule } from '../types';\nimport { showToast } from './ui';\nimport { escapeHtml } from './utils';\n\n// ============================================================================\n// Schedule Templates\n// ============================================================================\n\n/**\n * Load and display schedule templates\n */\nexport async function loadScheduleTemplates(): Promise<void> {\n  try {\n    console.log('Loading schedule templates...');\n    const response = await fetch('/api/schedules/templates');\n\n    if (!response.ok) {\n      throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n    }\n\n    const data = await response.json();\n    console.log('Templates loaded:', data);\n\n    const container = document.getElementById('templates-list');\n    if (!container) return;\n\n    if (!data.templates || data.templates.length === 0) {\n      container.innerHTML = '<p style=\"color: var(--text-secondary);\">No templates available</p>';\n      return;\n    }\n\n    container.innerHTML = data.templates.map((template: any) => {\n      const templateJson = JSON.stringify(template).replace(/'/g, \"\\\\'\");\n      return `\n        <div class=\"template-card ${template.recommended ? 'recommended' : ''}\"\n             onclick='applyScheduleTemplate(${templateJson})'>\n          <div class=\"template-icon\">${template.icon}</div>\n          <div class=\"template-name\">${escapeHtml(template.name)}</div>\n          <div class=\"template-desc\">${escapeHtml(template.description)}</div>\n          ${template.recommended ? '<span class=\"template-badge\">RECOMMENDED</span>' : ''}\n        </div>\n      `;\n    }).join('');\n  } catch (error) {\n    console.error('Failed to load templates:', error);\n    const container = document.getElementById('templates-list');\n    if (container) {\n      container.innerHTML = `<p style=\"color: var(--danger);\">Error loading templates: ${(error as Error).message}</p>`;\n    }\n    showToast('Failed to load templates: ' + (error as Error).message, 'error');\n  }\n}\n\n// ============================================================================\n// Schedule Management\n// ============================================================================\n\n/**\n * Load and display schedules\n */\nexport async function loadSchedules(): Promise<void> {\n  try {\n    console.log('[Schedule] Loading schedules...');\n    const response = await fetch('/api/schedules');\n    console.log('[Schedule] Schedules response status:', response.status);\n    const data = await response.json();\n    console.log('[Schedule] Schedules data:', data);\n\n    const container = document.getElementById('schedules-list');\n    console.log('[Schedule] Container found:', !!container);\n    if (!container) return;\n\n    if (!data.success || !data.schedules || data.schedules.length === 0) {\n      container.innerHTML = `\n        <div style=\"text-align: center; padding: 3rem; color: var(--text-secondary);\">\n          <div style=\"font-size: 3rem; margin-bottom: 1rem;\">\uD83D\uDCC5</div>\n          <p>No schedules yet</p>\n          <p style=\"font-size: 0.875rem;\">Click \"New Schedule\" or use a template to get started</p>\n        </div>\n      `;\n      return;\n    }\n\n    container.innerHTML = data.schedules.map((schedule: Schedule) => {\n      const nextRun = schedule.next_run ? formatDateTime(schedule.next_run) : 'Not scheduled';\n      const lastRun = schedule.last_run ? formatDateTime(schedule.last_run) : 'Never';\n      const statusClass = schedule.enabled ? 'enabled' : 'disabled';\n      const statusText = schedule.enabled ? '\u25CF Enabled' : '\u25CB Disabled';\n\n      return `\n        <div class=\"schedule-card ${schedule.enabled ? '' : 'disabled'}\">\n          <div class=\"schedule-header\">\n            <div>\n              <div class=\"schedule-title\">${escapeHtml(schedule.name)}</div>\n              ${schedule.description ? `<div class=\"schedule-desc\">${escapeHtml(schedule.description)}</div>` : ''}\n            </div>\n            <div class=\"schedule-actions\">\n              <button class=\"secondary\" onclick=\"openScheduleModal('${schedule.id}')\" title=\"Edit\">\n                \u270F\uFE0F\n              </button>\n              <button class=\"secondary\" onclick=\"toggleScheduleEnabled('${schedule.id}', ${!schedule.enabled})\"\n                      title=\"${schedule.enabled ? 'Disable' : 'Enable'}\">\n                ${schedule.enabled ? '\u23F8\uFE0F' : '\u25B6\uFE0F'}\n              </button>\n              <button class=\"warning\" onclick=\"runScheduleNow('${schedule.id}')\" title=\"Run now\">\n                \u25B6\uFE0F Run\n              </button>\n              <button class=\"danger\" onclick=\"deleteSchedule('${schedule.id}')\" title=\"Delete schedule\">\n                \uD83D\uDDD1\uFE0F Delete\n              </button>\n            </div>\n          </div>\n          <div class=\"schedule-info\">\n            <div class=\"schedule-info-item\">\n              <div class=\"schedule-info-label\">Status</div>\n              <div class=\"schedule-info-value\">\n                <span class=\"schedule-status ${statusClass}\">${statusText}</span>\n              </div>\n            </div>\n            <div class=\"schedule-info-item\">\n              <div class=\"schedule-info-label\">Frequency</div>\n              <div class=\"schedule-info-value\">${formatFrequency(schedule)}</div>\n            </div>\n            <div class=\"schedule-info-item\">\n              <div class=\"schedule-info-label\">Time</div>\n              <div class=\"schedule-info-value\">${schedule.time_of_day}</div>\n            </div>\n            <div class=\"schedule-info-item\">\n              <div class=\"schedule-info-label\">Next Run</div>\n              <div class=\"schedule-info-value\">\n                <span class=\"next-run-badge\">\u23F0 ${nextRun}</span>\n              </div>\n            </div>\n            <div class=\"schedule-info-item\">\n              <div class=\"schedule-info-label\">Last Run</div>\n              <div class=\"schedule-info-value\">${lastRun}</div>\n            </div>\n            <div class=\"schedule-info-item\">\n              <div class=\"schedule-info-label\">Operations</div>\n              <div class=\"schedule-info-value\">${(schedule as any).operations?.length ?? (schedule as any).operation_ids?.length ?? 0} selected</div>\n            </div>\n          </div>\n          ${schedule.message ? `\n            <div class=\"conflict-warning\">\n              <div class=\"conflict-warning-text\">\u26A0\uFE0F ${escapeHtml(schedule.message)}</div>\n            </div>\n          ` : ''}\n        </div>\n      `;\n    }).join('');\n  } catch (error) {\n    console.error('Failed to load schedules:', error);\n    showToast('Failed to load schedules', 'error');\n  }\n}\n\n/**\n * Save a schedule (create or update)\n */\nexport async function saveSchedule(): Promise<void> {\n  const scheduleIdEl = document.getElementById('schedule-id') as HTMLInputElement | null;\n  const scheduleId = scheduleIdEl?.value || '';\n  const nameEl = document.getElementById('schedule-name') as HTMLInputElement | null;\n  const name = nameEl?.value || '';\n  const descEl = document.getElementById('schedule-description') as HTMLTextAreaElement | null;\n  const description = descEl?.value || '';\n  const freqEl = document.getElementById('schedule-frequency') as HTMLSelectElement | null;\n  const frequency = freqEl?.value || '';\n  const timeEl = document.getElementById('schedule-time') as HTMLInputElement | null;\n  const time = timeEl?.value || '';\n  const enabledEl = document.getElementById('schedule-enabled') as HTMLInputElement | null;\n  const enabled = enabledEl?.checked || false;\n  const notifyEl = document.getElementById('schedule-notify') as HTMLInputElement | null;\n  const notify = notifyEl?.checked ?? true;\n  const wakeEl = document.getElementById('schedule-wake') as HTMLInputElement | null;\n  const wake_mac = wakeEl?.checked ?? false;\n\n  // Get selected operations\n  const operations = Array.from(document.querySelectorAll<HTMLInputElement>('input[name=\"operations\"]:checked'))\n    .map(cb => cb.value);\n\n  if (!name || operations.length === 0 || !time) {\n    showToast('Please fill in all required fields', 'error');\n    return;\n  }\n\n  const scheduleData: any = {\n    name,\n    description,\n    operations,\n    frequency,\n    time_of_day: time + ':00', // Add seconds\n    enabled,\n    notify,\n    wake_mac\n  };\n\n  // Add frequency-specific fields\n  if (frequency === 'weekly') {\n    const days = Array.from(document.querySelectorAll<HTMLInputElement>('input[name=\"days\"]:checked'))\n      .map(cb => cb.value);\n    if (days.length === 0) {\n      showToast('Please select at least one day of the week', 'error');\n      return;\n    }\n    scheduleData.days_of_week = days;\n  } else if (frequency === 'monthly') {\n    const dayEl = document.getElementById('schedule-day') as HTMLInputElement | null;\n    const day = parseInt(dayEl?.value || '0');\n    if (!day || day < 1 || day > 28) {\n      showToast('Please enter a day between 1 and 28', 'error');\n      return;\n    }\n    scheduleData.day_of_month = day;\n  }\n\n  try {\n    const url = scheduleId ? `/api/schedules/${scheduleId}` : '/api/schedules';\n    const method = scheduleId ? 'PUT' : 'POST';\n\n    const response = await fetch(url, {\n      method,\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(scheduleData)\n    });\n\n    const data = await response.json();\n\n    if (!response.ok || !data.success) {\n      throw new Error(data.error || 'Failed to save schedule');\n    }\n\n    showToast(scheduleId ? 'Schedule updated!' : 'Schedule created!', 'success');\n    closeScheduleModal();\n    loadSchedules();\n  } catch (error) {\n    console.error('Failed to save schedule:', error);\n    showToast((error as Error).message, 'error');\n  }\n}\n\n/**\n * Delete a schedule\n */\nexport async function deleteSchedule(scheduleId: string): Promise<void> {\n  if (!confirm('Delete this schedule? This will unregister it from launchd.')) {\n    return;\n  }\n\n  try {\n    const response = await fetch(`/api/schedules/${scheduleId}`, {\n      method: 'DELETE'\n    });\n\n    const data = await response.json();\n\n    if (!response.ok || !data.success) {\n      throw new Error(data.error || 'Failed to delete schedule');\n    }\n\n    showToast('Schedule deleted', 'success');\n    loadSchedules();\n  } catch (error) {\n    console.error('Failed to delete schedule:', error);\n    showToast((error as Error).message, 'error');\n  }\n}\n\n/**\n * Toggle schedule enabled state\n */\nexport async function toggleScheduleEnabled(scheduleId: string, enabled: boolean): Promise<void> {\n  try {\n    const response = await fetch(`/api/schedules/${scheduleId}/enabled`, {\n      method: 'PATCH',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ enabled })\n    });\n\n    const data = await response.json();\n\n    if (!response.ok || !data.success) {\n      throw new Error(data.error || 'Failed to toggle schedule');\n    }\n\n    showToast(enabled ? 'Schedule enabled' : 'Schedule disabled', 'success');\n    loadSchedules();\n  } catch (error) {\n    console.error('Failed to toggle schedule:', error);\n    showToast((error as Error).message, 'error');\n  }\n}\n\n/**\n * Run schedule immediately\n */\nexport async function runScheduleNow(scheduleId: string): Promise<void> {\n  if (!confirm('Run this schedule now? This will execute all operations immediately.')) {\n    return;\n  }\n\n  try {\n    const response = await fetch(`/api/schedules/${scheduleId}/run-now`, {\n      method: 'POST'\n    });\n\n    const data = await response.json();\n\n    if (!response.ok || !data.success) {\n      throw new Error(data.message || 'Failed to run schedule');\n    }\n\n    showToast('Schedule running...', 'success');\n    // Reload to show updated last_run\n    setTimeout(() => loadSchedules(), 2000);\n    setTimeout(() => loadSchedules(), 7000);\n  } catch (error) {\n    console.error('Failed to run schedule:', error);\n    showToast((error as Error).message, 'error');\n  }\n}\n\n// ============================================================================\n// Schedule Modal\n// ============================================================================\n\n/**\n * Open schedule modal for create/edit\n */\nexport function openScheduleModal(scheduleId: string | null = null): Promise<void> {\n  const modal = document.getElementById('schedule-modal');\n  const title = document.getElementById('schedule-modal-title');\n  const form = document.getElementById('schedule-form') as HTMLFormElement | null;\n\n  if (!modal || !title) return Promise.resolve();\n\n  if (form) form.reset();\n  const scheduleIdEl = document.getElementById('schedule-id') as HTMLInputElement | null;\n  if (scheduleIdEl) scheduleIdEl.value = scheduleId || '';\n  title.textContent = scheduleId ? 'Edit Schedule' : 'Create Schedule';\n\n  // Load operations into selector\n  loadOperationsForSchedule();\n\n  if (scheduleId) {\n    return loadScheduleForEdit(scheduleId);\n  }\n\n  modal.classList.add('active');\n  return Promise.resolve();\n}\n\n/**\n * Close schedule modal\n */\nexport function closeScheduleModal(): void {\n  const modal = document.getElementById('schedule-modal');\n  if (modal) {\n    modal.classList.remove('active');\n  }\n}\n\n/**\n * Load operations for schedule selector\n */\nasync function loadOperationsForSchedule(): Promise<void> {\n  try {\n    const response = await fetch('/api/maintenance/operations');\n    const data = await response.json();\n\n    const container = document.getElementById('schedule-operations');\n    if (!container) return;\n\n    container.innerHTML = data.operations.map((op: any) => `\n      <label class=\"operation-checkbox\">\n        <input type=\"checkbox\" name=\"operations\" value=\"${op.id}\">\n        <div class=\"operation-checkbox-label\">\n          <div class=\"operation-checkbox-name\">${escapeHtml(op.name)}</div>\n          <div class=\"operation-checkbox-desc\">${escapeHtml(op.description || '')}</div>\n        </div>\n      </label>\n    `).join('');\n  } catch (error) {\n    console.error('Failed to load operations:', error);\n  }\n}\n\n/**\n * Load schedule data for editing\n */\nasync function loadScheduleForEdit(scheduleId: string): Promise<void> {\n  try {\n    const response = await fetch(`/api/schedules/${scheduleId}`);\n    const data = await response.json();\n\n    if (!data.success) {\n      showToast('Schedule not found', 'error');\n      closeScheduleModal();\n      return;\n    }\n\n    const schedule: Schedule = data.schedule;\n\n    const nameEl = document.getElementById('schedule-name') as HTMLInputElement | null;\n    const descEl = document.getElementById('schedule-description') as HTMLTextAreaElement | null;\n    const freqEl = document.getElementById('schedule-frequency') as HTMLSelectElement | null;\n    const timeEl = document.getElementById('schedule-time') as HTMLInputElement | null;\n    const enabledEl = document.getElementById('schedule-enabled') as HTMLInputElement | null;\n    const notifyEl = document.getElementById('schedule-notify') as HTMLInputElement | null;\n    const wakeEl = document.getElementById('schedule-wake') as HTMLInputElement | null;\n\n    if (nameEl) nameEl.value = schedule.name || '';\n    if (descEl) descEl.value = schedule.description || '';\n    if (freqEl && schedule.frequency) freqEl.value = schedule.frequency;\n    if (timeEl && schedule.time_of_day) timeEl.value = schedule.time_of_day.substring(0, 5); // HH:MM\n    if (enabledEl) enabledEl.checked = schedule.enabled;\n    if (notifyEl) notifyEl.checked = (schedule as any).notify ?? true;\n    if (wakeEl) wakeEl.checked = (schedule as any).wake_mac ?? false;\n\n    // Check selected operations\n    (schedule.operations || []).forEach((opId: string) => {\n      const checkbox = document.querySelector<HTMLInputElement>(`input[name=\"operations\"][value=\"${opId}\"]`);\n      if (checkbox) checkbox.checked = true;\n    });\n\n    // Set frequency-specific fields\n    updateFrequencyOptions();\n\n    if (schedule.frequency === 'weekly' && schedule.days_of_week) {\n      schedule.days_of_week.forEach(day => {\n        const checkbox = document.querySelector<HTMLInputElement>(`input[name=\"days\"][value=\"${day}\"]`);\n        if (checkbox) checkbox.checked = true;\n      });\n    }\n\n    if (schedule.frequency === 'monthly' && schedule.day_of_month) {\n      const dayEl = document.getElementById('schedule-day') as HTMLInputElement | null;\n      if (dayEl) dayEl.value = String(schedule.day_of_month);\n    }\n\n    const modal = document.getElementById('schedule-modal');\n    if (modal) modal.classList.add('active');\n  } catch (error) {\n    console.error('Failed to load schedule:', error);\n    showToast('Failed to load schedule', 'error');\n  }\n}\n\n/**\n * Update frequency-specific form options\n */\nexport function updateFrequencyOptions(): void {\n  const freqEl = document.getElementById('schedule-frequency') as HTMLSelectElement | null;\n  const frequency = freqEl?.value || '';\n  const daysSelector = document.getElementById('days-selector');\n  const daySelector = document.getElementById('day-selector');\n\n  if (daysSelector) {\n    daysSelector.style.display = frequency === 'weekly' ? 'block' : 'none';\n  }\n  if (daySelector) {\n    daySelector.style.display = frequency === 'monthly' ? 'block' : 'none';\n  }\n}\n\n/**\n * Apply template to schedule modal\n */\nexport function applyScheduleTemplate(template: any): void {\n  openScheduleModal();\n\n  // Wait for modal to open and operations to load\n  setTimeout(() => {\n    const nameEl = document.getElementById('schedule-name') as HTMLInputElement | null;\n    const descEl = document.getElementById('schedule-description') as HTMLTextAreaElement | null;\n    const freqEl = document.getElementById('schedule-frequency') as HTMLSelectElement | null;\n    const timeEl = document.getElementById('schedule-time') as HTMLInputElement | null;\n\n    if (nameEl) nameEl.value = template.name;\n    if (descEl) descEl.value = template.description;\n    if (freqEl) freqEl.value = template.frequency;\n    if (timeEl) timeEl.value = template.time_of_day.substring(0, 5);\n\n    // Check operations\n    template.operations.forEach((opId: string) => {\n      const checkbox = document.querySelector<HTMLInputElement>(`input[name=\"operations\"][value=\"${opId}\"]`);\n      if (checkbox) checkbox.checked = true;\n    });\n\n    // Set frequency options\n    updateFrequencyOptions();\n\n    if (template.days_of_week) {\n      template.days_of_week.forEach((day: string) => {\n        const checkbox = document.querySelector<HTMLInputElement>(`input[name=\"days\"][value=\"${day}\"]`);\n        if (checkbox) checkbox.checked = true;\n      });\n    }\n\n    if (template.day_of_month) {\n      const dayEl = document.getElementById('schedule-day') as HTMLInputElement | null;\n      if (dayEl) dayEl.value = template.day_of_month;\n    }\n  }, 100);\n}\n\n/**\n * Called when Schedule tab is shown\n */\nlet scheduleRefreshTimer: number | null = null;\n\nexport function onScheduleTabShow(): void {\n  console.log('[Schedule] Tab shown, loading data...');\n  loadScheduleTemplates();\n  loadSchedules();\n\n  // Keep schedule status (last_run/next_run) fresh while user is on the tab.\n  if (scheduleRefreshTimer) {\n    window.clearInterval(scheduleRefreshTimer);\n  }\n  scheduleRefreshTimer = window.setInterval(() => {\n    const tab = document.getElementById('schedule');\n    if (tab && tab.classList.contains('active')) {\n      loadSchedules();\n    }\n  }, 10000);\n}\n\n// ============================================================================\n// Helper Functions\n// ============================================================================\n\n/**\n * Format schedule frequency\n */\nfunction formatFrequency(schedule: Schedule): string {\n  if (schedule.frequency === 'daily') {\n    return 'Daily';\n  } else if (schedule.frequency === 'weekly') {\n    const days = schedule.days_of_week?.map(d => d.substring(0, 3).toUpperCase()).join(', ');\n    return `Weekly (${days || 'No days'})`;\n  } else if (schedule.frequency === 'monthly') {\n    return `Monthly (Day ${schedule.day_of_month})`;\n  }\n  return schedule.frequency || 'Unknown';\n}\n\n/**\n * Format date/time for display\n */\nfunction formatDateTime(isoString: string): string {\n  try {\n    const date = new Date(isoString);\n    const now = new Date();\n    const diffMs = date.getTime() - now.getTime();\n    const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\n    const diffHours = Math.floor(diffMs / (1000 * 60 * 60));\n\n    if (diffMs < 0) {\n      return date.toLocaleString();\n    } else if (diffDays === 0 && diffHours < 24) {\n      return `in ${diffHours}h`;\n    } else if (diffDays < 7) {\n      return `in ${diffDays}d`;\n    } else {\n      return date.toLocaleDateString();\n    }\n  } catch (e) {\n    return isoString;\n  }\n}\n", "import { showToast } from \"./ui.js\";\n\ninterface AppInfo {\n    name: string;\n    path: string;\n    bundle_id: string;\n    version: string;\n    size_bytes: number;\n    size_display: string;\n    icon: string;\n}\n\ninterface UninstallResult {\n    success: boolean;\n    app: string;\n    dry_run: boolean;\n    deleted_paths: string[];\n    bytes_recovered: number;\n}\n\nexport class AppUninstaller {\n    private container: HTMLElement;\n    private searchInput: HTMLInputElement;\n    private appList: HTMLElement;\n    private apps: AppInfo[] = [];\n\n    constructor(containerId: string) {\n        const el = document.getElementById(containerId);\n        if (!el) throw new Error(`Container ${containerId} not found`);\n        this.container = el;\n        \n        // Build UI structure\n        this.container.innerHTML = `\n            <div class=\"app-uninstaller\">\n                <div class=\"search-bar\">\n                    <input type=\"text\" id=\"app-search\" placeholder=\"Search installed applications...\" />\n                    <button id=\"refresh-apps\" class=\"secondary\">Refresh</button>\n                </div>\n                <div class=\"app-list-header\">\n                    <span>Name</span>\n                    <span>Size</span>\n                    <span>Action</span>\n                </div>\n                <div id=\"app-list-content\" class=\"app-list-content\">\n                    <div class=\"loading\">Loading apps...</div>\n                </div>\n            </div>\n        `;\n        \n        this.searchInput = this.container.querySelector(\"#app-search\") as HTMLInputElement;\n        this.appList = this.container.querySelector(\"#app-list-content\") as HTMLElement;\n        \n        this.searchInput.addEventListener(\"input\", () => this.filterApps());\n        this.container.querySelector(\"#refresh-apps\")?.addEventListener(\"click\", () => this.loadApps());\n        \n        this.loadApps();\n    }\n\n    async loadApps() {\n        this.appList.innerHTML = '<div class=\"loading\">Scanning applications...</div>';\n        try {\n            const response = await fetch(\"/api/apps\");\n            if (!response.ok) throw new Error(\"Failed to load apps\");\n            \n            const data = await response.json();\n            if (data.success) {\n                this.apps = data.apps;\n                this.renderApps(this.apps);\n            } else {\n                this.appList.innerHTML = `<div class=\"error\">${data.error || \"Unknown error\"}</div>`;\n            }\n        } catch (e) {\n            this.appList.innerHTML = `<div class=\"error\">Error loading apps: ${e}</div>`;\n        }\n    }\n\n    filterApps() {\n        const query = this.searchInput.value.toLowerCase();\n        const filtered = this.apps.filter(app => \n            app.name.toLowerCase().includes(query) || \n            app.bundle_id.toLowerCase().includes(query)\n        );\n        this.renderApps(filtered);\n    }\n\n    renderApps(apps: AppInfo[]) {\n        if (apps.length === 0) {\n            this.appList.innerHTML = '<div class=\"empty\">No applications found</div>';\n            return;\n        }\n\n        this.appList.innerHTML = \"\";\n        \n        apps.forEach(app => {\n            const row = document.createElement(\"div\");\n            row.className = \"app-row\";\n            row.innerHTML = `\n                <div class=\"app-name\">\n                    <div class=\"name\">${app.name}</div>\n                    <div class=\"sub\">${app.version} \u2022 ${app.path}</div>\n                </div>\n                <div class=\"app-size\">${app.size_display}</div>\n                <div class=\"app-actions\">\n                    <button class=\"danger\" data-app=\"${app.name}\">Uninstall</button>\n                </div>\n            `;\n            \n            row.querySelector(\"button\")?.addEventListener(\"click\", () => this.confirmUninstall(app));\n            this.appList.appendChild(row);\n        });\n    }\n\n    async confirmUninstall(app: AppInfo) {\n        if (!confirm(`Are you sure you want to uninstall ${app.name}? This will move the app and its data to Trash.`)) {\n            return;\n        }\n        \n        try {\n            const btn = this.appList.querySelector(`button[data-app=\"${app.name}\"]`) as HTMLButtonElement;\n            if (btn) {\n                btn.disabled = true;\n                btn.textContent = \"Uninstalling...\";\n            }\n\n            const response = await fetch(`/api/apps/${encodeURIComponent(app.name)}/uninstall?dry_run=false`, {\n                method: \"POST\"\n            });\n            \n            if (!response.ok) throw new Error(\"Uninstall failed\");\n            \n            const result: UninstallResult = await response.json();\n            if (result.success) {\n                showToast(`Uninstalled ${app.name}. recovered ${this.formatBytes(result.bytes_recovered)}`, \"success\");\n                // Remove from list\n                this.apps = this.apps.filter(a => a.name !== app.name);\n                this.renderApps(this.apps);\n            } else {\n                showToast(`Failed to uninstall ${app.name}`, \"error\");\n                if (btn) {\n                    btn.disabled = false;\n                    btn.textContent = \"Uninstall\";\n                }\n            }\n        } catch (e) {\n            showToast(`Error: ${e}`, \"error\");\n            // Reload to reset state\n            this.loadApps();\n        }\n    }\n\n    formatBytes(bytes: number): string {\n        if (bytes === 0) return \"0 B\";\n        const k = 1024;\n        const sizes = [\"B\", \"KB\", \"MB\", \"GB\", \"TB\"];\n        const i = Math.floor(Math.log(bytes) / Math.log(k));\n        return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + \" \" + sizes[i];\n    }\n}\n", "export class InternMap extends Map {\n  constructor(entries, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (entries != null) for (const [key, value] of entries) this.set(key, value);\n  }\n  get(key) {\n    return super.get(intern_get(this, key));\n  }\n  has(key) {\n    return super.has(intern_get(this, key));\n  }\n  set(key, value) {\n    return super.set(intern_set(this, key), value);\n  }\n  delete(key) {\n    return super.delete(intern_delete(this, key));\n  }\n}\n\nexport class InternSet extends Set {\n  constructor(values, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (values != null) for (const value of values) this.add(value);\n  }\n  has(value) {\n    return super.has(intern_get(this, value));\n  }\n  add(value) {\n    return super.add(intern_set(this, value));\n  }\n  delete(value) {\n    return super.delete(intern_delete(this, value));\n  }\n}\n\nfunction intern_get({_intern, _key}, value) {\n  const key = _key(value);\n  return _intern.has(key) ? _intern.get(key) : value;\n}\n\nfunction intern_set({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) return _intern.get(key);\n  _intern.set(key, value);\n  return value;\n}\n\nfunction intern_delete({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) {\n    value = _intern.get(key);\n    _intern.delete(key);\n  }\n  return value;\n}\n\nfunction keyof(value) {\n  return value !== null && typeof value === \"object\" ? value.valueOf() : value;\n}\n", "var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n", "export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n", "import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n", "import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n", "function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n", "import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n", "// Given something array like (or null), returns something that is strictly an\n// array. This is used to ensure that array-like objects passed to d3.selectAll\n// or selection.selectAll are converted into proper arrays when creating a\n// selection; we don\u2019t ever want to create a selection backed by a live\n// HTMLCollection or NodeList. However, note that selection.selectAll will use a\n// static NodeList as a group, since it safely derived from querySelectorAll.\nexport default function array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}\n", "function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n", "import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    return array(select.apply(this, arguments));\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n", "export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n", "import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n", "import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return Array.from(this.children);\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n", "import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n", "export default function(update) {\n  return new Array(update.length);\n}\n", "import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n", "export default function(x) {\n  return function() {\n    return x;\n  };\n}\n", "import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that don\u2019t fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = arraylike(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n\n// Given some data, this returns an array-like view of it: an object that\n// exposes a length property and allows numeric indexing. Note that unlike\n// selectAll, this isn\u2019t worried about \u201Clive\u201D collections because the resulting\n// array will only be used briefly while data is being bound. (It is possible to\n// cause the data to change while iterating by using a key function, but please\n// don\u2019t; we\u2019d rather avoid a gratuitous copy.)\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data\n    ? data // Array, TypedArray, NodeList, array-like\n    : Array.from(data); // Map, Set, iterable, string, or anything else\n}\n", "import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n", "export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter) enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update) update = update.selection();\n  }\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n", "import {Selection} from \"./index.js\";\n\nexport default function(context) {\n  var selection = context.selection ? context.selection() : context;\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n", "export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n", "import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n", "export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n", "export default function() {\n  return Array.from(this);\n}\n", "export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n", "export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n", "export default function() {\n  return !this.node();\n}\n", "export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n", "import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n", "export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n", "import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n", "function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n", "function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n", "function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n", "function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n", "function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n", "function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n", "import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n", "import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n", "function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n", "function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n", "export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n", "function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n", "import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n", "export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n", "import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n", "import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n", "export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n", "import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n", "export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n", "import {basis} from \"./basis.js\";\n\nexport default function(values) {\n  var n = values.length;\n  return function(t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n", "export default x => () => x;\n", "import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n", "import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n", "export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n", "import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n", "var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n", "import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n", "import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n", "var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend we\u2019ve set an alarm, if we haven\u2019t already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n", "import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n", "import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n", "import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n", "import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n", "import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we\u2019re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we\u2019re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n", "import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n", "import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n", "import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n", "import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n", "import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n", "import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n", "import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n", "import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n", "import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n", "import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we\u2019re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n", "function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n", "import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n", "import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n", "import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n", "import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we\u2019re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n", "function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n", "import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n", "function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n", "import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n", "import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and we\u2019re done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n", "import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  selectChild: selection_prototype.selectChild,\n  selectChildren: selection_prototype.selectChildren,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n", "export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n", "import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n", "import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n", "import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolate} from \"d3-interpolate\";\nimport {pointer, select} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport BrushEvent from \"./event.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\nvar MODE_DRAG = {name: \"drag\"},\n    MODE_SPACE = {name: \"space\"},\n    MODE_HANDLE = {name: \"handle\"},\n    MODE_CENTER = {name: \"center\"};\n\nconst {abs, max, min} = Math;\n\nfunction number1(e) {\n  return [+e[0], +e[1]];\n}\n\nfunction number2(e) {\n  return [number1(e[0]), number1(e[1])];\n}\n\nvar X = {\n  name: \"x\",\n  handles: [\"w\", \"e\"].map(type),\n  input: function(x, e) { return x == null ? null : [[+x[0], e[0][1]], [+x[1], e[1][1]]]; },\n  output: function(xy) { return xy && [xy[0][0], xy[1][0]]; }\n};\n\nvar Y = {\n  name: \"y\",\n  handles: [\"n\", \"s\"].map(type),\n  input: function(y, e) { return y == null ? null : [[e[0][0], +y[0]], [e[1][0], +y[1]]]; },\n  output: function(xy) { return xy && [xy[0][1], xy[1][1]]; }\n};\n\nvar XY = {\n  name: \"xy\",\n  handles: [\"n\", \"w\", \"e\", \"s\", \"nw\", \"ne\", \"sw\", \"se\"].map(type),\n  input: function(xy) { return xy == null ? null : number2(xy); },\n  output: function(xy) { return xy; }\n};\n\nvar cursors = {\n  overlay: \"crosshair\",\n  selection: \"move\",\n  n: \"ns-resize\",\n  e: \"ew-resize\",\n  s: \"ns-resize\",\n  w: \"ew-resize\",\n  nw: \"nwse-resize\",\n  ne: \"nesw-resize\",\n  se: \"nwse-resize\",\n  sw: \"nesw-resize\"\n};\n\nvar flipX = {\n  e: \"w\",\n  w: \"e\",\n  nw: \"ne\",\n  ne: \"nw\",\n  se: \"sw\",\n  sw: \"se\"\n};\n\nvar flipY = {\n  n: \"s\",\n  s: \"n\",\n  nw: \"sw\",\n  ne: \"se\",\n  se: \"ne\",\n  sw: \"nw\"\n};\n\nvar signsX = {\n  overlay: +1,\n  selection: +1,\n  n: null,\n  e: +1,\n  s: null,\n  w: -1,\n  nw: -1,\n  ne: +1,\n  se: +1,\n  sw: -1\n};\n\nvar signsY = {\n  overlay: +1,\n  selection: +1,\n  n: -1,\n  e: null,\n  s: +1,\n  w: null,\n  nw: -1,\n  ne: -1,\n  se: +1,\n  sw: +1\n};\n\nfunction type(t) {\n  return {type: t};\n}\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultExtent() {\n  var svg = this.ownerSVGElement || this;\n  if (svg.hasAttribute(\"viewBox\")) {\n    svg = svg.viewBox.baseVal;\n    return [[svg.x, svg.y], [svg.x + svg.width, svg.y + svg.height]];\n  }\n  return [[0, 0], [svg.width.baseVal.value, svg.height.baseVal.value]];\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\n// Like d3.local, but with the name \u201C__brush\u201D rather than auto-generated.\nfunction local(node) {\n  while (!node.__brush) if (!(node = node.parentNode)) return;\n  return node.__brush;\n}\n\nfunction empty(extent) {\n  return extent[0][0] === extent[1][0]\n      || extent[0][1] === extent[1][1];\n}\n\nexport function brushSelection(node) {\n  var state = node.__brush;\n  return state ? state.dim.output(state.selection) : null;\n}\n\nexport function brushX() {\n  return brush(X);\n}\n\nexport function brushY() {\n  return brush(Y);\n}\n\nexport default function() {\n  return brush(XY);\n}\n\nfunction brush(dim) {\n  var extent = defaultExtent,\n      filter = defaultFilter,\n      touchable = defaultTouchable,\n      keys = true,\n      listeners = dispatch(\"start\", \"brush\", \"end\"),\n      handleSize = 6,\n      touchending;\n\n  function brush(group) {\n    var overlay = group\n        .property(\"__brush\", initialize)\n      .selectAll(\".overlay\")\n      .data([type(\"overlay\")]);\n\n    overlay.enter().append(\"rect\")\n        .attr(\"class\", \"overlay\")\n        .attr(\"pointer-events\", \"all\")\n        .attr(\"cursor\", cursors.overlay)\n      .merge(overlay)\n        .each(function() {\n          var extent = local(this).extent;\n          select(this)\n              .attr(\"x\", extent[0][0])\n              .attr(\"y\", extent[0][1])\n              .attr(\"width\", extent[1][0] - extent[0][0])\n              .attr(\"height\", extent[1][1] - extent[0][1]);\n        });\n\n    group.selectAll(\".selection\")\n      .data([type(\"selection\")])\n      .enter().append(\"rect\")\n        .attr(\"class\", \"selection\")\n        .attr(\"cursor\", cursors.selection)\n        .attr(\"fill\", \"#777\")\n        .attr(\"fill-opacity\", 0.3)\n        .attr(\"stroke\", \"#fff\")\n        .attr(\"shape-rendering\", \"crispEdges\");\n\n    var handle = group.selectAll(\".handle\")\n      .data(dim.handles, function(d) { return d.type; });\n\n    handle.exit().remove();\n\n    handle.enter().append(\"rect\")\n        .attr(\"class\", function(d) { return \"handle handle--\" + d.type; })\n        .attr(\"cursor\", function(d) { return cursors[d.type]; });\n\n    group\n        .each(redraw)\n        .attr(\"fill\", \"none\")\n        .attr(\"pointer-events\", \"all\")\n        .on(\"mousedown.brush\", started)\n      .filter(touchable)\n        .on(\"touchstart.brush\", started)\n        .on(\"touchmove.brush\", touchmoved)\n        .on(\"touchend.brush touchcancel.brush\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  brush.move = function(group, selection, event) {\n    if (group.tween) {\n      group\n          .on(\"start.brush\", function(event) { emitter(this, arguments).beforestart().start(event); })\n          .on(\"interrupt.brush end.brush\", function(event) { emitter(this, arguments).end(event); })\n          .tween(\"brush\", function() {\n            var that = this,\n                state = that.__brush,\n                emit = emitter(that, arguments),\n                selection0 = state.selection,\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(this, arguments) : selection, state.extent),\n                i = interpolate(selection0, selection1);\n\n            function tween(t) {\n              state.selection = t === 1 && selection1 === null ? null : i(t);\n              redraw.call(that);\n              emit.brush();\n            }\n\n            return selection0 !== null && selection1 !== null ? tween : tween(1);\n          });\n    } else {\n      group\n          .each(function() {\n            var that = this,\n                args = arguments,\n                state = that.__brush,\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(that, args) : selection, state.extent),\n                emit = emitter(that, args).beforestart();\n\n            interrupt(that);\n            state.selection = selection1 === null ? null : selection1;\n            redraw.call(that);\n            emit.start(event).brush(event).end(event);\n          });\n    }\n  };\n\n  brush.clear = function(group, event) {\n    brush.move(group, null, event);\n  };\n\n  function redraw() {\n    var group = select(this),\n        selection = local(this).selection;\n\n    if (selection) {\n      group.selectAll(\".selection\")\n          .style(\"display\", null)\n          .attr(\"x\", selection[0][0])\n          .attr(\"y\", selection[0][1])\n          .attr(\"width\", selection[1][0] - selection[0][0])\n          .attr(\"height\", selection[1][1] - selection[0][1]);\n\n      group.selectAll(\".handle\")\n          .style(\"display\", null)\n          .attr(\"x\", function(d) { return d.type[d.type.length - 1] === \"e\" ? selection[1][0] - handleSize / 2 : selection[0][0] - handleSize / 2; })\n          .attr(\"y\", function(d) { return d.type[0] === \"s\" ? selection[1][1] - handleSize / 2 : selection[0][1] - handleSize / 2; })\n          .attr(\"width\", function(d) { return d.type === \"n\" || d.type === \"s\" ? selection[1][0] - selection[0][0] + handleSize : handleSize; })\n          .attr(\"height\", function(d) { return d.type === \"e\" || d.type === \"w\" ? selection[1][1] - selection[0][1] + handleSize : handleSize; });\n    }\n\n    else {\n      group.selectAll(\".selection,.handle\")\n          .style(\"display\", \"none\")\n          .attr(\"x\", null)\n          .attr(\"y\", null)\n          .attr(\"width\", null)\n          .attr(\"height\", null);\n    }\n  }\n\n  function emitter(that, args, clean) {\n    var emit = that.__brush.emitter;\n    return emit && (!clean || !emit.clean) ? emit : new Emitter(that, args, clean);\n  }\n\n  function Emitter(that, args, clean) {\n    this.that = that;\n    this.args = args;\n    this.state = that.__brush;\n    this.active = 0;\n    this.clean = clean;\n  }\n\n  Emitter.prototype = {\n    beforestart: function() {\n      if (++this.active === 1) this.state.emitter = this, this.starting = true;\n      return this;\n    },\n    start: function(event, mode) {\n      if (this.starting) this.starting = false, this.emit(\"start\", event, mode);\n      else this.emit(\"brush\", event);\n      return this;\n    },\n    brush: function(event, mode) {\n      this.emit(\"brush\", event, mode);\n      return this;\n    },\n    end: function(event, mode) {\n      if (--this.active === 0) delete this.state.emitter, this.emit(\"end\", event, mode);\n      return this;\n    },\n    emit: function(type, event, mode) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new BrushEvent(type, {\n          sourceEvent: event,\n          target: brush,\n          selection: dim.output(this.state.selection),\n          mode,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function started(event) {\n    if (touchending && !event.touches) return;\n    if (!filter.apply(this, arguments)) return;\n\n    var that = this,\n        type = event.target.__data__.type,\n        mode = (keys && event.metaKey ? type = \"overlay\" : type) === \"selection\" ? MODE_DRAG : (keys && event.altKey ? MODE_CENTER : MODE_HANDLE),\n        signX = dim === Y ? null : signsX[type],\n        signY = dim === X ? null : signsY[type],\n        state = local(that),\n        extent = state.extent,\n        selection = state.selection,\n        W = extent[0][0], w0, w1,\n        N = extent[0][1], n0, n1,\n        E = extent[1][0], e0, e1,\n        S = extent[1][1], s0, s1,\n        dx = 0,\n        dy = 0,\n        moving,\n        shifting = signX && signY && keys && event.shiftKey,\n        lockX,\n        lockY,\n        points = Array.from(event.touches || [event], t => {\n          const i = t.identifier;\n          t = pointer(t, that);\n          t.point0 = t.slice();\n          t.identifier = i;\n          return t;\n        });\n\n    interrupt(that);\n    var emit = emitter(that, arguments, true).beforestart();\n\n    if (type === \"overlay\") {\n      if (selection) moving = true;\n      const pts = [points[0], points[1] || points[0]];\n      state.selection = selection = [[\n          w0 = dim === Y ? W : min(pts[0][0], pts[1][0]),\n          n0 = dim === X ? N : min(pts[0][1], pts[1][1])\n        ], [\n          e0 = dim === Y ? E : max(pts[0][0], pts[1][0]),\n          s0 = dim === X ? S : max(pts[0][1], pts[1][1])\n        ]];\n      if (points.length > 1) move(event);\n    } else {\n      w0 = selection[0][0];\n      n0 = selection[0][1];\n      e0 = selection[1][0];\n      s0 = selection[1][1];\n    }\n\n    w1 = w0;\n    n1 = n0;\n    e1 = e0;\n    s1 = s0;\n\n    var group = select(that)\n        .attr(\"pointer-events\", \"none\");\n\n    var overlay = group.selectAll(\".overlay\")\n        .attr(\"cursor\", cursors[type]);\n\n    if (event.touches) {\n      emit.moved = moved;\n      emit.ended = ended;\n    } else {\n      var view = select(event.view)\n          .on(\"mousemove.brush\", moved, true)\n          .on(\"mouseup.brush\", ended, true);\n      if (keys) view\n          .on(\"keydown.brush\", keydowned, true)\n          .on(\"keyup.brush\", keyupped, true)\n\n      dragDisable(event.view);\n    }\n\n    redraw.call(that);\n    emit.start(event, mode.name);\n\n    function moved(event) {\n      for (const p of event.changedTouches || [event]) {\n        for (const d of points)\n          if (d.identifier === p.identifier) d.cur = pointer(p, that);\n      }\n      if (shifting && !lockX && !lockY && points.length === 1) {\n        const point = points[0];\n        if (abs(point.cur[0] - point[0]) > abs(point.cur[1] - point[1]))\n          lockY = true;\n        else\n          lockX = true;\n      }\n      for (const point of points)\n        if (point.cur) point[0] = point.cur[0], point[1] = point.cur[1];\n      moving = true;\n      noevent(event);\n      move(event);\n    }\n\n    function move(event) {\n      const point = points[0], point0 = point.point0;\n      var t;\n\n      dx = point[0] - point0[0];\n      dy = point[1] - point0[1];\n\n      switch (mode) {\n        case MODE_SPACE:\n        case MODE_DRAG: {\n          if (signX) dx = max(W - w0, min(E - e0, dx)), w1 = w0 + dx, e1 = e0 + dx;\n          if (signY) dy = max(N - n0, min(S - s0, dy)), n1 = n0 + dy, s1 = s0 + dy;\n          break;\n        }\n        case MODE_HANDLE: {\n          if (points[1]) {\n            if (signX) w1 = max(W, min(E, points[0][0])), e1 = max(W, min(E, points[1][0])), signX = 1;\n            if (signY) n1 = max(N, min(S, points[0][1])), s1 = max(N, min(S, points[1][1])), signY = 1;\n          } else {\n            if (signX < 0) dx = max(W - w0, min(E - w0, dx)), w1 = w0 + dx, e1 = e0;\n            else if (signX > 0) dx = max(W - e0, min(E - e0, dx)), w1 = w0, e1 = e0 + dx;\n            if (signY < 0) dy = max(N - n0, min(S - n0, dy)), n1 = n0 + dy, s1 = s0;\n            else if (signY > 0) dy = max(N - s0, min(S - s0, dy)), n1 = n0, s1 = s0 + dy;\n          }\n          break;\n        }\n        case MODE_CENTER: {\n          if (signX) w1 = max(W, min(E, w0 - dx * signX)), e1 = max(W, min(E, e0 + dx * signX));\n          if (signY) n1 = max(N, min(S, n0 - dy * signY)), s1 = max(N, min(S, s0 + dy * signY));\n          break;\n        }\n      }\n\n      if (e1 < w1) {\n        signX *= -1;\n        t = w0, w0 = e0, e0 = t;\n        t = w1, w1 = e1, e1 = t;\n        if (type in flipX) overlay.attr(\"cursor\", cursors[type = flipX[type]]);\n      }\n\n      if (s1 < n1) {\n        signY *= -1;\n        t = n0, n0 = s0, s0 = t;\n        t = n1, n1 = s1, s1 = t;\n        if (type in flipY) overlay.attr(\"cursor\", cursors[type = flipY[type]]);\n      }\n\n      if (state.selection) selection = state.selection; // May be set by brush.move!\n      if (lockX) w1 = selection[0][0], e1 = selection[1][0];\n      if (lockY) n1 = selection[0][1], s1 = selection[1][1];\n\n      if (selection[0][0] !== w1\n          || selection[0][1] !== n1\n          || selection[1][0] !== e1\n          || selection[1][1] !== s1) {\n        state.selection = [[w1, n1], [e1, s1]];\n        redraw.call(that);\n        emit.brush(event, mode.name);\n      }\n    }\n\n    function ended(event) {\n      nopropagation(event);\n      if (event.touches) {\n        if (event.touches.length) return;\n        if (touchending) clearTimeout(touchending);\n        touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n      } else {\n        dragEnable(event.view, moving);\n        view.on(\"keydown.brush keyup.brush mousemove.brush mouseup.brush\", null);\n      }\n      group.attr(\"pointer-events\", \"all\");\n      overlay.attr(\"cursor\", cursors.overlay);\n      if (state.selection) selection = state.selection; // May be set by brush.move (on start)!\n      if (empty(selection)) state.selection = null, redraw.call(that);\n      emit.end(event, mode.name);\n    }\n\n    function keydowned(event) {\n      switch (event.keyCode) {\n        case 16: { // SHIFT\n          shifting = signX && signY;\n          break;\n        }\n        case 18: { // ALT\n          if (mode === MODE_HANDLE) {\n            if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n            if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n            mode = MODE_CENTER;\n            move(event);\n          }\n          break;\n        }\n        case 32: { // SPACE; takes priority over ALT\n          if (mode === MODE_HANDLE || mode === MODE_CENTER) {\n            if (signX < 0) e0 = e1 - dx; else if (signX > 0) w0 = w1 - dx;\n            if (signY < 0) s0 = s1 - dy; else if (signY > 0) n0 = n1 - dy;\n            mode = MODE_SPACE;\n            overlay.attr(\"cursor\", cursors.selection);\n            move(event);\n          }\n          break;\n        }\n        default: return;\n      }\n      noevent(event);\n    }\n\n    function keyupped(event) {\n      switch (event.keyCode) {\n        case 16: { // SHIFT\n          if (shifting) {\n            lockX = lockY = shifting = false;\n            move(event);\n          }\n          break;\n        }\n        case 18: { // ALT\n          if (mode === MODE_CENTER) {\n            if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\n            if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\n            mode = MODE_HANDLE;\n            move(event);\n          }\n          break;\n        }\n        case 32: { // SPACE\n          if (mode === MODE_SPACE) {\n            if (event.altKey) {\n              if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n              if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n              mode = MODE_CENTER;\n            } else {\n              if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\n              if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\n              mode = MODE_HANDLE;\n            }\n            overlay.attr(\"cursor\", cursors[type]);\n            move(event);\n          }\n          break;\n        }\n        default: return;\n      }\n      noevent(event);\n    }\n  }\n\n  function touchmoved(event) {\n    emitter(this, arguments).moved(event);\n  }\n\n  function touchended(event) {\n    emitter(this, arguments).ended(event);\n  }\n\n  function initialize() {\n    var state = this.__brush || {selection: null};\n    state.extent = number2(extent.apply(this, arguments));\n    state.dim = dim;\n    return state;\n  }\n\n  brush.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant(number2(_)), brush) : extent;\n  };\n\n  brush.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), brush) : filter;\n  };\n\n  brush.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), brush) : touchable;\n  };\n\n  brush.handleSize = function(_) {\n    return arguments.length ? (handleSize = +_, brush) : handleSize;\n  };\n\n  brush.keyModifiers = function(_) {\n    return arguments.length ? (keys = !!_, brush) : keys;\n  };\n\n  brush.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? brush : value;\n  };\n\n  return brush;\n}\n", "function count(node) {\n  var sum = 0,\n      children = node.children,\n      i = children && children.length;\n  if (!i) sum = 1;\n  else while (--i >= 0) sum += children[i].value;\n  node.value = sum;\n}\n\nexport default function() {\n  return this.eachAfter(count);\n}\n", "export default function(callback, that) {\n  let index = -1;\n  for (const node of this) {\n    callback.call(that, node, ++index, this);\n  }\n  return this;\n}\n", "export default function(callback, that) {\n  var node = this, nodes = [node], children, i, index = -1;\n  while (node = nodes.pop()) {\n    callback.call(that, node, ++index, this);\n    if (children = node.children) {\n      for (i = children.length - 1; i >= 0; --i) {\n        nodes.push(children[i]);\n      }\n    }\n  }\n  return this;\n}\n", "export default function(callback, that) {\n  var node = this, nodes = [node], next = [], children, i, n, index = -1;\n  while (node = nodes.pop()) {\n    next.push(node);\n    if (children = node.children) {\n      for (i = 0, n = children.length; i < n; ++i) {\n        nodes.push(children[i]);\n      }\n    }\n  }\n  while (node = next.pop()) {\n    callback.call(that, node, ++index, this);\n  }\n  return this;\n}\n", "export default function(callback, that) {\n  let index = -1;\n  for (const node of this) {\n    if (callback.call(that, node, ++index, this)) {\n      return node;\n    }\n  }\n}\n", "export default function(value) {\n  return this.eachAfter(function(node) {\n    var sum = +value(node.data) || 0,\n        children = node.children,\n        i = children && children.length;\n    while (--i >= 0) sum += children[i].value;\n    node.value = sum;\n  });\n}\n", "export default function(compare) {\n  return this.eachBefore(function(node) {\n    if (node.children) {\n      node.children.sort(compare);\n    }\n  });\n}\n", "export default function(end) {\n  var start = this,\n      ancestor = leastCommonAncestor(start, end),\n      nodes = [start];\n  while (start !== ancestor) {\n    start = start.parent;\n    nodes.push(start);\n  }\n  var k = nodes.length;\n  while (end !== ancestor) {\n    nodes.splice(k, 0, end);\n    end = end.parent;\n  }\n  return nodes;\n}\n\nfunction leastCommonAncestor(a, b) {\n  if (a === b) return a;\n  var aNodes = a.ancestors(),\n      bNodes = b.ancestors(),\n      c = null;\n  a = aNodes.pop();\n  b = bNodes.pop();\n  while (a === b) {\n    c = a;\n    a = aNodes.pop();\n    b = bNodes.pop();\n  }\n  return c;\n}\n", "export default function() {\n  var node = this, nodes = [node];\n  while (node = node.parent) {\n    nodes.push(node);\n  }\n  return nodes;\n}\n", "export default function() {\n  return Array.from(this);\n}\n", "export default function() {\n  var leaves = [];\n  this.eachBefore(function(node) {\n    if (!node.children) {\n      leaves.push(node);\n    }\n  });\n  return leaves;\n}\n", "export default function() {\n  var root = this, links = [];\n  root.each(function(node) {\n    if (node !== root) { // Don\u2019t include the root\u2019s parent, if any.\n      links.push({source: node.parent, target: node});\n    }\n  });\n  return links;\n}\n", "export default function*() {\n  var node = this, current, next = [node], children, i, n;\n  do {\n    current = next.reverse(), next = [];\n    while (node = current.pop()) {\n      yield node;\n      if (children = node.children) {\n        for (i = 0, n = children.length; i < n; ++i) {\n          next.push(children[i]);\n        }\n      }\n    }\n  } while (next.length);\n}\n", "import node_count from \"./count.js\";\nimport node_each from \"./each.js\";\nimport node_eachBefore from \"./eachBefore.js\";\nimport node_eachAfter from \"./eachAfter.js\";\nimport node_find from \"./find.js\";\nimport node_sum from \"./sum.js\";\nimport node_sort from \"./sort.js\";\nimport node_path from \"./path.js\";\nimport node_ancestors from \"./ancestors.js\";\nimport node_descendants from \"./descendants.js\";\nimport node_leaves from \"./leaves.js\";\nimport node_links from \"./links.js\";\nimport node_iterator from \"./iterator.js\";\n\nexport default function hierarchy(data, children) {\n  if (data instanceof Map) {\n    data = [undefined, data];\n    if (children === undefined) children = mapChildren;\n  } else if (children === undefined) {\n    children = objectChildren;\n  }\n\n  var root = new Node(data),\n      node,\n      nodes = [root],\n      child,\n      childs,\n      i,\n      n;\n\n  while (node = nodes.pop()) {\n    if ((childs = children(node.data)) && (n = (childs = Array.from(childs)).length)) {\n      node.children = childs;\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = childs[i] = new Node(childs[i]));\n        child.parent = node;\n        child.depth = node.depth + 1;\n      }\n    }\n  }\n\n  return root.eachBefore(computeHeight);\n}\n\nfunction node_copy() {\n  return hierarchy(this).eachBefore(copyData);\n}\n\nfunction objectChildren(d) {\n  return d.children;\n}\n\nfunction mapChildren(d) {\n  return Array.isArray(d) ? d[1] : null;\n}\n\nfunction copyData(node) {\n  if (node.data.value !== undefined) node.value = node.data.value;\n  node.data = node.data.data;\n}\n\nexport function computeHeight(node) {\n  var height = 0;\n  do node.height = height;\n  while ((node = node.parent) && (node.height < ++height));\n}\n\nexport function Node(data) {\n  this.data = data;\n  this.depth =\n  this.height = 0;\n  this.parent = null;\n}\n\nNode.prototype = hierarchy.prototype = {\n  constructor: Node,\n  count: node_count,\n  each: node_each,\n  eachAfter: node_eachAfter,\n  eachBefore: node_eachBefore,\n  find: node_find,\n  sum: node_sum,\n  sort: node_sort,\n  path: node_path,\n  ancestors: node_ancestors,\n  descendants: node_descendants,\n  leaves: node_leaves,\n  links: node_links,\n  copy: node_copy,\n  [Symbol.iterator]: node_iterator\n};\n", "export function optional(f) {\n  return f == null ? null : required(f);\n}\n\nexport function required(f) {\n  if (typeof f !== \"function\") throw new Error;\n  return f;\n}\n", "export function constantZero() {\n  return 0;\n}\n\nexport default function(x) {\n  return function() {\n    return x;\n  };\n}\n", "export default function(node) {\n  node.x0 = Math.round(node.x0);\n  node.y0 = Math.round(node.y0);\n  node.x1 = Math.round(node.x1);\n  node.y1 = Math.round(node.y1);\n}\n", "export default function(parent, x0, y0, x1, y1) {\n  var nodes = parent.children,\n      node,\n      i = -1,\n      n = nodes.length,\n      k = parent.value && (x1 - x0) / parent.value;\n\n  while (++i < n) {\n    node = nodes[i], node.y0 = y0, node.y1 = y1;\n    node.x0 = x0, node.x1 = x0 += node.value * k;\n  }\n}\n", "export default function(parent, x0, y0, x1, y1) {\n  var nodes = parent.children,\n      node,\n      i = -1,\n      n = nodes.length,\n      k = parent.value && (y1 - y0) / parent.value;\n\n  while (++i < n) {\n    node = nodes[i], node.x0 = x0, node.x1 = x1;\n    node.y0 = y0, node.y1 = y0 += node.value * k;\n  }\n}\n", "import treemapDice from \"./dice.js\";\nimport treemapSlice from \"./slice.js\";\n\nexport var phi = (1 + Math.sqrt(5)) / 2;\n\nexport function squarifyRatio(ratio, parent, x0, y0, x1, y1) {\n  var rows = [],\n      nodes = parent.children,\n      row,\n      nodeValue,\n      i0 = 0,\n      i1 = 0,\n      n = nodes.length,\n      dx, dy,\n      value = parent.value,\n      sumValue,\n      minValue,\n      maxValue,\n      newRatio,\n      minRatio,\n      alpha,\n      beta;\n\n  while (i0 < n) {\n    dx = x1 - x0, dy = y1 - y0;\n\n    // Find the next non-empty node.\n    do sumValue = nodes[i1++].value; while (!sumValue && i1 < n);\n    minValue = maxValue = sumValue;\n    alpha = Math.max(dy / dx, dx / dy) / (value * ratio);\n    beta = sumValue * sumValue * alpha;\n    minRatio = Math.max(maxValue / beta, beta / minValue);\n\n    // Keep adding nodes while the aspect ratio maintains or improves.\n    for (; i1 < n; ++i1) {\n      sumValue += nodeValue = nodes[i1].value;\n      if (nodeValue < minValue) minValue = nodeValue;\n      if (nodeValue > maxValue) maxValue = nodeValue;\n      beta = sumValue * sumValue * alpha;\n      newRatio = Math.max(maxValue / beta, beta / minValue);\n      if (newRatio > minRatio) { sumValue -= nodeValue; break; }\n      minRatio = newRatio;\n    }\n\n    // Position and record the row orientation.\n    rows.push(row = {value: sumValue, dice: dx < dy, children: nodes.slice(i0, i1)});\n    if (row.dice) treemapDice(row, x0, y0, x1, value ? y0 += dy * sumValue / value : y1);\n    else treemapSlice(row, x0, y0, value ? x0 += dx * sumValue / value : x1, y1);\n    value -= sumValue, i0 = i1;\n  }\n\n  return rows;\n}\n\nexport default (function custom(ratio) {\n\n  function squarify(parent, x0, y0, x1, y1) {\n    squarifyRatio(ratio, parent, x0, y0, x1, y1);\n  }\n\n  squarify.ratio = function(x) {\n    return custom((x = +x) > 1 ? x : 1);\n  };\n\n  return squarify;\n})(phi);\n", "import roundNode from \"./round.js\";\nimport squarify from \"./squarify.js\";\nimport {required} from \"../accessors.js\";\nimport constant, {constantZero} from \"../constant.js\";\n\nexport default function() {\n  var tile = squarify,\n      round = false,\n      dx = 1,\n      dy = 1,\n      paddingStack = [0],\n      paddingInner = constantZero,\n      paddingTop = constantZero,\n      paddingRight = constantZero,\n      paddingBottom = constantZero,\n      paddingLeft = constantZero;\n\n  function treemap(root) {\n    root.x0 =\n    root.y0 = 0;\n    root.x1 = dx;\n    root.y1 = dy;\n    root.eachBefore(positionNode);\n    paddingStack = [0];\n    if (round) root.eachBefore(roundNode);\n    return root;\n  }\n\n  function positionNode(node) {\n    var p = paddingStack[node.depth],\n        x0 = node.x0 + p,\n        y0 = node.y0 + p,\n        x1 = node.x1 - p,\n        y1 = node.y1 - p;\n    if (x1 < x0) x0 = x1 = (x0 + x1) / 2;\n    if (y1 < y0) y0 = y1 = (y0 + y1) / 2;\n    node.x0 = x0;\n    node.y0 = y0;\n    node.x1 = x1;\n    node.y1 = y1;\n    if (node.children) {\n      p = paddingStack[node.depth + 1] = paddingInner(node) / 2;\n      x0 += paddingLeft(node) - p;\n      y0 += paddingTop(node) - p;\n      x1 -= paddingRight(node) - p;\n      y1 -= paddingBottom(node) - p;\n      if (x1 < x0) x0 = x1 = (x0 + x1) / 2;\n      if (y1 < y0) y0 = y1 = (y0 + y1) / 2;\n      tile(node, x0, y0, x1, y1);\n    }\n  }\n\n  treemap.round = function(x) {\n    return arguments.length ? (round = !!x, treemap) : round;\n  };\n\n  treemap.size = function(x) {\n    return arguments.length ? (dx = +x[0], dy = +x[1], treemap) : [dx, dy];\n  };\n\n  treemap.tile = function(x) {\n    return arguments.length ? (tile = required(x), treemap) : tile;\n  };\n\n  treemap.padding = function(x) {\n    return arguments.length ? treemap.paddingInner(x).paddingOuter(x) : treemap.paddingInner();\n  };\n\n  treemap.paddingInner = function(x) {\n    return arguments.length ? (paddingInner = typeof x === \"function\" ? x : constant(+x), treemap) : paddingInner;\n  };\n\n  treemap.paddingOuter = function(x) {\n    return arguments.length ? treemap.paddingTop(x).paddingRight(x).paddingBottom(x).paddingLeft(x) : treemap.paddingTop();\n  };\n\n  treemap.paddingTop = function(x) {\n    return arguments.length ? (paddingTop = typeof x === \"function\" ? x : constant(+x), treemap) : paddingTop;\n  };\n\n  treemap.paddingRight = function(x) {\n    return arguments.length ? (paddingRight = typeof x === \"function\" ? x : constant(+x), treemap) : paddingRight;\n  };\n\n  treemap.paddingBottom = function(x) {\n    return arguments.length ? (paddingBottom = typeof x === \"function\" ? x : constant(+x), treemap) : paddingBottom;\n  };\n\n  treemap.paddingLeft = function(x) {\n    return arguments.length ? (paddingLeft = typeof x === \"function\" ? x : constant(+x), treemap) : paddingLeft;\n  };\n\n  return treemap;\n}\n", "export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n", "import {InternMap} from \"d3-array\";\nimport {initRange} from \"./init.js\";\n\nexport const implicit = Symbol(\"implicit\");\n\nexport default function ordinal() {\n  var index = new InternMap(),\n      domain = [],\n      range = [],\n      unknown = implicit;\n\n  function scale(d) {\n    let i = index.get(d);\n    if (i === undefined) {\n      if (unknown !== implicit) return unknown;\n      index.set(d, i = domain.push(d) - 1);\n    }\n    return range[i % range.length];\n  }\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [], index = new InternMap();\n    for (const value of _) {\n      if (index.has(value)) continue;\n      index.set(value, domain.push(value) - 1);\n    }\n    return scale;\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), scale) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return ordinal(domain, range).unknown(unknown);\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n", "export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\n  return node.__zoom;\n}\n", "/**\n * Disk Visualization Module\n * Interactive treemap visualization of disk usage using D3.js\n */\n\nimport * as d3 from 'd3';\nimport { showToast } from './ui.js';\n\ninterface DiskNode {\n    name: string;\n    path: string;\n    value: number;\n    sizeFormatted: string;  // from backend\n    percentage: number;      // from backend\n    totalSizeFormatted?: string;\n    children?: DiskNode[];\n}\n\ninterface DiskUsageResponse {\n    success: boolean;\n    data?: DiskNode;\n    error?: string;\n    warnings?: string[];\n    scan_time_seconds?: number;\n}\n\nexport class DiskVisualizer {\n    private container: HTMLElement;\n    private width: number;\n    private height: number;\n    private currentPath: string = '/';\n    private pathHistory: string[] = [];\n    private isLoading: boolean = false;\n\n    constructor(containerId: string) {\n        const el = document.getElementById(containerId);\n        if (!el) throw new Error(`Container ${containerId} not found`);\n        this.container = el;\n        this.width = 800;\n        this.height = 500;\n        \n        this.buildUI();\n    }\n\n    private buildUI() {\n        this.container.innerHTML = `\n            <div class=\"disk-viz-wrapper\">\n                <div class=\"disk-viz-controls\">\n                    <div class=\"disk-viz-path-group\">\n                        <label for=\"disk-viz-path\">Path:</label>\n                        <input type=\"text\" id=\"disk-viz-path\" value=\"/\" placeholder=\"/\" />\n                        <button id=\"disk-viz-scan\" class=\"primary\">Scan</button>\n                        <button id=\"disk-viz-back\" class=\"secondary\" disabled>\u2190 Back</button>\n                        <button id=\"disk-viz-home\" class=\"secondary\">\uD83C\uDFE0 Home</button>\n                    </div>\n                    <div class=\"disk-viz-options\">\n                        <label>\n                            Depth: \n                            <select id=\"disk-viz-depth\">\n                                <option value=\"2\">2 levels</option>\n                                <option value=\"3\" selected>3 levels</option>\n                                <option value=\"4\">4 levels</option>\n                                <option value=\"5\">5 levels</option>\n                            </select>\n                        </label>\n                        <label>\n                            Min size: \n                            <select id=\"disk-viz-min-size\">\n                                <option value=\"0\">Show all</option>\n                                <option value=\"1\" selected>1 MB+</option>\n                                <option value=\"10\">10 MB+</option>\n                                <option value=\"100\">100 MB+</option>\n                                <option value=\"1000\">1 GB+</option>\n                            </select>\n                        </label>\n                    </div>\n                </div>\n                \n                <div class=\"disk-viz-quick-paths\">\n                    <span>Quick:</span>\n                    <button class=\"quick-path-btn\" data-path=\"/\">/ (root)</button>\n                    <button class=\"quick-path-btn\" data-path=\"/Users\">Users</button>\n                    <button class=\"quick-path-btn\" data-path=\"/Applications\">Applications</button>\n                    <button class=\"quick-path-btn\" data-path=\"/Library\">Library</button>\n                </div>\n                \n                <div class=\"disk-viz-breadcrumbs\" id=\"disk-viz-breadcrumbs\"></div>\n                \n                <div class=\"disk-viz-chart\" id=\"disk-viz-chart\">\n                    <div class=\"disk-viz-placeholder\">\n                        <div class=\"placeholder-icon\">\uD83D\uDCCA</div>\n                        <h3>Disk Usage Visualization</h3>\n                        <p>Click \"Scan\" to analyze disk usage and see an interactive treemap.</p>\n                        <p class=\"hint\">Click on folders in the treemap to drill down.</p>\n                    </div>\n                </div>\n                \n                <div class=\"disk-viz-legend\" id=\"disk-viz-legend\"></div>\n                \n                <div class=\"disk-viz-details\" id=\"disk-viz-details\" style=\"display: none;\">\n                    <h4>Selected:</h4>\n                    <div id=\"disk-viz-selected-info\"></div>\n                </div>\n            </div>\n            \n            <style>\n                .disk-viz-wrapper {\n                    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n                }\n                \n                .disk-viz-controls {\n                    display: flex;\n                    flex-wrap: wrap;\n                    gap: 1rem;\n                    align-items: center;\n                    margin-bottom: 1rem;\n                    justify-content: space-between;\n                }\n                \n                .disk-viz-path-group {\n                    display: flex;\n                    gap: 0.5rem;\n                    align-items: center;\n                    flex-wrap: wrap;\n                }\n                \n                .disk-viz-path-group input {\n                    width: 250px;\n                    padding: 0.5rem 0.75rem;\n                    border: 1px solid var(--border-color);\n                    border-radius: 6px;\n                    background: var(--bg-tertiary);\n                    color: var(--text-primary);\n                }\n                \n                .disk-viz-options {\n                    display: flex;\n                    gap: 1rem;\n                    align-items: center;\n                }\n                \n                .disk-viz-options select {\n                    padding: 0.4rem 0.6rem;\n                    border: 1px solid var(--border-color);\n                    border-radius: 6px;\n                    background: var(--bg-tertiary);\n                    color: var(--text-primary);\n                }\n                \n                .disk-viz-quick-paths {\n                    display: flex;\n                    gap: 0.5rem;\n                    align-items: center;\n                    margin-bottom: 1rem;\n                    flex-wrap: wrap;\n                }\n                \n                .disk-viz-quick-paths span {\n                    color: var(--text-secondary);\n                    font-size: 0.875rem;\n                }\n                \n                .disk-viz-quick-paths .quick-path-btn {\n                    padding: 0.35rem 0.75rem;\n                    font-size: 0.8rem;\n                    border-radius: 4px;\n                    background: var(--bg-tertiary);\n                    border: 1px solid var(--border-color);\n                    cursor: pointer;\n                    transition: all 0.2s;\n                }\n                \n                .disk-viz-quick-paths .quick-path-btn:hover {\n                    background: var(--accent-color);\n                    color: white;\n                    border-color: var(--accent-color);\n                }\n                \n                .disk-viz-breadcrumbs {\n                    display: flex;\n                    gap: 0.25rem;\n                    align-items: center;\n                    margin-bottom: 0.75rem;\n                    font-size: 0.875rem;\n                    flex-wrap: wrap;\n                }\n                \n                .disk-viz-breadcrumbs .breadcrumb {\n                    cursor: pointer;\n                    color: var(--accent-color);\n                    transition: color 0.2s;\n                }\n                \n                .disk-viz-breadcrumbs .breadcrumb:hover {\n                    text-decoration: underline;\n                }\n                \n                .disk-viz-breadcrumbs .separator {\n                    color: var(--text-secondary);\n                }\n                \n                .disk-viz-chart {\n                    background: var(--bg-tertiary);\n                    border: 1px solid var(--border-color);\n                    border-radius: 8px;\n                    min-height: 500px;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    overflow: hidden;\n                    position: relative;\n                }\n                \n                .disk-viz-placeholder {\n                    text-align: center;\n                    color: var(--text-secondary);\n                    padding: 2rem;\n                }\n                \n                .disk-viz-placeholder .placeholder-icon {\n                    font-size: 4rem;\n                    margin-bottom: 1rem;\n                    opacity: 0.5;\n                }\n                \n                .disk-viz-placeholder h3 {\n                    margin: 0 0 0.5rem 0;\n                    color: var(--text-primary);\n                }\n                \n                .disk-viz-placeholder .hint {\n                    font-size: 0.85rem;\n                    margin-top: 1rem;\n                    opacity: 0.7;\n                }\n                \n                .disk-viz-loading {\n                    display: flex;\n                    flex-direction: column;\n                    align-items: center;\n                    gap: 1rem;\n                }\n                \n                .disk-viz-loading .spinner {\n                    width: 48px;\n                    height: 48px;\n                    border: 4px solid var(--border-color);\n                    border-top-color: var(--accent-color);\n                    border-radius: 50%;\n                    animation: spin 0.8s linear infinite;\n                }\n                \n                @keyframes spin {\n                    to { transform: rotate(360deg); }\n                }\n                \n                .disk-viz-legend {\n                    display: flex;\n                    gap: 1rem;\n                    margin-top: 1rem;\n                    flex-wrap: wrap;\n                    justify-content: center;\n                }\n                \n                .disk-viz-legend-item {\n                    display: flex;\n                    align-items: center;\n                    gap: 0.35rem;\n                    font-size: 0.8rem;\n                    color: var(--text-secondary);\n                }\n                \n                .disk-viz-legend-color {\n                    width: 12px;\n                    height: 12px;\n                    border-radius: 2px;\n                }\n                \n                .disk-viz-details {\n                    margin-top: 1rem;\n                    padding: 1rem;\n                    background: var(--bg-tertiary);\n                    border-radius: 8px;\n                }\n                \n                .disk-viz-details h4 {\n                    margin: 0 0 0.5rem 0;\n                    font-size: 0.9rem;\n                    color: var(--text-secondary);\n                }\n                \n                #disk-viz-selected-info {\n                    font-family: monospace;\n                    font-size: 0.875rem;\n                }\n                \n                /* Treemap styles */\n                .treemap-cell {\n                    cursor: pointer;\n                    transition: opacity 0.2s;\n                }\n                \n                .treemap-cell:hover {\n                    opacity: 0.85;\n                }\n                \n                .treemap-label {\n                    pointer-events: none;\n                    font-size: 11px;\n                    fill: white;\n                    text-shadow: 0 1px 2px rgba(0,0,0,0.5);\n                }\n                \n                .treemap-size {\n                    pointer-events: none;\n                    font-size: 9px;\n                    fill: rgba(255,255,255,0.8);\n                }\n            </style>\n        `;\n        \n        // Bind events\n        this.container.querySelector('#disk-viz-scan')?.addEventListener('click', () => this.scan());\n        this.container.querySelector('#disk-viz-back')?.addEventListener('click', () => this.goBack());\n        this.container.querySelector('#disk-viz-home')?.addEventListener('click', () => this.goHome());\n        \n        const pathInput = this.container.querySelector('#disk-viz-path') as HTMLInputElement;\n        pathInput?.addEventListener('keypress', (e) => {\n            if (e.key === 'Enter') this.scan();\n        });\n        \n        // Quick path buttons\n        this.container.querySelectorAll('.disk-viz-quick-paths .quick-path-btn').forEach(btn => {\n            btn.addEventListener('click', () => {\n                const path = (btn as HTMLElement).dataset.path || '/';\n                pathInput.value = path;\n                this.currentPath = path;\n                this.scan();\n            });\n        });\n    }\n\n    async scan() {\n        if (this.isLoading) return;\n        \n        const pathInput = this.container.querySelector('#disk-viz-path') as HTMLInputElement;\n        const depthSelect = this.container.querySelector('#disk-viz-depth') as HTMLSelectElement;\n        const minSizeSelect = this.container.querySelector('#disk-viz-min-size') as HTMLSelectElement;\n        \n        const path = pathInput.value || '/';\n        const depth = parseInt(depthSelect.value) || 3;\n        const minSizeMb = parseInt(minSizeSelect.value) || 1;\n        \n        this.currentPath = path;\n        this.isLoading = true;\n        this.showLoading();\n        \n        try {\n            const response = await fetch(`/api/disk/usage?path=${encodeURIComponent(path)}&depth=${depth}&min_size_mb=${minSizeMb}`);\n            \n            if (!response.ok) {\n                const errorData = await response.json().catch(() => ({ detail: 'Request failed' }));\n                this.showError(errorData.detail || `HTTP ${response.status}`);\n                return;\n            }\n            \n            const result = await response.json();\n            \n            // Backend returns tree directly (not wrapped in { success, data })\n            // Check if it's an error response or valid tree data\n            if (result.error && !result.name) {\n                this.showError(result.error);\n            } else if (result.name) {\n                // Valid tree data - render it\n                this.renderTreemap(result as DiskNode);\n                this.updateBreadcrumbs();\n                \n                if (result.warnings && result.warnings.length > 0) {\n                    showToast(`Scan complete with ${result.warnings.length} permission warning(s)`, 'warning');\n                } else {\n                    showToast(`Scan complete: ${result.totalSizeFormatted || 'done'}`, 'success');\n                }\n            } else {\n                this.showError('Invalid response from server');\n            }\n        } catch (error) {\n            this.showError(`Failed to scan: ${error}`);\n        } finally {\n            this.isLoading = false;\n        }\n    }\n\n    private showLoading() {\n        const chartEl = this.container.querySelector('#disk-viz-chart') as HTMLElement;\n        chartEl.innerHTML = `\n            <div class=\"disk-viz-loading\">\n                <div class=\"spinner\"></div>\n                <div>Scanning disk structure...</div>\n                <div style=\"font-size: 0.8rem; color: var(--text-secondary);\">This may take a moment for large directories</div>\n            </div>\n        `;\n    }\n\n    private showError(message: string) {\n        const chartEl = this.container.querySelector('#disk-viz-chart') as HTMLElement;\n        chartEl.innerHTML = `\n            <div class=\"disk-viz-placeholder\">\n                <div class=\"placeholder-icon\">\u26A0\uFE0F</div>\n                <h3>Scan Error</h3>\n                <p>${message}</p>\n            </div>\n        `;\n        showToast(message, 'error');\n    }\n\n    private renderTreemap(data: DiskNode) {\n        const chartEl = this.container.querySelector('#disk-viz-chart') as HTMLElement;\n        chartEl.innerHTML = '';\n        \n        // Get actual dimensions\n        const rect = chartEl.getBoundingClientRect();\n        this.width = rect.width || 800;\n        this.height = Math.max(500, rect.height);\n        \n        // Create SVG\n        const svg = d3.select(chartEl)\n            .append('svg')\n            .attr('width', this.width)\n            .attr('height', this.height)\n            .attr('viewBox', `0 0 ${this.width} ${this.height}`)\n            .style('font-family', '-apple-system, BlinkMacSystemFont, sans-serif');\n        \n        // Create hierarchy\n        const root = d3.hierarchy(data)\n            .sum(d => d.children ? 0 : d.value)\n            .sort((a, b) => (b.value || 0) - (a.value || 0));\n        \n        // Create treemap layout\n        const treemap = d3.treemap<DiskNode>()\n            .size([this.width, this.height])\n            .paddingOuter(3)\n            .paddingInner(2)\n            .paddingTop(20)\n            .round(true);\n        \n        // Apply treemap layout - returns nodes with x0, y0, x1, y1\n        const treemapRoot = treemap(root);\n        \n        // After treemap(), nodes have rectangular coordinates\n        type TreemapNode = d3.HierarchyRectangularNode<DiskNode>;\n        \n        // Color scale\n        const colorScale = d3.scaleOrdinal<string>()\n            .domain(['Applications', 'Users', 'Library', 'System', 'private', 'opt', 'usr', 'var', 'other'])\n            .range([\n                '#FF6B6B', // Red - Applications\n                '#4ECDC4', // Teal - Users\n                '#45B7D1', // Blue - Library\n                '#96CEB4', // Green - System\n                '#FFEAA7', // Yellow - private\n                '#DDA0DD', // Plum - opt\n                '#98D8C8', // Mint - usr\n                '#F7DC6F', // Gold - var\n                '#B8B8B8'  // Gray - other\n            ]);\n        \n        const getColor = (d: TreemapNode): string => {\n            // Get top-level category\n            let node: TreemapNode | null = d;\n            while (node && node.depth > 1) {\n                node = node.parent as TreemapNode | null;\n            }\n            const category = node?.data.name || 'other';\n            return colorScale(category);\n        };\n        \n        // Get descendants with proper typing\n        const nodes = treemapRoot.descendants() as TreemapNode[];\n        \n        // Render cells\n        const cell = svg.selectAll('g')\n            .data(nodes.filter(d => d.depth > 0))\n            .join('g')\n            .attr('transform', d => `translate(${d.x0},${d.y0})`);\n        \n        // Rectangles\n        cell.append('rect')\n            .attr('class', 'treemap-cell')\n            .attr('width', d => Math.max(0, d.x1 - d.x0))\n            .attr('height', d => Math.max(0, d.y1 - d.y0))\n            .attr('fill', d => getColor(d))\n            .attr('stroke', 'var(--bg-secondary)')\n            .attr('stroke-width', 1)\n            .on('click', (event, d) => this.handleCellClick(d))\n            .on('mouseover', (event, d) => this.showDetails(d))\n            .on('mouseout', () => this.hideDetails())\n            .append('title')\n            .text(d => `${d.data.path}\\n${d.data.sizeFormatted || 'N/A'}\\n${(d.data.percentage || 0).toFixed(1)}%`);\n        \n        // Labels (only for cells large enough)\n        cell.filter(d => (d.x1 - d.x0) > 60 && (d.y1 - d.y0) > 30)\n            .append('text')\n            .attr('class', 'treemap-label')\n            .attr('x', 4)\n            .attr('y', 14)\n            .text(d => this.truncateLabel(d.data.name, d.x1 - d.x0 - 8));\n        \n        // Size labels (for larger cells)\n        cell.filter(d => (d.x1 - d.x0) > 50 && (d.y1 - d.y0) > 45)\n            .append('text')\n            .attr('class', 'treemap-size')\n            .attr('x', 4)\n            .attr('y', 26)\n            .text(d => d.data.sizeFormatted || '');\n        \n        // Update legend\n        this.renderLegend(colorScale);\n    }\n\n    private truncateLabel(text: string, maxWidth: number): string {\n        const charWidth = 7; // approximate\n        const maxChars = Math.floor(maxWidth / charWidth);\n        if (text.length <= maxChars) return text;\n        return text.slice(0, maxChars - 2) + '\u2026';\n    }\n\n    private handleCellClick(d: { data: DiskNode; children?: unknown; parent: unknown }) {\n        if (d.children && d.data.path) {\n            // Save current path for back navigation\n            this.pathHistory.push(this.currentPath);\n            this.currentPath = d.data.path;\n            \n            const pathInput = this.container.querySelector('#disk-viz-path') as HTMLInputElement;\n            pathInput.value = d.data.path;\n            \n            // Enable back button\n            const backBtn = this.container.querySelector('#disk-viz-back') as HTMLButtonElement;\n            backBtn.disabled = false;\n            \n            this.scan();\n        }\n    }\n\n    private showDetails(d: { data: DiskNode }) {\n        const detailsEl = this.container.querySelector('#disk-viz-details') as HTMLElement;\n        const infoEl = this.container.querySelector('#disk-viz-selected-info') as HTMLElement;\n        \n        detailsEl.style.display = 'block';\n        infoEl.innerHTML = `\n            <strong>${d.data.name}</strong><br>\n            Path: ${d.data.path}<br>\n            Size: ${d.data.sizeFormatted || 'N/A'}<br>\n            Percent: ${(d.data.percentage || 0).toFixed(2)}% of parent\n        `;\n    }\n\n    private hideDetails() {\n        const detailsEl = this.container.querySelector('#disk-viz-details') as HTMLElement;\n        detailsEl.style.display = 'none';\n    }\n\n    private renderLegend(colorScale: d3.ScaleOrdinal<string, string>) {\n        const legendEl = this.container.querySelector('#disk-viz-legend') as HTMLElement;\n        const categories = colorScale.domain();\n        \n        legendEl.innerHTML = categories.map(cat => `\n            <div class=\"disk-viz-legend-item\">\n                <div class=\"disk-viz-legend-color\" style=\"background: ${colorScale(cat)}\"></div>\n                <span>${cat}</span>\n            </div>\n        `).join('');\n    }\n\n    private updateBreadcrumbs() {\n        const breadcrumbsEl = this.container.querySelector('#disk-viz-breadcrumbs') as HTMLElement;\n        const parts = this.currentPath.split('/').filter(p => p);\n        \n        let html = `<span class=\"breadcrumb\" data-path=\"/\">/</span>`;\n        let currentPath = '';\n        \n        parts.forEach((part, i) => {\n            currentPath += '/' + part;\n            html += `<span class=\"separator\">/</span>`;\n            html += `<span class=\"breadcrumb\" data-path=\"${currentPath}\">${part}</span>`;\n        });\n        \n        breadcrumbsEl.innerHTML = html;\n        \n        // Bind click events\n        breadcrumbsEl.querySelectorAll('.breadcrumb').forEach(el => {\n            el.addEventListener('click', () => {\n                const path = (el as HTMLElement).dataset.path || '/';\n                const pathInput = this.container.querySelector('#disk-viz-path') as HTMLInputElement;\n                pathInput.value = path;\n                this.currentPath = path;\n                this.scan();\n            });\n        });\n    }\n\n    private goBack() {\n        if (this.pathHistory.length > 0) {\n            const prevPath = this.pathHistory.pop()!;\n            this.currentPath = prevPath;\n            \n            const pathInput = this.container.querySelector('#disk-viz-path') as HTMLInputElement;\n            pathInput.value = prevPath;\n            \n            // Disable back button if no more history\n            if (this.pathHistory.length === 0) {\n                const backBtn = this.container.querySelector('#disk-viz-back') as HTMLButtonElement;\n                backBtn.disabled = true;\n            }\n            \n            this.scan();\n        }\n    }\n\n    private goHome() {\n        this.pathHistory = [];\n        this.currentPath = '/';\n        \n        const pathInput = this.container.querySelector('#disk-viz-path') as HTMLInputElement;\n        pathInput.value = '/';\n        \n        const backBtn = this.container.querySelector('#disk-viz-back') as HTMLButtonElement;\n        backBtn.disabled = true;\n        \n        this.scan();\n    }\n}\n\n// Export initialization function\nexport function initDiskViz(containerId: string): DiskVisualizer {\n    return new DiskVisualizer(containerId);\n}\n", "/**\n * Duplicate Finder UI Module\n * \n * Provides UI for scanning, viewing, and managing duplicate files.\n */\n\nimport { showToast } from \"./ui.js\";\n\ninterface FileInfo {\n    path: string;\n    mtime: string | null;\n}\n\ninterface DuplicateGroup {\n    hash: string;\n    full_hash: string;\n    size_bytes: number;\n    size_formatted: string;\n    file_count: number;\n    potential_savings_bytes: number;\n    potential_savings_formatted: string;\n    files: FileInfo[];\n}\n\ninterface ScanSummary {\n    total_files_scanned: number;\n    total_duplicates: number;\n    total_wasted_bytes: number;\n    total_wasted_formatted: string;\n    duplicate_groups_count: number;\n    scan_duration_seconds: number;\n    errors_count: number;\n}\n\ninterface ScanResult {\n    scan_summary: ScanSummary;\n    duplicate_groups: DuplicateGroup[];\n    errors: string[];\n}\n\ninterface ScanStatus {\n    scan_id: string;\n    status: \"pending\" | \"running\" | \"complete\" | \"error\";\n    progress: {\n        stage: string;\n        current: number;\n        total: number;\n    };\n    error: string | null;\n}\n\nexport class DuplicateFinder {\n    private container: HTMLElement;\n    private pathInput!: HTMLInputElement;\n    private minSizeSelect!: HTMLSelectElement;\n    private includeHiddenCheckbox!: HTMLInputElement;\n    private scanButton!: HTMLButtonElement;\n    private progressContainer!: HTMLElement;\n    private resultsContainer!: HTMLElement;\n    \n    private currentScanId: string | null = null;\n    private scanResult: ScanResult | null = null;\n    private selectedFiles: Set<string> = new Set();\n\n    constructor(containerId: string) {\n        const el = document.getElementById(containerId);\n        if (!el) throw new Error(`Container ${containerId} not found`);\n        this.container = el;\n        \n        this.buildUI();\n        this.bindEvents();\n    }\n\n    private buildUI(): void {\n        this.container.innerHTML = `\n            <div class=\"duplicate-finder\">\n                <div class=\"scan-controls\">\n                    <div class=\"control-row\">\n                        <label for=\"dup-path\">Path:</label>\n                        <input type=\"text\" id=\"dup-path\" value=\"~\" placeholder=\"Directory to scan\" />\n                        <button id=\"dup-home-btn\" class=\"quick-path-btn\">\uD83C\uDFE0 Home</button>\n                        <button id=\"dup-downloads-btn\" class=\"quick-path-btn\">\uD83D\uDCE5 Downloads</button>\n                        <button id=\"dup-documents-btn\" class=\"quick-path-btn\">\uD83D\uDCC4 Documents</button>\n                    </div>\n                    <div class=\"control-row\">\n                        <label for=\"dup-min-size\">Min size:</label>\n                        <select id=\"dup-min-size\">\n                            <option value=\"0.001\">1 KB+</option>\n                            <option value=\"0.1\">100 KB+</option>\n                            <option value=\"1\" selected>1 MB+</option>\n                            <option value=\"10\">10 MB+</option>\n                            <option value=\"100\">100 MB+</option>\n                        </select>\n                        <label for=\"dup-hidden\">\n                            <input type=\"checkbox\" id=\"dup-hidden\" /> Include hidden files\n                        </label>\n                        <button id=\"dup-scan-btn\" class=\"primary\">\uD83D\uDD0D Scan for Duplicates</button>\n                    </div>\n                </div>\n                \n                <div id=\"dup-progress\" class=\"scan-progress\" style=\"display: none;\">\n                    <div class=\"progress-bar\">\n                        <div class=\"progress-fill\"></div>\n                    </div>\n                    <div class=\"progress-text\">Preparing scan...</div>\n                </div>\n                \n                <div id=\"dup-results\" class=\"scan-results\" style=\"display: none;\">\n                    <div class=\"results-summary\">\n                        <div class=\"summary-stat\">\n                            <span class=\"stat-value\" id=\"dup-files-scanned\">0</span>\n                            <span class=\"stat-label\">Files Scanned</span>\n                        </div>\n                        <div class=\"summary-stat\">\n                            <span class=\"stat-value\" id=\"dup-groups-found\">0</span>\n                            <span class=\"stat-label\">Duplicate Groups</span>\n                        </div>\n                        <div class=\"summary-stat highlight\">\n                            <span class=\"stat-value\" id=\"dup-wasted-space\">0 B</span>\n                            <span class=\"stat-label\">Potential Savings</span>\n                        </div>\n                        <div class=\"summary-stat\">\n                            <span class=\"stat-value\" id=\"dup-scan-time\">0s</span>\n                            <span class=\"stat-label\">Scan Time</span>\n                        </div>\n                    </div>\n                    \n                    <div class=\"results-actions\">\n                        <button id=\"dup-export-csv\" class=\"action-btn\">\uD83D\uDCCA Export CSV</button>\n                        <button id=\"dup-export-text\" class=\"action-btn\">\uD83D\uDCDD Export Text</button>\n                        <button id=\"dup-delete-selected\" class=\"action-btn danger\" disabled>\uD83D\uDDD1\uFE0F Delete Selected (0)</button>\n                    </div>\n                    \n                    <div id=\"dup-groups-container\" class=\"groups-container\">\n                        <!-- Duplicate groups will be rendered here -->\n                    </div>\n                </div>\n                \n                <div id=\"dup-empty\" class=\"empty-state\" style=\"display: none;\">\n                    <div class=\"empty-icon\">\uD83C\uDF89</div>\n                    <div class=\"empty-title\">No Duplicates Found</div>\n                    <div class=\"empty-text\">Your files are unique! No duplicate files were detected.</div>\n                </div>\n            </div>\n        `;\n\n        // Get references to UI elements\n        this.pathInput = this.container.querySelector(\"#dup-path\") as HTMLInputElement;\n        this.minSizeSelect = this.container.querySelector(\"#dup-min-size\") as HTMLSelectElement;\n        this.includeHiddenCheckbox = this.container.querySelector(\"#dup-hidden\") as HTMLInputElement;\n        this.scanButton = this.container.querySelector(\"#dup-scan-btn\") as HTMLButtonElement;\n        this.progressContainer = this.container.querySelector(\"#dup-progress\") as HTMLElement;\n        this.resultsContainer = this.container.querySelector(\"#dup-results\") as HTMLElement;\n    }\n\n    private bindEvents(): void {\n        // Quick path buttons\n        this.container.querySelector(\"#dup-home-btn\")?.addEventListener(\"click\", () => {\n            this.pathInput.value = \"~\";\n        });\n        this.container.querySelector(\"#dup-downloads-btn\")?.addEventListener(\"click\", () => {\n            this.pathInput.value = \"~/Downloads\";\n        });\n        this.container.querySelector(\"#dup-documents-btn\")?.addEventListener(\"click\", () => {\n            this.pathInput.value = \"~/Documents\";\n        });\n\n        // Scan button\n        this.scanButton.addEventListener(\"click\", () => this.startScan());\n\n        // Export buttons\n        this.container.querySelector(\"#dup-export-csv\")?.addEventListener(\"click\", () => this.exportResults(\"csv\"));\n        this.container.querySelector(\"#dup-export-text\")?.addEventListener(\"click\", () => this.exportResults(\"text\"));\n\n        // Delete button\n        this.container.querySelector(\"#dup-delete-selected\")?.addEventListener(\"click\", () => this.deleteSelected());\n    }\n\n    private expandPath(path: string): string {\n        // Expand ~ to user home (this happens on server side, but we can clean it up)\n        if (path === \"~\" || path.startsWith(\"~/\")) {\n            // Let the server handle it\n            return path;\n        }\n        return path;\n    }\n\n    async startScan(): Promise<void> {\n        const path = this.expandPath(this.pathInput.value.trim() || \"~\");\n        const minSizeMb = parseFloat(this.minSizeSelect.value);\n        const includeHidden = this.includeHiddenCheckbox.checked;\n\n        // Reset UI\n        this.selectedFiles.clear();\n        this.scanResult = null;\n        this.showProgress();\n\n        try {\n            // Start the scan\n            const startResponse = await fetch(\n                `/api/duplicates/scan?paths=${encodeURIComponent(path)}&min_size_mb=${minSizeMb}&include_hidden=${includeHidden}`,\n                { method: \"POST\" }\n            );\n\n            if (!startResponse.ok) {\n                const error = await startResponse.json();\n                throw new Error(error.detail || \"Failed to start scan\");\n            }\n\n            const { scan_id } = await startResponse.json();\n            this.currentScanId = scan_id;\n\n            // Poll for status\n            await this.pollScanStatus(scan_id);\n        } catch (e) {\n            showToast(`Scan error: ${e}`, \"error\");\n            this.hideProgress();\n        }\n    }\n\n    private async pollScanStatus(scanId: string): Promise<void> {\n        const pollInterval = 500; // ms\n        const maxAttempts = 600; // 5 minutes max\n        let attempts = 0;\n\n        const poll = async (): Promise<void> => {\n            try {\n                const response = await fetch(`/api/duplicates/status/${scanId}`);\n                if (!response.ok) {\n                    throw new Error(\"Failed to get scan status\");\n                }\n\n                const status: ScanStatus = await response.json();\n                this.updateProgress(status);\n\n                if (status.status === \"complete\") {\n                    await this.loadResults(scanId);\n                    return;\n                }\n\n                if (status.status === \"error\") {\n                    throw new Error(status.error || \"Scan failed\");\n                }\n\n                // Continue polling\n                attempts++;\n                if (attempts < maxAttempts) {\n                    setTimeout(poll, pollInterval);\n                } else {\n                    throw new Error(\"Scan timeout - taking too long\");\n                }\n            } catch (e) {\n                showToast(`${e}`, \"error\");\n                this.hideProgress();\n            }\n        };\n\n        await poll();\n    }\n\n    private updateProgress(status: ScanStatus): void {\n        const progressFill = this.progressContainer.querySelector(\".progress-fill\") as HTMLElement;\n        const progressText = this.progressContainer.querySelector(\".progress-text\") as HTMLElement;\n\n        const stageNames: Record<string, string> = {\n            scanning: \"Scanning files...\",\n            size_grouping: \"Grouping by size...\",\n            partial_hashing: \"Computing partial hashes...\",\n            full_hashing: \"Verifying duplicates...\",\n        };\n\n        const stageName = stageNames[status.progress.stage] || status.progress.stage;\n        \n        if (status.progress.total > 0) {\n            const percent = Math.round((status.progress.current / status.progress.total) * 100);\n            progressFill.style.width = `${percent}%`;\n            progressText.textContent = `${stageName} (${percent}%)`;\n        } else {\n            progressText.textContent = stageName;\n        }\n    }\n\n    private async loadResults(scanId: string): Promise<void> {\n        try {\n            const response = await fetch(`/api/duplicates/results/${scanId}`);\n            if (!response.ok) {\n                throw new Error(\"Failed to load results\");\n            }\n\n            const results: ScanResult = await response.json();\n            this.scanResult = results;\n            this.renderResults(results);\n        } catch (e) {\n            showToast(`Failed to load results: ${e}`, \"error\");\n            this.hideProgress();\n        }\n    }\n\n    private renderResults(results: ScanResult): void {\n        this.hideProgress();\n\n        if (results.duplicate_groups.length === 0) {\n            // Show empty state\n            (this.container.querySelector(\"#dup-empty\") as HTMLElement).style.display = \"block\";\n            this.resultsContainer.style.display = \"none\";\n            return;\n        }\n\n        (this.container.querySelector(\"#dup-empty\") as HTMLElement).style.display = \"none\";\n        this.resultsContainer.style.display = \"block\";\n\n        // Update summary stats\n        const { scan_summary } = results;\n        (this.container.querySelector(\"#dup-files-scanned\") as HTMLElement).textContent = \n            scan_summary.total_files_scanned.toLocaleString();\n        (this.container.querySelector(\"#dup-groups-found\") as HTMLElement).textContent = \n            scan_summary.duplicate_groups_count.toString();\n        (this.container.querySelector(\"#dup-wasted-space\") as HTMLElement).textContent = \n            scan_summary.total_wasted_formatted;\n        (this.container.querySelector(\"#dup-scan-time\") as HTMLElement).textContent = \n            `${scan_summary.scan_duration_seconds.toFixed(1)}s`;\n\n        // Render duplicate groups\n        const groupsContainer = this.container.querySelector(\"#dup-groups-container\") as HTMLElement;\n        groupsContainer.innerHTML = \"\";\n\n        results.duplicate_groups.forEach((group, index) => {\n            const groupEl = this.createGroupElement(group, index);\n            groupsContainer.appendChild(groupEl);\n        });\n    }\n\n    private createGroupElement(group: DuplicateGroup, index: number): HTMLElement {\n        const el = document.createElement(\"div\");\n        el.className = \"duplicate-group\";\n        el.innerHTML = `\n            <div class=\"group-header\" data-index=\"${index}\">\n                <span class=\"group-toggle\">\u25B6</span>\n                <span class=\"group-title\">Group ${index + 1}: ${group.file_count} files</span>\n                <span class=\"group-size\">${group.size_formatted} each</span>\n                <span class=\"group-savings\">Save ${group.potential_savings_formatted}</span>\n            </div>\n            <div class=\"group-files\" style=\"display: none;\">\n                ${group.files.map((file, fileIndex) => `\n                    <div class=\"file-row\">\n                        <label>\n                            <input type=\"checkbox\" \n                                   class=\"file-checkbox\" \n                                   data-path=\"${this.escapeHtml(file.path)}\"\n                                   data-group=\"${index}\"\n                                   ${fileIndex === 0 ? 'disabled title=\"Keep at least one copy\"' : ''}>\n                            <span class=\"file-path\">${this.escapeHtml(file.path)}</span>\n                        </label>\n                        <span class=\"file-mtime\">${file.mtime ? new Date(file.mtime).toLocaleDateString() : \"\"}</span>\n                    </div>\n                `).join(\"\")}\n                <div class=\"group-actions\">\n                    <button class=\"group-btn keep-newest\" data-group=\"${index}\">Keep Newest</button>\n                    <button class=\"group-btn keep-oldest\" data-group=\"${index}\">Keep Oldest</button>\n                    <button class=\"group-btn select-all\" data-group=\"${index}\">Select All (except first)</button>\n                </div>\n            </div>\n        `;\n\n        // Toggle expand/collapse\n        const header = el.querySelector(\".group-header\") as HTMLElement;\n        const files = el.querySelector(\".group-files\") as HTMLElement;\n        const toggle = el.querySelector(\".group-toggle\") as HTMLElement;\n        \n        header.addEventListener(\"click\", () => {\n            const isExpanded = files.style.display !== \"none\";\n            files.style.display = isExpanded ? \"none\" : \"block\";\n            toggle.textContent = isExpanded ? \"\u25B6\" : \"\u25BC\";\n        });\n\n        // Checkbox events\n        el.querySelectorAll(\".file-checkbox\").forEach(checkbox => {\n            checkbox.addEventListener(\"change\", (e) => {\n                const input = e.target as HTMLInputElement;\n                const path = input.dataset.path!;\n                if (input.checked) {\n                    this.selectedFiles.add(path);\n                } else {\n                    this.selectedFiles.delete(path);\n                }\n                this.updateDeleteButton();\n            });\n        });\n\n        // Quick select buttons\n        el.querySelector(\".keep-newest\")?.addEventListener(\"click\", () => this.keepNewest(group, index, el));\n        el.querySelector(\".keep-oldest\")?.addEventListener(\"click\", () => this.keepOldest(group, index, el));\n        el.querySelector(\".select-all\")?.addEventListener(\"click\", () => this.selectAllExceptFirst(group, index, el));\n\n        return el;\n    }\n\n    private keepNewest(group: DuplicateGroup, groupIndex: number, el: HTMLElement): void {\n        // Find the newest file (most recent mtime)\n        const filesWithMtime = group.files\n            .map((f, i) => ({ file: f, index: i }))\n            .filter(f => f.file.mtime)\n            .sort((a, b) => new Date(b.file.mtime!).getTime() - new Date(a.file.mtime!).getTime());\n\n        const newestIndex = filesWithMtime.length > 0 ? filesWithMtime[0]!.index : 0;\n        \n        el.querySelectorAll(\".file-checkbox\").forEach((checkbox, i) => {\n            const input = checkbox as HTMLInputElement;\n            if (!input.disabled) {\n                input.checked = i !== newestIndex;\n                const path = input.dataset.path!;\n                if (input.checked) {\n                    this.selectedFiles.add(path);\n                } else {\n                    this.selectedFiles.delete(path);\n                }\n            }\n        });\n        this.updateDeleteButton();\n    }\n\n    private keepOldest(group: DuplicateGroup, groupIndex: number, el: HTMLElement): void {\n        // Find the oldest file\n        const filesWithMtime = group.files\n            .map((f, i) => ({ file: f, index: i }))\n            .filter(f => f.file.mtime)\n            .sort((a, b) => new Date(a.file.mtime!).getTime() - new Date(b.file.mtime!).getTime());\n\n        const oldestIndex = filesWithMtime.length > 0 ? filesWithMtime[0]!.index : 0;\n        \n        el.querySelectorAll(\".file-checkbox\").forEach((checkbox, i) => {\n            const input = checkbox as HTMLInputElement;\n            if (!input.disabled) {\n                input.checked = i !== oldestIndex;\n                const path = input.dataset.path!;\n                if (input.checked) {\n                    this.selectedFiles.add(path);\n                } else {\n                    this.selectedFiles.delete(path);\n                }\n            }\n        });\n        this.updateDeleteButton();\n    }\n\n    private selectAllExceptFirst(group: DuplicateGroup, groupIndex: number, el: HTMLElement): void {\n        el.querySelectorAll(\".file-checkbox\").forEach((checkbox) => {\n            const input = checkbox as HTMLInputElement;\n            if (!input.disabled) {\n                input.checked = true;\n                this.selectedFiles.add(input.dataset.path!);\n            }\n        });\n        this.updateDeleteButton();\n    }\n\n    private updateDeleteButton(): void {\n        const btn = this.container.querySelector(\"#dup-delete-selected\") as HTMLButtonElement;\n        btn.disabled = this.selectedFiles.size === 0;\n        btn.textContent = `\uD83D\uDDD1\uFE0F Delete Selected (${this.selectedFiles.size})`;\n    }\n\n    private async deleteSelected(): Promise<void> {\n        if (this.selectedFiles.size === 0 || !this.currentScanId) return;\n\n        const count = this.selectedFiles.size;\n        if (!confirm(`Move ${count} file(s) to Trash? This can be undone from Trash.`)) {\n            return;\n        }\n\n        const btn = this.container.querySelector(\"#dup-delete-selected\") as HTMLButtonElement;\n        btn.disabled = true;\n        btn.textContent = \"Deleting...\";\n\n        try {\n            const response = await fetch(\n                `/api/duplicates/delete?scan_id=${this.currentScanId}`,\n                {\n                    method: \"POST\",\n                    headers: { \"Content-Type\": \"application/json\" },\n                    body: JSON.stringify({ paths: Array.from(this.selectedFiles) }),\n                }\n            );\n\n            if (!response.ok) {\n                const error = await response.json();\n                throw new Error(error.detail || \"Delete failed\");\n            }\n\n            const result = await response.json();\n            \n            if (result.deleted_count > 0) {\n                showToast(`Moved ${result.deleted_count} file(s) to Trash`, \"success\");\n            }\n            if (result.error_count > 0) {\n                showToast(`Failed to delete ${result.error_count} file(s)`, \"error\");\n            }\n\n            // Re-scan to update results\n            await this.startScan();\n        } catch (e) {\n            showToast(`Delete error: ${e}`, \"error\");\n            this.updateDeleteButton();\n        }\n    }\n\n    private async exportResults(format: \"csv\" | \"text\"): Promise<void> {\n        if (!this.currentScanId) return;\n\n        try {\n            const response = await fetch(`/api/duplicates/results/${this.currentScanId}?format=${format}`);\n            if (!response.ok) throw new Error(\"Export failed\");\n\n            const content = await response.text();\n            const blob = new Blob([content], { type: format === \"csv\" ? \"text/csv\" : \"text/plain\" });\n            const url = URL.createObjectURL(blob);\n            \n            const a = document.createElement(\"a\");\n            a.href = url;\n            a.download = `duplicates-${this.currentScanId}.${format === \"csv\" ? \"csv\" : \"txt\"}`;\n            a.click();\n            \n            URL.revokeObjectURL(url);\n            showToast(`Exported as ${format.toUpperCase()}`, \"success\");\n        } catch (e) {\n            showToast(`Export error: ${e}`, \"error\");\n        }\n    }\n\n    private showProgress(): void {\n        this.progressContainer.style.display = \"block\";\n        this.resultsContainer.style.display = \"none\";\n        (this.container.querySelector(\"#dup-empty\") as HTMLElement).style.display = \"none\";\n        this.scanButton.disabled = true;\n        this.scanButton.textContent = \"Scanning...\";\n        \n        // Reset progress bar\n        const progressFill = this.progressContainer.querySelector(\".progress-fill\") as HTMLElement;\n        progressFill.style.width = \"0%\";\n    }\n\n    private hideProgress(): void {\n        this.progressContainer.style.display = \"none\";\n        this.scanButton.disabled = false;\n        this.scanButton.textContent = \"\uD83D\uDD0D Scan for Duplicates\";\n    }\n\n    private escapeHtml(str: string): string {\n        const div = document.createElement(\"div\");\n        div.textContent = str;\n        return div.innerHTML;\n    }\n}\n", "/**\n * Upkeep Tool - Frontend Application\n * Entry point for TypeScript modules\n */\n\nimport { initTheme, toggleTheme, switchTab, showToast, reloadScripts, setTheme, toggleAutoRefresh, setRefreshInterval, togglePreviewMode, toggleConfirmations, initSettings, showKeyboardShortcuts } from './modules/ui';\nimport { loadSystemInfo, loadHealthScore, loadTopProcesses, runQuickHealthCheck } from './modules/dashboard';\nimport { loadOperations, runDoctor, fixDoctorIssue, runSelectedOperations, cancelOperations, skipCurrentOperation, applyTemplate, selectAllOperations, deselectAllOperations, copyOutputToClipboard, showQuickStartWizard, closeWizard, selectWizardOption, initKeyboardShortcuts, closeShortcuts, filterByCategory, toggleCategory, expandAllCategories, collapseAllCategories, exportLatestLog } from './modules/maintenance';\nimport { analyzeStorage, setPath, getUsername } from './modules/storage';\nimport { onScheduleTabShow, openScheduleModal, closeScheduleModal, loadSchedules, saveSchedule, deleteSchedule, toggleScheduleEnabled, runScheduleNow, applyScheduleTemplate } from './modules/schedule';\nimport { AppUninstaller } from './modules/app_uninstaller';\nimport { DiskVisualizer } from './modules/disk_viz';\nimport { DuplicateFinder } from './modules/duplicate_finder';\nimport type { TabName } from './types';\n\nconsole.log('\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557');\nconsole.log('\u2551   UPKEEP - SCRIPT LOADING            \u2551');\nconsole.log('\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255D');\n\n// ============================================================================\n// Global Functions - Expose to Window for onclick Handlers\n// ============================================================================\n\ndeclare global {\n  interface Window {\n    // Tab switching\n    switchTab: (tabName: TabName) => void;\n    showTab: (tabName: TabName) => void;\n\n    // Theme\n    toggleTheme: () => void;\n\n    // System Configuration\n    reloadScripts: () => Promise<void>;\n\n    // Settings\n    setTheme: (theme: string) => void;\n    toggleAutoRefresh: (enabled: boolean) => void;\n    setRefreshInterval: (seconds: number) => void;\n    togglePreviewMode: (enabled: boolean) => void;\n    toggleConfirmations: (enabled: boolean) => void;\n    showKeyboardShortcuts: () => void;\n\n    // Dashboard\n    loadSystemInfo: () => Promise<void>;\n    loadHealthScore: () => Promise<void>;\n    runQuickHealthCheck: () => Promise<void>;\n    loadTopProcesses: () => Promise<void>;\n\n    // Maintenance\n    loadOperations: () => Promise<void>;\n    runDoctor: () => Promise<void>;\n    fixDoctorIssue: (action: string) => Promise<void>;\n    runSelectedOperations: () => Promise<void>;\n    cancelOperations: () => void;\n    skipCurrentOperation: () => void;\n    applyTemplate: (template: { name: string; operations: string[] }) => void;\n    selectAllOperations: () => void;\n    deselectAllOperations: () => void;\n    upkeepFilterByCategory: (category: string | null) => void;\n    upkeepToggleCategory: (category: string) => void;\n    upkeepExpandAll: () => void;\n    upkeepCollapseAll: () => void;\n    copyOutputToClipboard: () => void;\n    showQuickStartWizard: () => void;\n    closeWizard: () => void;\n    selectWizardOption: (option: string) => Promise<void>;\n\n    // Keyboard shortcuts\n    closeShortcuts: () => void;\n\n    // Export\n    exportLatestLog: () => void;\n\n    // Storage\n    analyzeStorage: () => Promise<void>;\n    setPath: (path: string) => void;\n    getUsername: () => string;\n\n    // Schedule\n    onScheduleTabShow: () => void;\n    openScheduleModal: (scheduleId?: string) => void;\n    closeScheduleModal: () => void;\n    loadSchedules: () => Promise<void>;\n    saveSchedule: () => Promise<void>;\n    deleteSchedule: (scheduleId: string) => void;\n    toggleScheduleEnabled: (scheduleId: string, enabled: boolean) => Promise<void>;\n    runScheduleNow: (scheduleId: string) => void;\n    applyScheduleTemplate: (template: any) => void;\n\n    // Utilities\n    showToast: (message: string, type?: 'success' | 'error' | 'warning' | 'info', duration?: number) => void;\n  }\n}\n\n// Expose functions to window\nwindow.switchTab = switchTab;\nwindow.showTab = switchTab; // Alias for compatibility\nwindow.toggleTheme = toggleTheme;\nwindow.reloadScripts = reloadScripts;\nwindow.setTheme = setTheme;\nwindow.toggleAutoRefresh = toggleAutoRefresh;\nwindow.setRefreshInterval = setRefreshInterval;\nwindow.togglePreviewMode = togglePreviewMode;\nwindow.toggleConfirmations = toggleConfirmations;\nwindow.showKeyboardShortcuts = showKeyboardShortcuts;\nwindow.loadSystemInfo = loadSystemInfo;\nwindow.loadHealthScore = loadHealthScore;\nwindow.runQuickHealthCheck = runQuickHealthCheck;\nwindow.loadTopProcesses = loadTopProcesses;\nwindow.loadOperations = loadOperations;\nwindow.runDoctor = runDoctor;\nwindow.fixDoctorIssue = fixDoctorIssue;\nwindow.runSelectedOperations = runSelectedOperations;\nwindow.cancelOperations = cancelOperations;\nwindow.skipCurrentOperation = skipCurrentOperation;\nwindow.applyTemplate = applyTemplate;\nwindow.selectAllOperations = selectAllOperations;\nwindow.deselectAllOperations = deselectAllOperations;\nwindow.upkeepFilterByCategory = filterByCategory;\nwindow.upkeepToggleCategory = toggleCategory;\nwindow.upkeepExpandAll = expandAllCategories;\nwindow.upkeepCollapseAll = collapseAllCategories;\nwindow.copyOutputToClipboard = copyOutputToClipboard;\nwindow.showQuickStartWizard = showQuickStartWizard;\nwindow.closeWizard = closeWizard;\nwindow.selectWizardOption = selectWizardOption;\nwindow.closeShortcuts = closeShortcuts;\nwindow.exportLatestLog = exportLatestLog;\nwindow.analyzeStorage = analyzeStorage;\nwindow.setPath = setPath;\nwindow.getUsername = getUsername;\nwindow.onScheduleTabShow = onScheduleTabShow;\nwindow.openScheduleModal = openScheduleModal;\nwindow.closeScheduleModal = closeScheduleModal;\nwindow.loadSchedules = loadSchedules;\nwindow.saveSchedule = saveSchedule;\nwindow.deleteSchedule = deleteSchedule;\nwindow.toggleScheduleEnabled = toggleScheduleEnabled;\nwindow.runScheduleNow = runScheduleNow;\nwindow.applyScheduleTemplate = applyScheduleTemplate;\nwindow.showToast = showToast;\n\n// ============================================================================\n// Application Initialization\n// ============================================================================\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  console.log('\u2713 DOM Content Loaded');\n\n  // Keyboard shortcuts (\"?\" for help)\n  initKeyboardShortcuts();\n\n  // Initialize theme\n  initTheme();\n  console.log('\u2713 Theme initialized');\n\n  // Initialize settings panel\n  initSettings();\n  console.log('\u2713 Settings initialized');\n\n  // Load initial dashboard data\n  loadSystemInfo();\n  loadHealthScore();\n  loadTopProcesses();\n  console.log('\u2713 Initial dashboard data loading');\n\n  // Initialize App Uninstaller\n  try {\n    new AppUninstaller('app-uninstaller-container');\n    console.log('\u2713 App Uninstaller initialized');\n  } catch (e) {\n    console.warn('App Uninstaller init failed (container missing?):', e);\n  }\n\n  // Initialize Disk Visualizer\n  try {\n    new DiskVisualizer('disk-viz-container');\n    console.log('\u2713 Disk Visualizer initialized');\n  } catch (e) {\n    console.warn('Disk Visualizer init failed (container missing?):', e);\n  }\n\n  // Initialize Duplicate Finder\n  try {\n    new DuplicateFinder('duplicates-container');\n    console.log('\u2713 Duplicate Finder initialized');\n  } catch (e) {\n    console.warn('Duplicate Finder init failed (container missing?):', e);\n  }\n\n  // Note: Auto-refresh intervals are now managed by initSettings()\n  // based on user preferences (Settings > Dashboard > Auto-Refresh)\n  console.log('\u2713 Auto-refresh configured via settings');\n\n  console.log('\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557');\n  console.log('\u2551   UPKEEP - READY                     \u2551');\n  console.log('\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255D');\n});\n"],
  "mappings": "mBAUO,SAASA,IAAkB,CAChC,IAAMC,EAAa,aAAa,QAAQ,OAAO,GAAK,SACpDC,GAAWD,CAAU,EAGrB,OAAO,WAAW,8BAA8B,EAAE,iBAAiB,SAAU,IAAM,EAC5D,aAAa,QAAQ,OAAO,GAAK,YACjC,UACnBC,GAAW,QAAQ,CAEvB,CAAC,CACH,CAEO,SAASC,IAAoB,CAElC,IAAMC,EAAe,aAAa,QAAQ,OAAO,GAAK,SAClDC,EAEAD,IAAiB,QACnBC,EAAW,OACFD,IAAiB,OAC1BC,EAAW,SAEXA,EAAW,QAGbH,GAAWG,CAAQ,EACnB,aAAa,QAAQ,QAASA,CAAQ,CACxC,CAEA,SAASH,GAAWI,EAAqB,CAEvC,IAAIC,EAAcD,EACdA,IAAU,WACZC,EAAc,OAAO,WAAW,8BAA8B,EAAE,QAAU,OAAS,SAGrF,SAAS,gBAAgB,aAAa,aAAcA,CAAW,EAC/D,IAAMC,EAAO,SAAS,eAAe,YAAY,EAC7CA,IAEEF,IAAU,QACZE,EAAK,YAAc,eACVF,IAAU,OACnBE,EAAK,YAAc,YAEnBA,EAAK,YAAc,kBAGzB,CAMO,SAASC,EAAUC,EAAiBC,EAAkB,OAAQC,EAAmB,IAAY,CAClG,IAAMC,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,UAAY,SAASF,CAAI,GAC/BE,EAAM,YAAcH,EAEpB,IAAMI,EAAY,SAAS,eAAe,iBAAiB,EAC3D,GAAI,CAACA,EAAW,CACd,QAAQ,MAAM,2BAA2B,EACzC,MACF,CAEAA,EAAU,YAAYD,CAAK,EAG3B,WAAW,IAAMA,EAAM,UAAU,IAAI,MAAM,EAAG,EAAE,EAGhD,WAAW,IAAM,CACfA,EAAM,UAAU,OAAO,MAAM,EAC7B,WAAW,IAAMA,EAAM,OAAO,EAAG,GAAG,CACtC,EAAGD,CAAQ,CACb,CA4BA,IAAIG,GAAwB,GACxBC,GAA8C,KAC9CC,GAAmC,KAEhC,SAASC,GAAoBC,EAAeC,EAAeC,EAAkC,CAClG,IAAMC,EAAU,SAAS,eAAe,kBAAkB,EACpDC,EAAU,SAAS,eAAe,gBAAgB,EAClDC,EAAY,SAAS,eAAe,kBAAkB,EACtDC,EAAY,SAAS,eAAe,kBAAkB,EACtDC,EAAQ,SAAS,eAAe,cAAc,EAEpD,GAAI,CAACJ,GAAW,CAACC,GAAW,CAACC,GAAa,CAACC,GAAa,CAACC,EAAO,CAC9D,QAAQ,MAAM,qCAAqC,EACnD,MACF,CAEAH,EAAQ,YAAcJ,EACtBK,EAAU,YAAc,KACxBC,EAAU,YAAc,IACxB,IAAME,EAAc,SAAS,eAAe,oBAAoB,EAC5DA,IACFA,EAAY,YAAc,MAE5BD,EAAM,MAAM,MAAQ,KAEpBJ,EAAQ,UAAU,IAAI,QAAQ,EAC9BP,GAAwB,GACxBC,GAAyBK,EACzBJ,GAAoB,KAAK,IAAI,EAG7B,SAAS,iBAAiB,UAAWW,EAAoB,CAC3D,CAEO,SAASC,GAAsBC,EAAiBV,EAAeW,EAAkB,GAAU,CAChG,GAAI,CAAChB,GAAuB,OAE5B,IAAMiB,EAAU,KAAK,MAAOF,EAAUV,EAAS,GAAG,EAC5CI,EAAY,SAAS,eAAe,kBAAkB,EACtDC,EAAY,SAAS,eAAe,kBAAkB,EACtDC,EAAQ,SAAS,eAAe,cAAc,EAC9CC,EAAc,SAAS,eAAe,oBAAoB,EAC1DM,EAAY,SAAS,eAAe,kBAAkB,EAE5D,GAAI,CAACT,GAAa,CAACC,GAAa,CAACC,EAAO,OAGxC,IAAMQ,EAAiB,SAASV,EAAU,aAAe,GAAG,EAM5D,GALAW,GAAaX,EAAWU,EAAgBF,EAAS,IAAK,EAAG,GAAG,EAC5DP,EAAU,YAAc,OAAOK,CAAO,EACtCJ,EAAM,MAAM,MAAQM,EAAU,IAG1BF,EAAU,GAAKb,IAAqBU,EAAa,CACnD,IAAMS,GAAW,KAAK,IAAI,EAAInB,IAAqB,IAC7CoB,EAAOP,EAAUM,EAEjBE,GADYlB,EAAQU,GACFO,EAExB,GAAIC,EAAM,GACRX,EAAY,YAAc,KAAK,MAAMW,CAAG,EAAI,QACvC,CACL,IAAMC,EAAU,KAAK,MAAMD,EAAM,EAAE,EAC7BE,EAAU,KAAK,MAAMF,EAAM,EAAE,EACnCX,EAAY,YAAc,GAAGY,CAAO,KAAKC,CAAO,GAClD,CACF,CAEIT,GAAWE,IACbA,EAAU,YAAcF,EAE5B,CAEO,SAASU,IAA4B,CAC1C,IAAMnB,EAAU,SAAS,eAAe,kBAAkB,EACtDA,GACFA,EAAQ,UAAU,OAAO,QAAQ,EAEnCP,GAAwB,GACxBC,GAAyB,KACzBC,GAAoB,KACpB,SAAS,oBAAoB,UAAWW,EAAoB,CAC9D,CAEO,SAASc,IAAuB,CACjC1B,IACFA,GAAuB,EAEzByB,GAAoB,EACpBE,EAAU,sBAAuB,SAAS,CAC5C,CAEA,SAASf,GAAqB,EAAwB,CAChD,EAAE,MAAQ,UAAYb,IACxB2B,GAAe,CAEnB,CASO,SAASP,GACdS,EACAC,EACAC,EACAC,EAAmB,IACnBC,EAAmB,EACnBC,EAAiB,GACX,CACN,IAAMC,EAAY,YAAY,IAAI,EAC5BC,EAAQL,EAAMD,EAEpB,SAASO,EAAOC,EAA2B,CACzC,IAAMjB,EAAUiB,EAAcH,EACxBI,EAAW,KAAK,IAAIlB,EAAUW,EAAU,CAAC,EAGzCQ,EAAe,EAAI,KAAK,IAAI,EAAID,EAAU,CAAC,EAC3CxB,EAAUe,EAASM,EAAQI,EAEjCX,EAAQ,YAAcd,EAAQ,QAAQkB,CAAQ,EAAIC,EAE9CK,EAAW,GACb,sBAAsBF,CAAM,CAEhC,CAEA,sBAAsBA,CAAM,CAC9B,CAMA,eAAsBI,IAA+B,CACnD,IAAMC,EAAM,SAAS,eAAe,oBAAoB,EAClDC,EAAW,SAAS,eAAe,uBAAuB,EAEhE,GAAI,GAACD,GAAO,CAACC,GAGb,CAAAD,EAAI,SAAW,GACfA,EAAI,YAAc,sBAClBC,EAAS,YAAc,gDACvBA,EAAS,MAAM,MAAQ,wBAEvB,GAAI,CACF,IAAMC,EAAW,MAAM,MAAM,6BAA8B,CACzD,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,CAChD,CAAC,EAED,GAAI,CAACA,EAAS,GAAI,CAChB,IAAMC,EAAQ,MAAMD,EAAS,KAAK,EAClC,MAAM,IAAI,MAAMC,EAAM,QAAU,0BAA0B,CAC5D,CAEA,IAAMC,EAAS,MAAMF,EAAS,KAAK,EAGnCF,EAAI,YAAc,kBAClBC,EAAS,YAAcG,EAAO,SAAW,uEACzCH,EAAS,MAAM,MAAQ,iBACvBf,EAAU,gCAAiC,SAAS,EAGpD,WAAW,IAAM,CACfc,EAAI,SAAW,GACfA,EAAI,YAAc,2BAClBC,EAAS,YAAc,EACzB,EAAG,GAAI,CAET,OAASE,EAAO,CAEd,IAAME,EAAeF,aAAiB,MAAQA,EAAM,QAAU,gBAC9DH,EAAI,YAAc,gBAClBC,EAAS,YAAc,UAAUI,CAAY,GAC7CJ,EAAS,MAAM,MAAQ,gBACvBf,EAAU,6BAA6BmB,CAAY,GAAI,OAAO,EAG9D,WAAW,IAAM,CACfL,EAAI,SAAW,GACfA,EAAI,YAAc,0BACpB,EAAG,GAAI,CACT,EACF,CAOA,IAAIM,GAAkE,KAClEC,GAAgE,KAK7D,SAASC,GAASC,EAAqB,CAC5CC,GAAWD,CAAK,EAChB,aAAa,QAAQ,QAASA,CAAK,EACnCE,GAAoBF,CAAK,EACzBvB,EAAU,gBAAgBuB,CAAK,GAAI,UAAW,GAAI,CACpD,CAKA,SAASE,GAAoBC,EAA2B,CACtD,IAAMC,EAAW,SAAS,eAAe,gBAAgB,EACpDA,GAELA,EAAS,iBAAiB,eAAe,EAAE,QAAQb,GAAO,CACvCA,EAAI,aAAa,YAAY,IAC7BY,EACfZ,EAAI,UAAU,IAAI,QAAQ,EAE1BA,EAAI,UAAU,OAAO,QAAQ,CAEjC,CAAC,CACH,CAKO,SAASc,GAAkBC,EAAwB,CAGxD,GAFA,aAAa,QAAQ,cAAe,OAAOA,CAAO,CAAC,EAE/CA,EAAS,CACX,IAAMC,EAAW,SAAS,aAAa,QAAQ,iBAAiB,GAAK,KAAM,EAAE,EAC7EC,GAAiBD,CAAQ,EACzB9B,EAAU,uBAAwB,UAAW,GAAI,CACnD,MACEgC,GAAgB,EAChBhC,EAAU,wBAAyB,OAAQ,GAAI,CAEnD,CAKO,SAASiC,GAAmBpC,EAAuB,CACxD,aAAa,QAAQ,kBAAmB,OAAOA,CAAO,CAAC,EAGvD,IAAM8B,EAAW,SAAS,eAAe,mBAAmB,EACxDA,GACFA,EAAS,iBAAiB,kBAAkB,EAAE,QAAQb,GAAO,CACvC,SAASA,EAAI,aAAa,eAAe,GAAK,IAAK,EAAE,IACrDjB,EAClBiB,EAAI,UAAU,IAAI,QAAQ,EAE1BA,EAAI,UAAU,OAAO,QAAQ,CAEjC,CAAC,EAIiB,aAAa,QAAQ,aAAa,IAAM,SAE1DiB,GAAiBlC,CAAO,EAG1BG,EAAU,2BAA2BH,CAAO,IAAK,UAAW,GAAI,CAClE,CAKA,SAASkC,GAAiBlC,EAAuB,CAC/CmC,GAAgB,EAEhB,IAAME,EAAKrC,EAAU,IAErBuB,GAA2B,YAAY,IAAM,CAC3C,IAAMe,EAAe,SAAS,eAAe,WAAW,EACxD,GAAIA,GAAgBA,EAAa,UAAU,SAAS,QAAQ,EAAG,CAC7D,IAAMC,EAAkB,OAAe,eACjCC,EAAmB,OAAe,gBACpCD,GAAgBA,EAAe,EAC/BC,GAAiBA,EAAgB,CACvC,CACF,EAAGH,CAAE,EAGL,IAAMI,EAAY,KAAK,IAAIJ,EAAK,EAAG,GAAK,EACxCb,GAAyB,YAAY,IAAM,CACzC,IAAMc,EAAe,SAAS,eAAe,WAAW,EACxD,GAAIA,GAAgBA,EAAa,UAAU,SAAS,QAAQ,EAAG,CAC7D,IAAMI,EAAoB,OAAe,iBACrCA,GAAkBA,EAAiB,CACzC,CACF,EAAGD,CAAS,CACd,CAKA,SAASN,IAAwB,CAC3BZ,KACF,cAAcA,EAAwB,EACtCA,GAA2B,MAEzBC,KACF,cAAcA,EAAsB,EACpCA,GAAyB,KAE7B,CAKO,SAASmB,GAAkBX,EAAwB,CACxD,aAAa,QAAQ,qBAAsB,OAAOA,CAAO,CAAC,EAC1D7B,EAAU6B,EAAU,kCAAoC,wBAAyB,OAAQ,GAAI,CAC/F,CAKO,SAASY,GAAoBZ,EAAwB,CAC1D,aAAa,QAAQ,sBAAuB,OAAOA,CAAO,CAAC,EAC3D7B,EAAU6B,EAAU,wBAA0B,yBAA0B,OAAQ,GAAI,CACtF,CAmBO,SAASa,IAAqB,CAEnC,IAAMC,EAAa,aAAa,QAAQ,OAAO,GAAK,SACpDC,GAAoBD,CAAU,EAG9B,IAAME,EAAc,aAAa,QAAQ,aAAa,IAAM,QACtDC,EAAoB,SAAS,eAAe,qBAAqB,EACnEA,IACFA,EAAkB,QAAUD,GAI9B,IAAME,EAAW,SAAS,aAAa,QAAQ,iBAAiB,GAAK,KAAM,EAAE,EACvEC,EAAmB,SAAS,eAAe,mBAAmB,EAChEA,GACFA,EAAiB,iBAAiB,kBAAkB,EAAE,QAAQC,GAAO,CAC/C,SAASA,EAAI,aAAa,eAAe,GAAK,IAAK,EAAE,IACrDF,EAClBE,EAAI,UAAU,IAAI,QAAQ,EAE1BA,EAAI,UAAU,OAAO,QAAQ,CAEjC,CAAC,EAIH,IAAMC,EAAc,aAAa,QAAQ,oBAAoB,IAAM,OAC7DC,EAAgB,SAAS,eAAe,qBAAqB,EAC/DA,IACFA,EAAc,QAAUD,GAI1B,IAAME,EAAgB,aAAa,QAAQ,qBAAqB,IAAM,QAChEC,EAAgB,SAAS,eAAe,gBAAgB,EAC1DA,IACFA,EAAc,QAAUD,GAI1BE,GAAc,EAGVT,GACFU,GAAiBR,CAAQ,CAE7B,CAKA,eAAeO,IAA+B,CAC5C,IAAME,EAAY,SAAS,eAAe,aAAa,EACjDC,EAAa,SAAS,eAAe,WAAW,EAChDC,EAAmB,SAAS,eAAe,iBAAiB,EAG5DC,EAAc,SAAS,cAAc,0BAA0B,EACjEH,GAAaG,IACfH,EAAU,YAAcG,EAAY,aAAa,SAAS,GAAK,MAIjE,GAAI,CACF,IAAMC,EAAc,MAAM,MAAM,6BAA6B,EAC7D,GAAIA,EAAY,IAAMH,EAAY,CAChC,IAAMI,EAAO,MAAMD,EAAY,KAAK,EACpCH,EAAW,YAAc,OAAOI,EAAK,YAAY,QAAU,CAAC,CAC9D,CACF,MAAQ,CAER,CAGA,GAAI,CACF,IAAMC,EAAgB,MAAM,MAAM,gBAAgB,EAClD,GAAIA,EAAc,IAAMJ,EAAkB,CACxC,IAAMG,EAAO,MAAMC,EAAc,KAAK,EACtCJ,EAAiB,YAAc,OAAOG,EAAK,WAAW,QAAU,CAAC,CACnE,CACF,MAAQ,CAER,CACF,CAKO,SAASE,IAA8B,CAE5C,IAAMC,EAAQ,IAAI,cAAc,UAAW,CAAE,IAAK,GAAI,CAAC,EACvD,SAAS,cAAcA,CAAK,CAC9B,CAMO,SAASC,GAAUC,EAAwB,CAChD,SAAS,iBAAiB,cAAc,EAAE,QAAQC,GAAOA,EAAI,UAAU,OAAO,QAAQ,CAAC,EACvF,SAAS,iBAAiB,cAAc,EAAE,QAAQlB,GAAOA,EAAI,UAAU,OAAO,QAAQ,CAAC,EAEvF,IAAMmB,EAAa,SAAS,eAAeF,CAAO,EAclD,GAbIE,GACFA,EAAW,UAAU,IAAI,QAAQ,EAIhB,SAAS,iBAAiB,cAAc,EAChD,QAAQnB,GAAO,CACpBA,EAAI,aAAa,YAAY,EAAE,SAASiB,CAAO,GACjDjB,EAAI,UAAU,IAAI,QAAQ,CAE9B,CAAC,EAGGiB,IAAY,YAAa,CAE3B,IAAMG,EAAkB,OAAe,eACnCA,GAAgBA,EAAe,CACrC,SAAWH,IAAY,cAAe,CAEpC,IAAMI,EAAkB,OAAe,eACnCA,GAAgBA,EAAe,CACrC,SAAWJ,IAAY,WAAY,CAEjC,IAAMK,EAAqB,OAAe,kBACtCA,GAAmBA,EAAkB,CAC3C,CACF,CC5jBO,IAAMC,EAAmC,CAC9C,IAAK,KACL,OAAQ,KACR,KAAM,IACR,EAEWC,GAAiC,KAa5C,eAAeC,GAAeC,EAAaC,EAAa,EAAGC,EAAU,IAAyB,CAC5F,IAAIC,EAA0B,KAE9B,QAASC,EAAU,EAAGA,GAAWH,EAAYG,IAC3C,GAAI,CACF,IAAMC,EAAW,MAAM,MAAML,CAAG,EAChC,GAAI,CAACK,EAAS,GACZ,MAAM,IAAI,MAAM,QAAQA,EAAS,MAAM,KAAKA,EAAS,UAAU,EAAE,EAEnE,OAAOA,CACT,OAASC,EAAO,CACdH,EAAYG,EACRF,EAAUH,GAEZ,MAAM,IAAI,QAAQM,GAAW,WAAWA,EAASL,EAAU,KAAK,IAAI,EAAGE,CAAO,CAAC,CAAC,CAEpF,CAGF,MAAMD,GAAa,IAAI,MAAM,4BAA4B,CAC3D,CASA,eAAsBK,IAAgC,CACpD,GAAI,CAEF,IAAMC,EAAuB,MADZ,MAAMV,GAAe,kBAAkB,GACZ,KAAK,EAG7CU,EAAK,QAAUA,EAAK,OAAO,WAC7BX,GAAkBW,EAAK,OAAO,SAE7B,OAAe,iBAAmBA,EAAK,OAAO,UAIjD,IAAMC,EAAWC,GAAeF,EAAK,IAAI,OAAO,EAC1CG,EAAcD,GAAeF,EAAK,OAAO,OAAO,EAChDI,EAAYF,GAAeF,EAAK,KAAK,OAAO,EAG5CK,EAAa,SAAS,eAAe,gBAAgB,EAC3D,GAAI,CAACA,EAAY,OAIjB,GAFoBjB,EAAgB,MAAQ,KAI1CiB,EAAW,UAAY;AAAA;AAAA;AAAA,8CAGiBL,EAAK,IAAI,QAAQ,QAAQ,CAAC,CAAC;AAAA,YAC7DM,GAAaL,EAAUD,EAAK,IAAI,OAAO,CAAC;AAAA;AAAA;AAAA;AAAA,kCAIlBA,EAAK,IAAI,KAAK;AAAA;AAAA,4CAEJO,EAAeP,EAAK,IAAI,OAAO,CAAC;AAAA,iCAC3CA,EAAK,IAAI,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA,iDAKAA,EAAK,OAAO,QAAQ,QAAQ,CAAC,CAAC;AAAA,YACnEM,GAAaH,EAAaH,EAAK,OAAO,OAAO,CAAC;AAAA;AAAA;AAAA;AAAA,kCAIxBA,EAAK,OAAO,aAAa,QAAQ,CAAC,CAAC;AAAA;AAAA,4CAEzBO,EAAeP,EAAK,OAAO,OAAO,CAAC;AAAA,iCAC9CA,EAAK,OAAO,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA,+CAKLA,EAAK,KAAK,QAAQ,QAAQ,CAAC,CAAC;AAAA,YAC/DM,GAAaF,EAAWJ,EAAK,KAAK,OAAO,CAAC;AAAA;AAAA;AAAA;AAAA,kCAIpBA,EAAK,KAAK,QAAQ,QAAQ,CAAC,CAAC,eAAeA,EAAK,KAAK,SAAS,QAAQ,CAAC,CAAC;AAAA;AAAA,4CAE9DO,EAAeP,EAAK,KAAK,OAAO,CAAC;AAAA,iCAC5CA,EAAK,KAAK,OAAO;AAAA;AAAA;AAAA,UAGxCA,EAAK,QAAU;AAAA;AAAA;AAAA;AAAA,qBAITA,EAAK,QAAQ,cAAc,QAAQ,CAAC,CAAC;AAAA;AAAA;AAAA,qBAGrCA,EAAK,QAAQ,YAAY,QAAQ,CAAC,CAAC;AAAA;AAAA;AAAA,2BAG7BA,EAAK,QAAQ,aAAa,eAAUA,EAAK,QAAQ,aAAa;AAAA;AAAA;AAAA,UAGxE,EAAE;AAAA,UACJA,EAAK,MAAQA,EAAK,KAAK,SAAW,EAAI;AAAA;AAAA;AAAA,+CAGDA,EAAK,KAAK,QAAQ,QAAQ,CAAC,CAAC;AAAA,kCACzCA,EAAK,KAAK,OAAO,eAAeA,EAAK,KAAK,QAAQ;AAAA;AAAA,4CAExCO,EAAeP,EAAK,KAAK,OAAO,CAAC;AAAA,iCAC5CA,EAAK,KAAK,OAAO;AAAA;AAAA,YAEtCA,EAAK,KAAK,QAAU,GAAK,oFAA4E,EAAE;AAAA;AAAA,UAEvG,EAAE;AAAA,QAGR,QAAQ,IAAI,uCAAuC,EACnD,WAAW,IAAM,CACf,IAAMQ,EAAS,SAAS,eAAe,YAAY,EAC/CA,EACF,QAAQ,IAAI,qCAAsC,CAChD,MAAOA,EAAO,MAAM,MACpB,UAAWA,EAAO,UAClB,cAAe,OAAO,iBAAiBA,CAAM,EAAE,MAC/C,OAAQA,EAAO,aACjB,CAAC,EAED,QAAQ,MAAM,wCAAwC,CAE1D,EAAG,GAAG,MACD,CAEL,IAAMC,EAAa,SAAS,eAAe,WAAW,EAChDC,EAAgB,SAAS,eAAe,cAAc,EACtDC,EAAc,SAAS,eAAe,YAAY,EAEpDF,GAAcrB,EAAgB,MAAQ,MACxCwB,GAAaH,EAAYrB,EAAgB,IAAKY,EAAK,IAAI,QAAS,IAAK,EAAG,GAAG,EAEzEU,GAAiBtB,EAAgB,SAAW,MAC9CwB,GAAaF,EAAetB,EAAgB,OAAQY,EAAK,OAAO,QAAS,IAAK,EAAG,GAAG,EAElFW,GAAevB,EAAgB,OAAS,MAC1CwB,GAAaD,EAAavB,EAAgB,KAAMY,EAAK,KAAK,QAAS,IAAK,EAAG,GAAG,EAIhF,IAAMa,EAAS,SAAS,eAAe,SAAS,EAC1CC,EAAY,SAAS,eAAe,YAAY,EAChDC,EAAU,SAAS,eAAe,UAAU,EAE7CD,EAGH,QAAQ,IAAI,2BAA2Bd,EAAK,OAAO,OAAO,cAAec,CAAS,EAFlF,QAAQ,MAAM,+BAA+B,EAK3CD,IACFA,EAAO,MAAM,MAAQb,EAAK,IAAI,QAAU,IACxCa,EAAO,UAAY,qBAAqBN,EAAeP,EAAK,IAAI,OAAO,CAAC,IAEtEc,IACFA,EAAU,MAAM,MAAQd,EAAK,OAAO,QAAU,IAC9Cc,EAAU,UAAY,qBAAqBP,EAAeP,EAAK,OAAO,OAAO,CAAC,IAE5Ee,IACFA,EAAQ,MAAM,MAAQf,EAAK,KAAK,QAAU,IAC1Ce,EAAQ,UAAY,qBAAqBR,EAAeP,EAAK,KAAK,OAAO,CAAC,IAI5E,IAAMgB,EAAU,SAAS,cAAc,2BAA2B,EAC5DC,EAAa,SAAS,cAAc,2BAA2B,EAC/DC,EAAW,SAAS,cAAc,2BAA2B,EAEnE,GAAIF,EAAS,CACX,IAAMG,EAAgBH,EAAQ,cAAc,QAAQ,EAChDG,GAAeA,EAAc,OAAO,EACxC,IAAMC,EAAWJ,EAAQ,cAAc,QAAQ,EAC3CI,GACFA,EAAS,mBAAmB,WAAYd,GAAaL,EAAUD,EAAK,IAAI,OAAO,CAAC,CAEpF,CACA,GAAIiB,EAAY,CACd,IAAME,EAAgBF,EAAW,cAAc,QAAQ,EACnDE,GAAeA,EAAc,OAAO,EACxC,IAAMC,EAAWH,EAAW,cAAc,QAAQ,EAC9CG,GACFA,EAAS,mBAAmB,WAAYd,GAAaH,EAAaH,EAAK,OAAO,OAAO,CAAC,CAE1F,CACA,GAAIkB,EAAU,CACZ,IAAMC,EAAgBD,EAAS,cAAc,QAAQ,EACjDC,GAAeA,EAAc,OAAO,EACxC,IAAMC,EAAWF,EAAS,cAAc,QAAQ,EAC5CE,GACFA,EAAS,mBAAmB,WAAYd,GAAaF,EAAWJ,EAAK,KAAK,OAAO,CAAC,CAEtF,CACF,CAGAZ,EAAgB,IAAMY,EAAK,IAAI,QAC/BZ,EAAgB,OAASY,EAAK,OAAO,QACrCZ,EAAgB,KAAOY,EAAK,KAAK,QAGjC,MAAM,uBAAuB,EAC1B,KAAKqB,GAAOA,EAAI,KAAK,CAAC,EACtB,KAAKC,GAAa,CACjB,QAAQ,IAAI,2BAA4BA,CAAS,EAC7CA,GAAaA,EAAU,KAAOA,EAAU,IAAI,QAAU,GACxDC,GAAc,gBAAiBD,EAAU,IAAK,SAAS,EACvDC,GAAc,mBAAoBD,EAAU,OAAQ,SAAS,EAC7DC,GAAc,iBAAkBD,EAAU,KAAM,SAAS,GAEzD,QAAQ,KAAK,+BAAgCA,CAAS,CAE1D,CAAC,EACA,MAAME,GAAO,QAAQ,MAAM,gCAAiCA,CAAG,CAAC,EAGnE,IAAMC,EAAgB,SAAS,eAAe,aAAa,EACvDA,IACFA,EAAc,UAAY;AAAA;AAAA;AAAA,gBAGhBzB,EAAK,OAAO,SAAS,QAAQ,CAAC,CAAC;AAAA;AAAA;AAAA;AAAA,gBAI/BA,EAAK,OAAO,QAAQ,QAAQ,CAAC,CAAC;AAAA;AAAA;AAAA;AAAA,gBAI9BA,EAAK,KAAK,SAAS,QAAQ,CAAC,CAAC;AAAA;AAAA;AAAA;AAAA,gBAI7BA,EAAK,KAAK,QAAQ,QAAQ,CAAC,CAAC;AAAA;AAAA,SAMxC,IAAM0B,EAAc1B,EAAK,KAAK,QAAU,GACpC,yDAA+CA,EAAK,KAAK,QAAQ,QAAQ,CAAC,CAAC,iDAC3E,GACE2B,EAAgB3B,EAAK,OAAO,QAAU,GACxC,2DAAiDA,EAAK,OAAO,QAAQ,QAAQ,CAAC,CAAC,YAC/E,GAGJ,MAAM4B,GAAuBF,EAAaC,CAAa,CAEzD,OAAS9B,EAAO,CACd,IAAMQ,EAAa,SAAS,eAAe,gBAAgB,EACvDA,IACFA,EAAW,UAAY,iDAAkDR,EAAgB,OAAO,SAEpG,CACF,CAKA,SAASgC,GAAeC,EAAeC,EAAyB,CAE9D,OAAQA,EAAS,CACf,IAAK,YAAa,MAAO,UACzB,IAAK,OAAQ,MAAO,UACpB,IAAK,OAAQ,MAAO,UACpB,IAAK,OAAQ,MAAO,UACpB,QAEE,OAAID,GAAS,GAAW,UACpBA,GAAS,GAAW,UACpBA,GAAS,GAAW,UACjB,SACX,CACF,CAKA,SAASE,GAAuBF,EAAeC,EAAyB,CAYtE,IAAME,EAAa,IAAc,IAAWH,EAAQ,IAG9CI,EAAaC,KAAiBA,GAAM,IAAM,KAAK,GAAK,IAEpDC,EAAS,GAAS,GAAS,KAAK,IAAIF,EAAU,GAAU,CAAC,EACzDG,EAAS,GAAS,GAAS,KAAK,IAAIH,EAAU,GAAU,CAAC,EACzDI,EAAO,GAAS,GAAS,KAAK,IAAIJ,EAAU,GAAQ,CAAC,EACrDK,EAAO,GAAS,GAAS,KAAK,IAAIL,EAAU,GAAQ,CAAC,EACrDM,EAAS,GAAS,GAAS,KAAK,IAAIN,EAAUD,CAAU,CAAC,EACzDQ,EAAS,GAAS,GAAS,KAAK,IAAIP,EAAUD,CAAU,CAAC,EAGzDS,EAA8B,EAC9BC,EAAiBV,EAAa,IAAc,IAAM,EAAI,EAEtDW,EAAQf,GAAeC,EAAOC,CAAO,EAGrCc,EAAS,KAAKT,CAAM,IAAIC,CAAM,cAA4BK,CAAU,MAAMJ,CAAI,IAAIC,CAAI,GAGtFO,EAAYhB,EAAQ,EACtB,KAAKM,CAAM,IAAIC,CAAM,cAA4BM,CAAa,MAAMH,CAAM,IAAIC,CAAM,GACpF,GAGEM,EAAQhB,IAAY,YAAc,SAC1BA,IAAY,OAAS,YACrBA,IAAY,OAAS,eAAO,YAE1C,MAAO;AAAA;AAAA;AAAA;AAAA,aAIIc,CAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gDAS6BD,CAAK;AAAA,kDACHA,CAAK;AAAA;AAAA;AAAA,QAG/Cd,EAAQ,EAAI;AAAA;AAAA,aAEPgB,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAOZ,EAAE;AAAA;AAAA,kFAEyFF,CAAK;AAAA,UAChGd,CAAK;AAAA;AAAA;AAAA,UAGLC,EAAQ,YAAY,CAAC;AAAA;AAAA;AAAA,UAGrBgB,CAAK;AAAA;AAAA;AAAA,GAIf,CAKA,eAAsBC,IAAiC,CACrD,IAAMC,EAAY,SAAS,eAAe,cAAc,EACxD,GAAKA,EAEL,GAAI,CAEF,IAAMjD,EAAO,MADI,MAAMV,GAAe,oBAAoB,GAC9B,KAAK,EAG3B4D,EAAWlB,GAAuBhC,EAAK,MAAOA,EAAK,OAAO,EAG5DmD,EAAa,GACbnD,EAAK,QAAUA,EAAK,OAAO,OAAS,EACtCmD,EAAa;AAAA;AAAA;AAAA;AAAA,cAILnD,EAAK,OAAO,IAAKoD,GAAkB;AAAA,2BACtBA,EAAM,SAAS,UAAU,EAAI,WAAa,SAAS;AAAA,kBAC5DA,EAAM,SAAS,UAAU,EAAI,YAAO,cAAI,IAAIA,CAAK;AAAA;AAAA,aAEtD,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA,QAKjBD,EAAa;AAAA;AAAA;AAAA;AAAA;AAAA,QAQfF,EAAU,UAAY;AAAA;AAAA,UAEhBC,CAAQ;AAAA;AAAA,QAEVC,CAAU;AAAA,KAEhB,OAAStD,EAAO,CACdoD,EAAU,UAAY,kDAAmDpD,EAAgB,OAAO,QAClG,CACF,CAKA,eAAsBwD,IAAkC,CACtD,IAAMC,EAAe,SAAS,eAAe,eAAe,EAC5D,GAAKA,EAEL,GAAI,CAEF,IAAMtD,EAAO,MADI,MAAMV,GAAe,+BAA+B,GACzC,KAAK,EAE7BiE,EAAO,gCACXA,GAAQ,+GACRA,GAAQ,6BACRvD,EAAK,QAAQ,QAAQ,CAACwD,EAAmBC,IAAgB,CACvDF,GAAQ;AAAA;AAAA,sCAEwBE,EAAM,CAAC;AAAA,sCACPD,EAAK,IAAI;AAAA,uCACRA,EAAK,WAAW;AAAA;AAAA,OAGnD,CAAC,EACDD,GAAQ,eAERA,GAAQ,4DACRA,GAAQ,kHACRA,GAAQ,6BACRvD,EAAK,WAAW,QAAQ,CAACwD,EAAmBC,IAAgB,CAC1DF,GAAQ;AAAA;AAAA,sCAEwBE,EAAM,CAAC;AAAA,sCACPD,EAAK,IAAI;AAAA,uCACRA,EAAK,UAAU,QAAQ,CAAC,CAAC;AAAA;AAAA,OAG5D,CAAC,EACDD,GAAQ,eAERD,EAAa,UAAYC,CAC3B,OAAS1D,EAAO,CACdyD,EAAa,UAAY,+CAAgDzD,EAAgB,OAAO,QAClG,CACF,CAKA,eAAsB+B,GAAuBF,EAAsB,GAAIC,EAAwB,GAAmB,CAChH,IAAM+B,EAAY,SAAS,eAAe,oBAAoB,EAC9D,GAAKA,EAEL,GAAI,CAEF,IAAM1D,EAAO,MADI,MAAM,MAAM,2BAA2B,GAC5B,KAAK,EAE7B2D,EACJ,GAAI3D,EAAK,SAAW,QAClB2D,EAAc,6BACT,CACL,IAAMC,EAAU5D,EAAK,iBAAmB,UAClC6D,EAAW7D,EAAK,0BAA4B,GAClD2D,EAAc,WAAWC,CAAO,0DAA0DC,CAAQ,UACpG,CAEAH,EAAU,UAAY;AAAA,iCACOC,CAAW;AAAA;AAAA,QAEpCjC,CAAW;AAAA,QACXC,CAAa;AAAA,QACb,CAACD,GAAe,CAACC,EAAgB,+DAA4D,EAAE;AAAA,KAErG,MAAgB,CAEd+B,EAAU,UAAY;AAAA;AAAA;AAAA,QAGlBhC,CAAW;AAAA,QACXC,CAAa;AAAA,QACb,CAACD,GAAe,CAACC,EAAgB,+DAA4D,EAAE;AAAA,KAErG,CACF,CASO,SAASJ,GAAcuC,EAAkB9D,EAAgB4C,EAAgB,UAAiB,CAC/F,IAAMmB,EAAS,SAAS,eAAeD,CAAQ,EAC/C,GAAI,CAACC,EAAQ,CACX,QAAQ,KAAK,qBAAqBD,CAAQ,EAAE,EAC5C,MACF,CACA,GAAI,CAAC9D,GAAQA,EAAK,OAAS,EAAG,CAC5B,QAAQ,KAAK,yBAAyB8D,CAAQ,KAAK9D,EAAOA,EAAK,OAAS,CAAC,SAAS,EAClF,MACF,CAEA,IAAMgE,EAAMD,EAAO,WAAW,IAAI,EAClC,GAAI,CAACC,EAAK,OAEV,IAAMC,EAAQF,EAAO,MACfG,EAASH,EAAO,OAGtBC,EAAI,UAAU,EAAG,EAAGC,EAAOC,CAAM,EAGjC,IAAMC,EAAM,KAAK,IAAI,GAAGnE,CAAI,EAEtBoE,EADM,KAAK,IAAI,GAAGpE,CAAI,EACRmE,GAAO,EAG3BH,EAAI,UAAU,EACdA,EAAI,YAAcpB,EAClBoB,EAAI,UAAY,IAChBA,EAAI,SAAW,QAEfhE,EAAK,QAAQ,CAACqE,EAAOC,IAAU,CAC7B,IAAMC,EAAKD,GAAStE,EAAK,OAAS,GAAMiE,EAClCO,EAAIN,GAAWG,EAAQF,GAAOC,EAASF,EAEzCI,IAAU,EACZN,EAAI,OAAOO,EAAGC,CAAC,EAEfR,EAAI,OAAOO,EAAGC,CAAC,CAEnB,CAAC,EAEDR,EAAI,OAAO,CACb,CAKO,SAAS9D,GAAeuE,EAA8C,CAC3E,GAAI,CAACA,GAAWA,EAAQ,OAAS,EAAG,MAAO,UAE3C,IAAMC,EAASD,EAAQA,EAAQ,OAAS,CAAC,EACnCE,EAAWF,EAAQA,EAAQ,OAAS,CAAC,EACrCG,EAAQF,EAASC,EAEvB,OAAI,KAAK,IAAIC,CAAK,EAAI,GAAY,UAC3BA,EAAQ,EAAI,KAAO,MAC5B,CAKO,SAAStE,GAAauE,EAAkCJ,EAA2B,CACxF,GAAI,CAACA,GAAWA,EAAQ,OAAS,EAAG,MAAO,GAE3C,IAAMC,EAASD,EAAQA,EAAQ,OAAS,CAAC,EACnCE,EAAWF,EAAQA,EAAQ,OAAS,CAAC,EACrCG,EAAQ,KAAK,IAAIF,EAASC,CAAQ,EAAE,QAAQ,CAAC,EAQnD,MAAO,sBAAsBE,CAAK,KANK,CACrC,GAAI,SACJ,KAAM,SACN,QAAS,QACX,EAE8CA,CAAK,CAAC,IAAID,CAAK,UAC/D,CAKO,SAASrE,EAAeuE,EAAyB,CACtD,OAAIA,EAAU,GAAW,SACrBA,EAAU,GAAW,UAClB,EACT,CAMA,eAAsBC,IAAqC,CACzD,IAAMC,EAAM,SAAS,cAAc,mBAAmB,EAChDC,EAAeD,GAAK,UAE1B,GAAI,CAEEA,IACFA,EAAI,SAAW,GACfA,EAAI,UAAY,yBAIlBE,EAAU,2BAA4B,MAAM,EAG5C,IAAMtF,EAAW,MAAM,MAAM,yBAAyB,EAEtD,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,qBAAqB,EAGvC,IAAMuF,EAAS,MAAMvF,EAAS,KAAK,EAGnC,MAAM,QAAQ,IAAI,CAChBG,GAAe,EACfiD,GAAgB,EAChBK,GAAiB,CACnB,CAAC,EAGD,IAAM+B,EAAaD,EAAO,QAAQ,QAAU,EAC5C,GAAIC,IAAe,EACjBF,EAAU,+CAA2C,SAAS,MACzD,CACLA,EAAU,SAASE,CAAU,QAAQA,EAAa,EAAI,IAAM,EAAE,yCAA0C,SAAS,EAEjH,IAAMC,EAAa,OAAe,QAC9BA,GACF,WAAW,IAAMA,EAAU,aAAa,EAAG,IAAI,CAEnD,CAEF,OAASxF,EAAO,CACd,QAAQ,MAAM,sBAAuBA,CAAK,EAC1CqF,EAAU,uDAAwD,OAAO,CAC3E,QAAE,CAEIF,GAAOC,IACTD,EAAI,SAAW,GACfA,EAAI,UAAYC,EAEpB,CACF,CCxoBO,SAASK,GAAeC,EAAyB,CACtD,GAAIA,EAAU,GACZ,MAAO,GAAGA,EAAQ,QAAQ,CAAC,CAAC,IACvB,GAAIA,EAAU,KAAM,CACzB,IAAMC,EAAU,KAAK,MAAMD,EAAU,EAAE,EACjCE,EAAO,KAAK,MAAMF,EAAU,EAAE,EACpC,MAAO,GAAGC,CAAO,KAAKC,CAAI,GAC5B,KAAO,CACL,IAAMC,EAAQ,KAAK,MAAMH,EAAU,IAAI,EACjCC,EAAU,KAAK,MAAOD,EAAU,KAAQ,EAAE,EAChD,MAAO,GAAGG,CAAK,KAAKF,CAAO,GAC7B,CACF,CAuBO,SAASG,EAAWC,EAAqB,CAC9C,IAAMC,EAAM,SAAS,cAAc,KAAK,EACxC,OAAAA,EAAI,YAAcD,EACXC,EAAI,SACb,CCxEA,IAAMC,GAAc,yBAOb,SAASC,IAA4C,CAC1D,GAAI,CACF,IAAMC,EAAO,aAAa,QAAQC,EAAW,EAC7C,OAAKD,EACE,KAAK,MAAMA,CAAI,EADJ,CAAC,CAErB,OAASE,EAAO,CACd,eAAQ,MAAM,kCAAmCA,CAAK,EAC/C,CAAC,CACV,CACF,CAKA,SAASC,GAAmBC,EAAoC,CAC9D,GAAI,CACF,aAAa,QAAQH,GAAa,KAAK,UAAUG,CAAK,CAAC,CACzD,OAASF,EAAO,CACd,QAAQ,MAAM,kCAAmCA,CAAK,CACxD,CACF,CAKO,SAASG,GAAoBC,EAAqBC,EAA+B,CACtF,IAAMH,EAAQL,GAAmB,EAG3BC,EAAOI,EAAME,CAAW,GAAK,CAAE,KAAM,CAAC,EAAG,QAAS,CAAE,EAG1DN,EAAK,KAAK,KAAK,KAAK,MAAMO,CAAe,CAAC,EAGtCP,EAAK,KAAK,OAAS,IACrBA,EAAK,KAAOA,EAAK,KAAK,MAAM,EAAgB,GAI9C,IAAMQ,EAAMR,EAAK,KAAK,OAAO,CAACS,EAAKC,IAASD,EAAMC,EAAM,CAAC,EAAIV,EAAK,KAAK,OACvEA,EAAK,QAAU,KAAK,MAAMQ,EAAM,GAAG,EAAI,IAEvCJ,EAAME,CAAW,EAAIN,EACrBG,GAAmBC,CAAK,CAC1B,CAKO,SAASO,GAAmBL,EAA6B,CAE9D,IAAMN,EADQD,GAAmB,EACdO,CAAW,EAE9B,MAAI,CAACN,GAAQA,EAAK,KAAK,SAAW,EACzB,GAGFA,EAAK,OACd,CAKO,SAASY,GAAkBN,EAAoC,CAEpE,IAAMN,EADQD,GAAmB,EACdO,CAAW,EAE9B,GAAI,CAACN,GAAQA,EAAK,KAAK,SAAW,EAChC,OAAO,KAIT,IAAMa,EAAS,CAAC,GAAGb,EAAK,IAAI,EAAE,KAAK,CAACc,EAAGC,IAAMD,EAAIC,CAAC,EAC5CC,EAAM,KAAK,MAAMH,EAAO,OAAS,CAAC,EAExC,GAAIA,EAAO,OAAS,IAAM,EAAG,CAE3B,IAAMC,EAAID,EAAOG,EAAM,CAAC,EAClBD,EAAIF,EAAOG,CAAG,EACpB,OAAI,OAAOF,GAAM,UAAY,OAAOC,GAAM,SAAiB,MACnDD,EAAIC,GAAK,CACnB,CAGA,IAAME,EAAIJ,EAAOG,CAAG,EACpB,OAAO,OAAOC,GAAM,SAAWA,EAAI,IACrC,CAMO,SAASC,GAA0BZ,EAAoC,CAC5E,IAAMa,EAASP,GAAkBN,CAAW,EAE5C,GAAIa,IAAW,KACb,OAAO,KAIT,GAAIA,EAAS,GACX,MAAO,GAAG,KAAK,MAAMA,CAAM,CAAC,IACvB,GAAIA,EAAS,KAAM,CACxB,IAAMC,EAAU,KAAK,MAAMD,EAAS,EAAE,EAChCE,EAAU,KAAK,MAAMF,EAAS,EAAE,EACtC,OAAOE,EAAU,EAAI,GAAGD,CAAO,KAAKC,CAAO,IAAM,GAAGD,CAAO,GAC7D,KAAO,CACL,IAAME,EAAQ,KAAK,MAAMH,EAAS,IAAI,EAChCC,EAAU,KAAK,MAAOD,EAAS,KAAQ,EAAE,EAC/C,OAAOC,EAAU,EAAI,GAAGE,CAAK,KAAKF,CAAO,IAAM,GAAGE,CAAK,GACzD,CACF,CAKO,SAASC,GACdC,EACAC,EACAC,EACQ,CACR,IAAIC,EAAM,EAGV,QAAWC,KAAQJ,EACjBG,GAAOhB,GAAmBiB,CAAI,EAIhC,GAAIH,EAAoB,CACtB,IAAMI,EAAclB,GAAmBc,CAAkB,EAInDK,EAAoB,EADT,KAAK,IAAI,EAAG,KAAK,IAAI,EAAGJ,CAAwB,CAAC,EAGlEC,GAAOE,EAAcC,CACvB,CAEA,OAAO,KAAK,MAAMH,CAAG,CACvB,CCtJO,IAAII,GAAoB,GACpBC,GAAwB,EACxBC,EAAwC,CAAC,EAGzCC,EAAqB,EACrBC,GAAiB,EACjBC,EAAwB,EACxBC,EAAkB,EAClBC,GAA2B,CAAC,EAC5BC,GAAuC,KACvCC,GAAqC,KACrCC,EAAoC,KACpCC,GAAiC,CAAC,EAGzCC,GAAsC,CAAC,EAGvCC,GAAgC,KAChCC,EAAmC,IAAI,IAGrCC,GAA+B,IAAI,IAAI,CAC3C,UACA,qBACA,gBACA,eACF,CAAC,EAGKC,GAAmE,CACvE,oBAAqB,CAAE,KAAM,YAAM,MAAO,CAAE,EAC5C,oBAAqB,CAAE,KAAM,YAAM,MAAO,CAAE,EAC5C,OAAU,CAAE,KAAM,eAAM,MAAO,CAAE,EACjC,qBAAsB,CAAE,KAAM,YAAM,MAAO,CAAE,EAC7C,gBAAiB,CAAE,KAAM,kBAAO,MAAO,CAAE,EACzC,gBAAiB,CAAE,KAAM,YAAM,MAAO,CAAE,EACxC,QAAW,CAAE,KAAM,YAAM,MAAO,CAAE,CACpC,EAGA,SAASC,IAA2B,CAClC,IAAMC,EAAQ,aAAa,QAAQ,6BAA6B,EAChE,GAAIA,EACF,GAAI,CACFJ,EAAsB,IAAI,IAAI,KAAK,MAAMI,CAAK,CAAC,CACjD,MAAQ,CACNJ,EAAsB,IAAI,IAAIC,EAA4B,CAC5D,MAEAD,EAAsB,IAAI,IAAIC,EAA4B,CAE9D,CAGA,SAASI,IAA2B,CAClC,aAAa,QAAQ,8BAA+B,KAAK,UAAU,CAAC,GAAGL,CAAmB,CAAC,CAAC,CAC9F,CASA,eAAsBM,IAAgC,CACpD,GAAI,CAEF,IAAMC,EAAc,KAAK,IAAI,EAEvBC,EAAO,MADI,MAAM,MAAM,iCAAiCD,CAAW,EAAE,GAC/C,KAAK,EAEjC,GAAI,CAACC,EAAK,YAAcA,EAAK,WAAW,SAAW,EAAG,CACpD,IAAMC,EAAgB,SAAS,eAAe,iBAAiB,EAC3DA,IACFA,EAAc,UAAY,oDAE5B,MACF,CAEArB,EAAgBoB,EAAK,WAGrBpB,EAAc,KAAK,CAACsB,EAAGC,IACjBD,EAAE,WAAaC,EAAE,SACZD,EAAE,KAAK,cAAcC,EAAE,IAAI,EAE7BD,EAAE,SAAS,cAAcC,EAAE,QAAQ,CAC3C,EAGD,IAAIC,EAAyC,CAAC,EAC9C,GAAI,CAGFA,GADoB,MADI,MAAM,MAAM,2BAA2B,GACrB,KAAK,GACf,YAAc,CAAC,EAC/Cd,GAAiBc,CACnB,OAASC,EAAO,CACd,QAAQ,KAAK,yCAA0CA,CAAK,CAC9D,CAGAC,GAAU,EAAE,MAAM,IAAM,CAAC,CAAC,EAG1B,IAAIC,EAAO,GAGX3B,EAAc,IAAI4B,GAAM,CACtB,IAAMC,EAAYL,EAAkBI,EAAG,EAAE,EAGnCE,EAAkBD,GAAW,iBAAmBE,GAA0BH,EAAG,EAAE,EAC/EI,EAAeF,EACjB,qCAA2BA,CAAe,YAC1C,GAEAG,EAAc,GAClB,GAAIJ,GAAaA,EAAU,kBAAmB,CAC5C,IAAMK,EAAaL,EAAU,QAAU,SAAM,SACvCM,EAAcN,EAAU,QAAU,uBAAyB,qBACjEI,EAAc;AAAA,wCACWJ,EAAU,iBAAiB,iCAAiCM,CAAW,KAAKD,CAAU,UAAUF,CAAY;AAAA,eAEvI,MAEEC,EAAc;AAAA,0DAC6BD,IAFnBA,GAAgB,kGAEkC;AAAA,gBAK5E,IAAII,EAAc,GAClB,GAAIR,EAAG,KAAOA,EAAG,MAASA,EAAG,aAAeA,EAAG,YAAY,OAAS,EAAI,CACtE,IAAMS,EAAU,MAAM,QAAQT,EAAG,WAAW,GAAKA,EAAG,YAAY,OAAS,EACnEU,EAAa,CAAC,CAACV,EAAG,KAAK,QACvBW,EAAc,MAAM,QAAQX,EAAG,KAAK,QAAQ,GAAKA,EAAG,IAAK,SAAS,OAAS,EAC3EY,EAAc,MAAM,QAAQZ,EAAG,MAAM,QAAQ,GAAKA,EAAG,KAAM,SAAS,OAAS,EAC7Ea,EAAc,CAAC,CAACb,EAAG,MAAM,SAK/B,GAFsBS,GAAWC,GAAcC,GAAeC,GAAeC,EAE1D,CACjB,IAAMC,GAAgBL,EAClB;AAAA;AAAA;AAAA;AAAA,oBAIMT,EAAG,YAAa,IAAKe,GAAS,OAAOC,EAAW,OAAOD,CAAI,CAAC,CAAC,OAAO,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA,cAIpF,GAEEE,GAAcP,EAChB,gCAAgCM,EAAW,OAAOhB,EAAG,IAAK,OAAO,CAAC,CAAC,OACnE,GAEEkB,GAAeP,EACjBX,EAAG,IAAK,SACL,IACEmB,GACC,eAAeH,EAAW,OAAOG,EAAQ,OAAO,CAAC,CAAC,gBAAgBH,EAAW,OAAOG,EAAQ,WAAW,CAAC,CAAC,OAC7G,EACC,KAAK,EAAE,EACV,GAEEC,GAAeR,EACjBZ,EAAG,KAAM,SACN,IAAKqB,GASG,OAPLA,EAAQ,OAAS,WACb,SACAA,EAAQ,OAAS,UACf,eACAA,EAAQ,OAAS,YACf,eACA,cACQ,IAAIL,EAAW,OAAOK,EAAQ,WAAW,CAAC,CAAC,OAC9D,EACA,KAAK,EAAE,EACV,GAEEC,GAAeT,EACjB,yEAA+DG,EAAW,OAAOhB,EAAG,KAAM,QAAQ,CAAC,CAAC,OACpG,GAEJQ,EAAc;AAAA;AAAA;AAAA;AAAA,kBAINM,EAAa;AAAA,kBACbG,EAAW;AAAA,kBACXN,EAAc,yEAAkEO,EAAY,cAAgB,EAAE;AAAA,kBAC9GN,GAAeC,EAAc,yEAAoED,EAAc,OAAOQ,EAAY,QAAU,EAAE,GAAGE,EAAY,SAAW,EAAE;AAAA;AAAA;AAAA,WAIpL,CACF,CAEA,MAAO;AAAA,yDAC4CtB,EAAG,EAAE,oBAAoBA,EAAG,QAAQ;AAAA,0CACnDA,EAAG,EAAE,YAAYA,EAAG,EAAE;AAAA,mBAC7CA,EAAG,YAAc,UAAY,EAAE;AAAA;AAAA;AAAA,gBAGlCA,EAAG,IAAI;AAAA,gBACPA,EAAG,YAAc,qDAAuD,8CAA8C;AAAA;AAAA,iBAErHA,EAAG,WAAW;AAAA,cACjBQ,CAAW;AAAA,cACXH,CAAW;AAAA;AAAA;AAAA,OAIrB,CAAC,EAGDlB,GAAmB,EAGnB,IAAMoC,EAAa,CAAC,GAAG,IAAI,IAAInD,EAAc,IAAI4B,GAAMA,EAAG,QAAQ,CAAC,CAAC,EAAE,KAAK,CAACN,EAAGC,IAAM,CACnF,IAAM6B,EAAStC,GAAgBQ,CAAC,GAAG,OAAS,GACtC+B,EAASvC,GAAgBS,CAAC,GAAG,OAAS,GAC5C,OAAO6B,EAASC,CAClB,CAAC,EAGKC,EAAiBtD,EAAc,OAAO4B,GAAMA,EAAG,WAAW,EAG1D2B,EAAoB;AAAA;AAAA;AAAA,iBAGbvD,EAAc,MAAM;AAAA;AAAA,UAE3BmD,EAAW,IAAIK,GAAO,CACtB,IAAMC,EAAQzD,EAAc,OAAO4B,GAAMA,EAAG,WAAa4B,CAAG,EAAE,OACxDE,EAAO5C,GAAgB0C,CAAG,GAAG,MAAQ,YAC3C,MAAO,sDAAsDA,CAAG,6CAA6CA,CAAG;AAAA,cAC5GE,CAAI,IAAIF,CAAG,KAAKC,CAAK;AAAA,oBAE3B,CAAC,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAYTE,EAAsB,CAAC/B,EAASgC,EAAuB,KAAkB,CAC7E,IAAM/B,EAAYL,EAAkBI,EAAG,EAAE,EACnCE,EAAkBD,GAAW,iBAAmBE,GAA0BH,EAAG,EAAE,EAC/EI,EAAeF,EAAkB,qCAA2BA,CAAe,YAAc,GAE3FG,EAAc,GAClB,GAAIJ,GAAaA,EAAU,kBAAmB,CAC5C,IAAMK,EAAaL,EAAU,QAAU,SAAM,SACvCM,EAAcN,EAAU,QAAU,uBAAyB,qBACjEI,EAAc;AAAA,wCACWJ,EAAU,iBAAiB,iCAAiCM,CAAW,KAAKD,CAAU,UAAUF,CAAY;AAAA,eAEvI,MACEC,EAAc;AAAA,0DAC6BD,GAAgB,+DAAgD;AAAA,gBAI7G,IAAII,EAAc,GAClB,GAAIR,EAAG,KAAOA,EAAG,MAASA,EAAG,aAAeA,EAAG,YAAY,OAAS,EAAI,CACtE,IAAIiC,EAAiB,GAGrB,GAAIjC,EAAG,IAAK,CAMV,GALAiC,GAAkB,8BAClBA,GAAkB,mCACdjC,EAAG,IAAI,UACTiC,GAAkB,kCAAkCjB,EAAWhB,EAAG,IAAI,OAAO,CAAC,UAE5EA,EAAG,IAAI,UAAYA,EAAG,IAAI,SAAS,OAAS,EAAG,CACjDiC,GAAkB,OAClB,QAAWd,KAAWnB,EAAG,IAAI,SAC3BiC,GAAkB,eAAejB,EAAWG,EAAQ,OAAO,CAAC,aAAaH,EAAWG,EAAQ,WAAW,CAAC,QAE1Gc,GAAkB,OACpB,CACAA,GAAkB,QACpB,CAGA,GAAIjC,EAAG,KAAM,CAGX,GAFAiC,GAAkB,+BAClBA,GAAkB,oCACdjC,EAAG,KAAK,UAAYA,EAAG,KAAK,SAAS,OAAS,EAAG,CACnDiC,GAAkB,OAClB,QAAWZ,KAAWrB,EAAG,KAAK,SAAU,CACtC,IAAM8B,EAAOT,EAAQ,OAAS,WAAa,SAC/BA,EAAQ,OAAS,UAAY,eAC7BA,EAAQ,OAAS,YAAc,SAC/BA,EAAQ,OAAS,UAAY,SAAM,eAC/CY,GAAkB,OAAOH,CAAI,IAAId,EAAWK,EAAQ,WAAW,CAAC,OAClE,CACAY,GAAkB,OACpB,CACIjC,EAAG,KAAK,WACViC,GAAkB,2EAAiEjB,EAAWhB,EAAG,KAAK,QAAQ,CAAC,SAEnH,CAGA,GAAIA,EAAG,aAAeA,EAAG,YAAY,OAAS,EAAG,CAC/CiC,GAAkB,+BAClBA,GAAkB,iCAClBA,GAAkB,OAClB,QAAWlB,KAAQf,EAAG,YACpBiC,GAAkB,OAAOjB,EAAWD,CAAI,CAAC,QAE3CkB,GAAkB,QAClBA,GAAkB,QACpB,CAEAzB,EAAc,0IAAgIyB,CAAc,kBAC9J,CAEA,MAAO;AAAA,yDAC4CjC,EAAG,EAAE,oBAAoBA,EAAG,QAAQ;AAAA,0CACnDA,EAAG,EAAE,YAAYA,EAAG,EAAE,KAAKA,EAAG,YAAc,UAAY,EAAE;AAAA;AAAA,kBAElFA,EAAG,IAAI,IAAIA,EAAG,YAAc,qDAAuD,8CAA8C;AAAA,iBAClIA,EAAG,WAAW;AAAA,cACjBQ,CAAW;AAAA,cACXH,CAAW;AAAA;AAAA;AAAA,OAIrB,EAGAN,EAAO4B,EAGHD,EAAe,OAAS,IAC1B3B,GAAQ;AAAA;AAAA;AAAA;AAAA,6DAI+C2B,EAAe,MAAM;AAAA;AAAA,QAG5EA,EAAe,QAAQ1B,GAAM,CAC3BD,GAAQgC,EAAoB/B,EAAI,EAAI,CACtC,CAAC,GAIH,QAAWkC,KAAYX,EAAY,CACjC,IAAMY,EAAc/D,EAAc,OAAO4B,GAAMA,EAAG,WAAakC,GAAY,CAAClC,EAAG,WAAW,EAC1F,GAAImC,EAAY,SAAW,EAAG,SAE9B,IAAML,EAAO5C,GAAgBgD,CAAQ,GAAG,MAAQ,YAC1CE,EAAcpD,EAAoB,IAAIkD,CAAQ,EAEpDnC,GAAQ;AAAA,sCACwBqC,EAAc,YAAc,EAAE,oBAAoBF,CAAQ;AAAA;AAAA,qDAE3CA,CAAQ;AAAA,gGACmCE,EAAc,SAAM,QAAG;AAAA,6CAC1EN,CAAI;AAAA,oBAC7BI,CAAQ;AAAA,6EACiDC,EAAY,MAAM;AAAA;AAAA,QAIzFA,EAAY,QAAQnC,GAAM,CACxB,IAAMqC,EAAYD,EAAc,4CAA8C,GAC9ErC,GAAQgC,EAAoB/B,CAAE,EAAE,QAAQ,qBAAsB,UAAUqC,CAAS,cAAc,CACjG,CAAC,CACH,CAEA,IAAM5C,EAAgB,SAAS,eAAe,iBAAiB,EAC3DA,IACFA,EAAc,UAAYM,GAG5B,IAAMuC,EAAgBlE,EAAc,OAAO4B,GAAMA,EAAG,WAAW,EAAE,OACjEuC,EAAU,UAAUnE,EAAc,MAAM,gBAAgBkE,CAAa,gBAAiB,UAAW,GAAI,EAGrG,GAAI,CAEF,IAAME,EAAc,MADI,MAAM,MAAM,2BAA2B,GACrB,KAAK,EAM/C,GAHwB,SAAS,iBAAiB,cAAc,EAChD,QAAQC,GAAUA,EAAO,OAAO,CAAC,EAE7CD,EAAY,SAAWA,EAAY,SAAW,YAAa,CAC7D,IAAMC,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,UAAY,cACnBA,EAAO,MAAM,QAAU,8IACvB,IAAMC,EAAWF,EAAY,0BAA4B,WACzDC,EAAO,UAAY,2CAAoCC,CAAQ,YAC/DjD,GAAe,sBAAsB,cAAegD,CAAM,CAC5D,SAAWD,EAAY,SAAW,QAAS,CACzC,IAAMC,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,UAAY,cACnBA,EAAO,MAAM,QAAU,8IACvBA,EAAO,UAAY,8CACnBhD,GAAe,sBAAsB,cAAegD,CAAM,CAC5D,CACF,OAAS5C,EAAO,CACd,QAAQ,KAAK,iCAAkCA,CAAK,CACtD,CACF,OAASA,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,EAChD,IAAMJ,EAAgB,SAAS,eAAe,iBAAiB,EAC3DA,IACFA,EAAc,UAAY,gDAAiDI,EAAgB,OAAO,UAEpG0C,EAAU,4BAA6B,OAAO,CAChD,CACF,CASO,SAASI,IAA4B,CAC1C,IAAMC,EAAa,SAAS,iBAAmC,yCAAyC,EACxGA,EAAW,QAAQC,GAAMA,EAAG,QAAU,EAAI,EAC1CN,EAAU,gBAAgBK,EAAW,MAAM,cAAe,OAAQ,GAAI,CACxE,CAKO,SAASE,IAA8B,CACzB,SAAS,iBAAmC,yCAAyC,EAC7F,QAAQD,GAAMA,EAAG,QAAU,EAAK,EAC3CN,EAAU,4BAA6B,OAAQ,GAAI,CACrD,CAKO,SAASQ,GAAiBb,EAA+B,CAC9DnD,GAAiBmD,EAGjB,SAAS,iBAAiB,sBAAsB,EAAE,QAAQc,GAAO,CAC/DA,EAAI,UAAU,OAAO,SAAUA,EAAI,aAAa,eAAe,IAAMd,CAAQ,CAC/E,CAAC,EAGD,SAAS,iBAA8B,iBAAiB,EAAE,QAAQe,GAAQ,CACxE,IAAMC,EAAOD,EAAK,aAAa,mBAAmB,EAC5CjD,EAAK5B,EAAc,KAAK+E,GAAKA,EAAE,KAAOD,CAAI,EAChD,GAAIlD,EAAI,CACN,IAAMoD,EAAa,CAAClB,GAAYlC,EAAG,WAAakC,EAChDe,EAAK,MAAM,QAAUG,EAAa,GAAK,MACzC,CACF,CAAC,EAGD,SAAS,iBAA8B,kBAAkB,EAAE,QAAQC,GAAU,CAC3E,IAAMzB,EAAMyB,EAAO,aAAa,eAAe,EAC/CA,EAAO,MAAM,QAAU,CAACnB,GAAYN,IAAQM,EAAW,GAAK,MAC9D,CAAC,EAGDK,EAAU,WADSL,GAAY,KACA,cAAe,OAAQ,IAAI,CAC5D,CAKO,SAASoB,GAAepB,EAAwB,CACjDlD,EAAoB,IAAIkD,CAAQ,EAClClD,EAAoB,OAAOkD,CAAQ,EAEnClD,EAAoB,IAAIkD,CAAQ,EAIlC7C,GAAmB,EAGnB,IAAMkE,EAAQ,SAAS,iBAA8B,kCAAkCrB,CAAQ,IAAI,EAC7FE,EAAcpD,EAAoB,IAAIkD,CAAQ,EAEpDqB,EAAM,QAAQN,GAAQ,CAChBb,GACFa,EAAK,MAAM,UAAY,IACvBA,EAAK,MAAM,QAAU,IACrBA,EAAK,MAAM,SAAW,SACtBA,EAAK,MAAM,aAAe,IAC1BA,EAAK,MAAM,QAAU,IACrB,WAAW,IAAM,CAAEA,EAAK,MAAM,QAAU,MAAQ,EAAG,GAAG,IAEtDA,EAAK,MAAM,QAAU,GACrBA,EAAK,MAAM,SAAW,SACtB,WAAW,IAAM,CACfA,EAAK,MAAM,UAAY,QACvBA,EAAK,MAAM,QAAU,IACrBA,EAAK,MAAM,aAAe,GAC1BA,EAAK,MAAM,QAAU,EACvB,EAAG,EAAE,EAET,CAAC,EAGD,IAAMI,EAAS,SAAS,cAA2B,mCAAmCnB,CAAQ,IAAI,EAClG,GAAImB,EAAQ,CACV,IAAMvB,EAAOuB,EAAO,cAAc,gBAAgB,EAC9CvB,IACFA,EAAK,YAAcM,EAAc,SAAM,UAEzCiB,EAAO,UAAU,OAAO,YAAajB,CAAW,CAClD,CACF,CAKO,SAASoB,IAA4B,CACvB,CAAC,GAAG,IAAI,IAAIpF,EAAc,IAAI4B,GAAMA,EAAG,QAAQ,CAAC,CAAC,EACzD,QAAQ4B,GAAO,CACpB5C,EAAoB,IAAI4C,CAAG,GAC7B0B,GAAe1B,CAAG,CAEtB,CAAC,EACDW,EAAU,0BAA2B,OAAQ,IAAI,CACnD,CAKO,SAASkB,IAA8B,CACzB,CAAC,GAAG,IAAI,IAAIrF,EAAc,IAAI4B,GAAMA,EAAG,QAAQ,CAAC,CAAC,EACzD,QAAQ4B,GAAO,CACnB5C,EAAoB,IAAI4C,CAAG,GAC9B0B,GAAe1B,CAAG,CAEtB,CAAC,EACDW,EAAU,2BAA4B,OAAQ,IAAI,CACpD,CAKO,SAASmB,GAAcC,EAAwD,CAQpF,GAPA,QAAQ,IAAI,qBAAsBA,CAAQ,EAGvB,SAAS,iBAAmC,yCAAyC,EAC7F,QAAQd,GAAMA,EAAG,QAAU,EAAK,EAGvCc,EAAS,YAAcA,EAAS,WAAW,OAAS,EAAG,CACzD,IAAIrB,EAAgB,EACpBqB,EAAS,WAAW,QAAQT,GAAQ,CAClC,IAAMU,EAAW,SAAS,eAAe,MAAMV,CAAI,EAAE,EACjDU,GACFA,EAAS,QAAU,GACnBtB,KAEA,QAAQ,KAAK,wBAAwBY,CAAI,EAAE,CAE/C,CAAC,EAEDX,EAAU,YAAYoB,EAAS,IAAI,OAAOrB,CAAa,uBAAwB,UAAW,GAAI,CAChG,MACEC,EAAU,YAAYoB,EAAS,IAAI,IAAK,OAAQ,GAAI,CAExD,CASA,eAAsBE,IAAuC,CAC3D,QAAQ,IAAI,sCAAsC,EAClD,IAAMjB,EAAa,SAAS,iBAAmC,iDAAiD,EAChH,QAAQ,IAAI,4BAA6BA,EAAW,MAAM,EAC1D,IAAMkB,EAAW,MAAM,KAAKlB,CAAU,EAAE,IAAIC,GAAMA,EAAG,KAAK,EAM1D,GALA,QAAQ,IAAI,uBAAwBiB,CAAQ,EAG5CjF,GAAuBiF,EAEnBA,EAAS,SAAW,EAAG,CACzB,QAAQ,IAAI,wBAAwB,EACpC,MAAM,wBAAwB,EAC9B,MACF,CAGA3F,KACA,IAAM4F,EAAmB5F,GACzB,QAAQ,IAAI,2BAA4B4F,CAAgB,EAExD7F,GAAoB,GACpB,IAAM8F,EAAS,SAAS,eAAe,SAAS,EAC5CA,IAAQA,EAAO,SAAW,IAM9B,IAAMC,EAAe,SAAS,eAAe,gBAAgB,EACvDC,EAAiB,SAAS,eAAe,kBAAkB,EAC7DD,IACFA,EAAa,SAAW,GACxBA,EAAa,aAAa,gBAAiB,MAAM,EACjDA,EAAa,MAAQ,iDAEnBC,IACFA,EAAe,SAAW,GAC1BA,EAAe,aAAa,gBAAiB,MAAM,EACnDA,EAAe,MAAQ,iDAIzB,IAAMC,EAAU,SAAS,eAAe,UAAU,EAC5CC,EAAY,SAAS,eAAe,YAAY,EAClDD,IAASA,EAAQ,MAAM,QAAU,gBACjCC,IAAWA,EAAU,MAAM,QAAU,gBACzC,QAAQ,IAAI,6CAA8CL,CAAgB,EAG1E,IAAMM,EAAoB,SAAS,eAAe,oBAAoB,EAClEA,IAAmBA,EAAkB,MAAM,QAAU,SACzD9F,EAAwB,EACxBC,EAAkBsF,EAAS,OAC3BrF,GAAiB,CAAC,EAClBH,GAAiB,KAAK,IAAI,EAC1BgG,GAAe,EACfC,GAAmB,EACnBC,GAAwB,EAGxB,IAAMC,EAAe,SAAS,eAAe,eAAe,EACxDA,IACFA,EAAa,MAAM,QAAU,QAC7BA,EAAa,YAAc;AAAA,EAC3BA,EAAa,eAAe,CAAE,SAAU,SAAU,MAAO,SAAU,CAAC,GAGtE,GAAI,CACF,IAAMC,EAAW,MAAM,MAAM,uBAAwB,CACnD,OAAQ,OACR,QAAS,CACP,eAAgB,kBAClB,EACA,KAAM,KAAK,UAAU,CACnB,cAAeZ,CACjB,CAAC,CACH,CAAC,EAED,GAAI,CAACY,EAAS,GAAI,CAChB,IAAM7E,EAAQ,MAAM6E,EAAS,KAAK,EAClC,MAAM,IAAI,MAAM7E,EAAM,QAAU,4BAA4B,CAC9D,CAGA,IAAM8E,EAASD,EAAS,MAAM,UAAU,EACxC,GAAI,CAACC,EACH,MAAM,IAAI,MAAM,+BAA+B,EAGjD,IAAMC,EAAU,IAAI,YAChBC,EAAS,GAEb,OAAa,CACX,GAAM,CAAE,KAAAC,EAAM,MAAAC,CAAM,EAAI,MAAMJ,EAAO,KAAK,EAE1C,GAAIG,EACF,MAIFD,GAAUD,EAAQ,OAAOG,EAAO,CAAE,OAAQ,EAAK,CAAC,EAChD,IAAMC,EAAQH,EAAO,MAAM;AAAA,CAAI,EAC/BA,EAASG,EAAM,IAAI,GAAK,GAExB,QAAWC,KAAQD,EACjB,GAAIC,EAAK,WAAW,QAAQ,EAAG,CAC7B,IAAMC,EAAWD,EAAK,MAAM,CAAC,EAC7B,GAAI,CACF,IAAME,EAAwB,KAAK,MAAMD,CAAQ,EACjDE,GAAqBD,CAAK,CAC5B,OAASE,EAAG,CACV,QAAQ,MAAM,0BAA2BA,CAAC,CAC5C,CACF,CAEJ,CAEF,OAASxF,EAAO,CACV4E,IACFA,EAAa,aAAe;AAAA;AAAA,SAAe5E,EAAgB,OAAO;AAAA,GAEpE,QAAQ,MAAM,4BAA6BA,CAAK,CAClD,QAAE,CAEIkE,IAAqB5F,IACvB,QAAQ,IAAI,yBAA0B4F,EAAkB,WAAW,EAC/DC,IAAQA,EAAO,SAAW,IAC1BG,IAASA,EAAQ,MAAM,QAAU,QACjCC,IAAWA,EAAU,MAAM,QAAU,QACzClG,GAAoB,GAEpBoH,GAAkB,EAClBC,GAAuB,EACvBjH,GAAiB,EACb+F,IAAmBA,EAAkB,MAAM,QAAU,QAGrDJ,IACFA,EAAa,SAAW,GACxBA,EAAa,gBAAgB,eAAe,EAC5CA,EAAa,MAAQ,IAEnBC,IACFA,EAAe,SAAW,GAC1BA,EAAe,gBAAgB,eAAe,EAC9CA,EAAe,MAAQ,KAGzB,QAAQ,IAAI,kCAAmCH,EAAkB,iBAAkB5F,GAAuB,GAAG,CAEjH,CACF,CAKA,eAAsBqH,IAAsC,CAG1D,GAAK,QAAQ,6BAA6B,EAI1C,GAAI,CACF,IAAMd,EAAW,MAAM,MAAM,wBAAyB,CACpD,OAAQ,MACV,CAAC,EAED,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,QAAQA,EAAS,MAAM,EAAE,EAG3C,IAAMe,EAAS,MAAMf,EAAS,KAAK,EAE7BD,EAAe,SAAS,eAAe,eAAe,EAC5D,GAAIA,EAAc,CAChB,IAAMiB,EAAUD,EAAO,SAAW,kBAClChB,EAAa,aAAe;AAAA;AAAA,eAAUiB,CAAO;AAAA,CAC/C,CAEAnD,EAAU,oBAAqB,OAAQ,GAAI,CAE7C,OAAS1C,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,EAChD,MAAM,6BAAgCA,EAAgB,OAAO,CAC/D,CACF,CAKA,eAAsB8F,IAAkC,CACtD,GAAK,QAAQ,gCAAgC,EAI7C,GAAI,CAKF,IAAMF,EAAS,MAJE,MAAM,MAAM,0BAA2B,CACtD,OAAQ,MACV,CAAC,GAE6B,KAAK,EAE7BhB,EAAe,SAAS,eAAe,eAAe,EACxDA,IACFA,EAAa,aAAe;AAAA;AAAA,eAAUgB,EAAO,OAAO;AAAA,GAItDtH,KACAD,GAAoB,GACpB,IAAM8F,EAAS,SAAS,eAAe,SAAS,EAC1CG,EAAU,SAAS,eAAe,UAAU,EAC5CC,EAAY,SAAS,eAAe,YAAY,EAClDJ,IAAQA,EAAO,SAAW,IAC1BG,IAASA,EAAQ,MAAM,QAAU,QACjCC,IAAWA,EAAU,MAAM,QAAU,QAEzCkB,GAAkB,EAClBC,GAAuB,EACvBjH,GAAiB,EACjB,IAAM+F,EAAoB,SAAS,eAAe,oBAAoB,EAClEA,IAAmBA,EAAkB,MAAM,QAAU,QAEzD,IAAMJ,EAAe,SAAS,eAAe,gBAAgB,EACvDC,EAAiB,SAAS,eAAe,kBAAkB,EAC7DD,IACFA,EAAa,SAAW,GACxBA,EAAa,gBAAgB,eAAe,EAC5CA,EAAa,MAAQ,IAEnBC,IACFA,EAAe,SAAW,GAC1BA,EAAe,gBAAgB,eAAe,EAC9CA,EAAe,MAAQ,IAGzB,QAAQ,IAAI,qDAAsD/F,EAAqB,CAEzF,OAAS0B,EAAO,CACd,QAAQ,MAAM,+BAAgCA,CAAK,EACnD,MAAM,gCAAmCA,EAAgB,OAAO,CAClE,CACF,CASO,SAASuF,GAAqBD,EAA6B,CAChE,IAAMV,EAAe,SAAS,eAAe,eAAe,EAC5D,GAAKA,EAEL,QAAQU,EAAM,KAAM,CAClB,IAAK,QACHV,EAAa,aAAe;AAAA,EAAKU,EAAM,OAAO;AAAA,EAC9CV,EAAa,aAAe,GAAG,IAAI,OAAO,EAAE,CAAC;AAAA;AAAA,EAG7C,IAAMmB,EAAqB,SAAS,eAAe,yBAAyB,EACxEA,IACFA,EAAmB,MAAM,QAAU,OACnCA,EAAmB,UAAY,IAGjC,WAAW,IAAM,CACf,OAAO,SAAS,CAAE,IAAK,SAAS,KAAK,aAAc,SAAU,QAAS,CAAC,CACzE,EAAG,EAAE,EACL,MAEF,IAAK,kBACHnB,EAAa,aAAe;AAAA,GAAMU,EAAM,QAAQ,eAAeA,EAAM,cAAc;AAAA,EACnFV,EAAa,aAAe,GAAG,IAAI,OAAO,EAAE,CAAC;AAAA,EAE7CpG,EAAqB,KAAK,IAAI,EAC9BO,EAAqBuG,EAAM,cAAgB,KAC3C5G,IACA+F,GAAe,EACf,MAEF,IAAK,SACHG,EAAa,aAAe,GAAGU,EAAM,IAAI;AAAA,EACzCV,EAAa,UAAYA,EAAa,aACtC,MAEF,IAAK,qBACH,IAAMoB,EAASV,EAAM,QAAU,iBAAc,gBAG7C,GAFAV,EAAa,aAAe;AAAA,EAAKoB,CAAM,gBAAgBV,EAAM,UAAU;AAAA,EAEnE9G,EAAqB,GAAKO,EAAoB,CAChD,IAAMkH,EAAa,KAAK,IAAI,EAAIzH,EAC1B0H,EAAcD,EAAa,IAG7BX,EAAM,SACRa,GAAoBpH,EAAoBmH,CAAW,EAIrDtH,GAAe,KAAKqH,CAAU,EAE9BxB,GAAe,CACjB,CACA1F,EAAqB,KACrB,MAEF,IAAK,oBACH6F,EAAa,aAAe;AAAA;AAAA,EAC5B,MAEF,IAAK,kBACHA,EAAa,aAAe;AAAA,SAAYU,EAAM,OAAO;AAAA,EACrD,MAEF,IAAK,UAQH,GAPAV,EAAa,aAAe;AAAA,EAAK,IAAI,OAAO,EAAE,CAAC;AAAA,EAC/CA,EAAa,aAAe;AAAA;AAAA,EAC5BA,EAAa,aAAe,uBAAuBU,EAAM,KAAK;AAAA,EAC9DV,EAAa,aAAe,iBAAiBU,EAAM,UAAU;AAAA,EAC7DV,EAAa,aAAe,aAAaU,EAAM,MAAM;AAAA,EAGjDA,EAAM,aAAeA,EAAM,YAAcA,EAAM,wBAAyB,CAC1EV,EAAa,aAAe;AAAA;AAAA,EAC5BA,EAAa,aAAe,aAAaU,EAAM,YAAY,OAAO;AAAA,EAClEV,EAAa,aAAe,aAAaU,EAAM,WAAW,OAAO;AAAA,EAGjE,IAAMc,EAAiBd,EAAM,uBAAyB,EAClDc,EAAiB,EACnBxB,EAAa,aAAe,6BAAwBU,EAAM,uBAAuB;AAAA,EACxEc,EAAiB,EAC1BxB,EAAa,aAAe,2BAAoBU,EAAM,uBAAuB;AAAA,EAE7EV,EAAa,aAAe;AAAA,CAEhC,CACA,MAEF,IAAK,WACHA,EAAa,aAAe;AAAA,EAAKU,EAAM,OAAO;AAAA,EAC9CV,EAAa,aAAe,GAAG,IAAI,OAAO,EAAE,CAAC;AAAA,EAE7CyB,GAAwB,EAGxB,IAAMC,EAAgB,SAAS,eAAe,yBAAyB,EACvE,GAAIA,EAAe,CACjBA,EAAc,UAAY,GAC1BA,EAAc,MAAM,QAAU,OAE9B,IAAMC,EAAU,SAAS,cAAc,QAAQ,EAC/CA,EAAQ,UAAY,UACpBA,EAAQ,GAAK,kBACbA,EAAQ,UAAY,qCACpBA,EAAQ,QAAU,IAAMC,GAAsB,EAC9CF,EAAc,YAAYC,CAAO,EAEjC,WAAW,IAAM,CACfA,EAAQ,eAAe,CAAE,SAAU,SAAU,MAAO,SAAU,CAAC,CACjE,EAAG,GAAG,CACR,CACA,MAEF,IAAK,YACH3B,EAAa,aAAe;AAAA,EAAKU,EAAM,OAAO;AAAA,EAC9C,MAEF,IAAK,QACHV,EAAa,aAAe;AAAA,SAAYU,EAAM,OAAO;AAAA,EACrD,KACJ,CAEAV,EAAa,UAAYA,EAAa,aACxC,CAKA,eAAsB4B,IAAuC,CAC3D,IAAM5B,EAAe,SAAS,eAAe,eAAe,EACtD2B,EAAU,SAAS,eAAe,iBAAiB,EAEzD,GAAI,GAAC3B,GAAgB,CAAC2B,GAEtB,GAAI,CACF,MAAM,UAAU,UAAU,UAAU3B,EAAa,aAAe,EAAE,EAElE,IAAM6B,EAAeF,EAAQ,UAC7BA,EAAQ,UAAY,8BACpBA,EAAQ,UAAY,wBAEpB,WAAW,IAAM,CACfA,EAAQ,UAAYE,EACpBF,EAAQ,UAAY,SACtB,EAAG,GAAI,CAET,OAASvG,EAAO,CACd,QAAQ,MAAM,+BAAgCA,CAAK,EAEnD,IAAMyG,EAAeF,EAAQ,UAC7BA,EAAQ,UAAY,qBACpBA,EAAQ,UAAY,SAEpB,WAAW,IAAM,CACfA,EAAQ,UAAYE,EACpBF,EAAQ,UAAY,SACtB,EAAG,GAAI,CACT,CACF,CASA,SAASG,IAA0B,CACjC,GAAIjI,GAAiB,EAAG,CACtB,IAAMkI,EAAU,KAAK,IAAI,EAAIlI,GACvBmI,EAAY,SAAS,eAAe,eAAe,EACrDA,IACFA,EAAU,YAAcC,GAAeF,EAAU,GAAI,EAEzD,CACF,CAKO,SAASjC,IAA2B,CACrC7F,IACF,cAAcA,EAAqB,EAGrCA,GAAwB,OAAO,YAAY,IAAM,CAE/C,GAAIL,EAAqB,EAAG,CAC1B,IAAMmI,EAAU,KAAK,IAAI,EAAInI,EACvBsI,EAAU,SAAS,eAAe,kBAAkB,EAC1D,GAAIA,EAAS,CACX,IAAMC,EAAkBF,GAAeF,EAAU,GAAI,EAGrD,GAAI5H,EAAoB,CACtB,IAAMiI,EAAmB/H,KAAiBF,CAAkB,GAAG,gBACzDkI,EAAY,OAAOD,GAAqB,SAAWA,EAAmBE,GAAkBnI,CAAkB,EAEhH,GAAIkI,IAAc,MAAQ,OAAOA,GAAc,UAAY,CAAC,OAAO,MAAMA,CAAS,EAAG,CACnF,IAAM5G,EAAkBwG,GAAeI,CAAS,EAChDH,EAAQ,YAAc,GAAGC,CAAe,gBAAgB1G,CAAe,GACvEyG,EAAQ,aAAa,QAAS,yCAAyC,CACzE,MACEA,EAAQ,YAAc,GAAGC,CAAe,sBACxCD,EAAQ,aAAa,QAAS,uCAAuC,CAEzE,MACEA,EAAQ,YAAcC,CAE1B,CACF,CAGAL,GAAkB,CACpB,EAAG,GAAI,CACT,CAKO,SAASjB,IAA0B,CACpC5G,KACF,cAAcA,EAAqB,EACnCA,GAAwB,KAE5B,CAKO,SAAS4F,IAAuB,CACrC,IAAM0C,EAAUxI,EAAkB,EAC9B,KAAK,MAAOD,EAAwBC,EAAmB,GAAG,EAC1D,EAEJ,QAAQ,IAAI,kBAAmB,CAAE,sBAAAD,EAAuB,gBAAAC,EAAiB,QAAAwI,CAAQ,CAAC,EAGlF,IAAMC,EAAc,SAAS,eAAe,0BAA0B,EAChEC,EAAkB,SAAS,eAAe,8BAA8B,EAE1ED,GACFA,EAAY,MAAM,MAAQD,EAAU,IACpC,QAAQ,IAAI,yCAA0CA,EAAU,GAAG,GAEnE,QAAQ,MAAM,6CAA6C,EAGzDE,GACFA,EAAgB,YAAcF,EAAU,IACxC,QAAQ,IAAI,4CAA6CA,EAAU,GAAG,GAEtE,QAAQ,MAAM,iDAAiD,EAGjE,IAAMG,EAAgB,SAAS,eAAe,gBAAgB,EAC1DA,IACFA,EAAc,YAAc,aAAa5I,CAAqB,OAAOC,CAAe,IAGtF,IAAM4I,EAAc,SAAS,eAAe,cAAc,EACtDA,IACFA,EAAY,YAAc,GAAG7I,CAAqB,IAAIC,CAAe,IAIvE,IAAM6I,EAAe,SAAS,eAAe,eAAe,EAC5D,GAAIA,EACF,GAAI9I,GAAyBC,EAC3B6I,EAAa,YAAc,mBAClBxI,GAAqB,OAAS,EAAG,CAE1C,IAAMyI,EAAezI,GAAqB,MAAMN,CAAqB,EAG/DgJ,EAAkB3I,GAAsBP,EAAqB,EAC/D,KAAK,KAAK,KAAK,IAAI,EAAIA,IAAuBmJ,GAAmB5I,CAAkB,EAAI,KAAO,GAAI,EAClG,EAGE6I,EAAaC,GAAaJ,EAAc1I,EAAoB2I,CAAe,EACjFF,EAAa,YAAcX,GAAee,CAAU,CACtD,MACEJ,EAAa,YAAc,gBAGjC,CAKO,SAAS7C,IAAgC,CAC1C7F,IACF,cAAcA,EAAmB,EAGnCA,GAAsB,OAAO,YAAY,SAAY,CACnD,GAAI,CAEF,IAAMa,EAAO,MADI,MAAM,MAAM,wBAAwB,GACzB,KAAK,EAE3BmI,EAAW,SAAS,eAAe,cAAc,EACvD,GAAInI,EAAK,aAAe,EAAG,CACrBmI,IAAUA,EAAS,MAAM,QAAU,QACvC,IAAMC,EAAa,SAAS,eAAe,aAAa,EACpDA,IAAYA,EAAW,YAAc,OAAOpI,EAAK,YAAY,EACnE,MACMmI,IAAUA,EAAS,MAAM,QAAU,QAGrCnI,EAAK,mBACP,QAAQ,IAAI,qBAAsBA,EAAK,iBAAiB,CAE5D,OAASK,EAAO,CACd,QAAQ,MAAM,8BAA+BA,CAAK,CACpD,CACF,EAAG,GAAI,CACT,CAKO,SAAS0F,IAA+B,CACzC5G,KACF,cAAcA,EAAmB,EACjCA,GAAsB,KAE1B,CAKA,eAAeuH,IAAyC,CACtD,GAAI,CAEF,IAAM1G,EAAO,MADI,MAAM,MAAM,2BAA2B,GAC5B,KAAK,EAcjC,GAXgB,SAAS,iBAAiB,cAAc,EAChD,QAAQiD,GAAU,CACpBjD,EAAK,2BACPiD,EAAO,UAAY,2CAAoCjD,EAAK,wBAAwB,YAEnFiD,EAAuB,MAAM,WAAa,oBAC1CA,EAAuB,MAAM,MAAQ,uBAE1C,CAAC,EAGGjD,EAAK,WACP,OAAW,CAAC0D,EAAM2E,CAAM,IAAK,OAAO,QAAQrI,EAAK,UAAU,EAAG,CAC5D,IAAMsI,EAAS,SAAS,cAAc,uBAAuB5E,CAAI,IAAI,EACrE,GAAI4E,EAAQ,CACV,IAAMC,EAAaD,EAAO,cAAc,kCAAkC,EAC1E,GAAIC,GAAeF,EAAe,kBAAmB,CACnD,IAAMvH,EAAcuH,EAAe,QAAU,SAAM,SAC7CtH,EAAesH,EAAe,QAAU,uBAAyB,qBACjE3H,EAAmB2H,EAAe,iBAAmB,GACrDzH,EAAeF,EAAkB,qCAA2BA,CAAe,YAAc,GAC/F6H,EAAW,UAAY;AAAA,4CACGF,EAAe,iBAAiB,iCAAiCtH,CAAW,KAAKD,CAAU,UAAUF,CAAY;AAAA,aAE7I,CACF,CACF,CAEJ,OAASP,EAAO,CACd,QAAQ,MAAM,8BAA+BA,CAAK,CACpD,CACF,CAOA,IAAMmI,GAA2C,CAG/C,MAAO,CAAC,gBAAiB,cAAe,WAAW,EAInD,OAAQ,CAAC,cAAe,aAAc,cAAe,gBAAiB,cAAe,YAAa,WAAY,kBAAkB,EAIhI,KAAM,CAAC,cAAe,aAAc,cAAe,gBAAiB,YAAa,kBAAmB,cAAe,YAAa,cAAe,WAAY,mBAAoB,WAAW,EAI1L,UAAW,CAAC,YAAa,kBAAmB,gBAAiB,cAAe,eAAgB,WAAW,EAIvG,SAAU,CAAC,cAAe,cAAe,aAAc,cAAe,aAAa,CACrF,EAEO,SAASC,IAA6B,CAC3C,IAAMC,EAAQ,SAAS,eAAe,cAAc,EAChDA,GACFA,EAAM,UAAU,IAAI,QAAQ,CAEhC,CAEO,SAASC,IAAoB,CAClC,IAAMD,EAAQ,SAAS,eAAe,cAAc,EAChDA,GACFA,EAAM,UAAU,OAAO,QAAQ,CAEnC,CAEA,eAAsBE,GAAmBC,EAA+B,CAGtE,GAFAF,GAAY,EAERE,IAAW,SAAU,CACvB9F,EAAU,0BAA2B,OAAQ,GAAI,EACjD,MACF,CAGA,IAAM+F,EAAkBN,GAAeK,CAAM,GAAK,CAAC,EAGnD,SAAS,iBAAiB,yCAAyC,EAAE,QAASxF,GAAO,CACnF,IAAMe,EAAWf,EACjBe,EAAS,QAAU0E,EAAgB,SAAS1E,EAAS,KAAK,CAC5D,CAAC,EASDrB,EAAU,oBANkC,CAC1C,MAAO,cACP,OAAQ,iBACR,KAAM,cACR,EAEqC8F,CAAM,CAAC,KAAKC,EAAgB,MAAM,eAAgB,UAAW,GAAI,EAGtG,IAAMC,EAAiB,SAAS,eAAe,iBAAiB,EAC5DA,GACFA,EAAe,eAAe,CAAE,SAAU,QAAS,CAAC,EAItD,IAAMC,EAAe,SAAS,eAAe,eAAe,EACxDA,IACFA,EAAa,MAAM,QAAU,OAEjC,CAMA,SAASC,GAAgBC,EAAqC,CAC5D,IAAMC,EAAKD,EACX,GAAI,CAACC,EAAI,MAAO,GAChB,IAAMC,GAAOD,EAAG,SAAW,IAAI,YAAY,EAC3C,OAAOC,IAAQ,SAAWA,IAAQ,YAAcA,IAAQ,UAAYD,EAAG,iBACzE,CAEA,eAAsB7I,IAA2B,CAC/C,IAAM+I,EAAQ,SAAS,eAAe,cAAc,EAC9CC,EAAU,SAAS,eAAe,gBAAgB,EACxD,GAAI,GAACD,GAAS,CAACC,GAEf,GAAI,CAEF,IAAMtJ,EAAO,MADD,MAAM,MAAM,yBAAyB,GAC1B,KAAK,EAE5B,GAAI,CAACA,EAAK,QAAS,CACjBqJ,EAAM,MAAM,QAAU,QACtBC,EAAQ,UAAY,gEACpB,MACF,CAEA,IAAMC,EAAgBvJ,EAAK,QAAU,CAAC,EACtC,GAAIuJ,EAAO,SAAW,EAAG,CACvBF,EAAM,MAAM,QAAU,OACtBC,EAAQ,UAAY,GACpB,MACF,CAEAD,EAAM,MAAM,QAAU,QAEtB,IAAMG,EAAOD,EAAO,IAAK,GAAM,CAC7B,IAAME,EAAgB,EAAE,WAAa,QAAU,gBAAmB,EAAE,WAAa,UAAY,iBAAmB,wBAC1GC,EAAU,MAAM,QAAQ,EAAE,kBAAkB,GAAK,EAAE,mBAAmB,OACxE,+FAA+F,EAAE,mBAAmB,KAAK,IAAI,CAAC,SAC9H,GAEEC,EAAS,EAAE,WACb,mFAAmF,EAAE,UAAU,OAAO,EAAE,WAAa,KAAK,YAC1H,GAEJ,MAAO;AAAA;AAAA;AAAA,mDAGsCF,CAAa,MAAMjI,EAAW,EAAE,OAAS,OAAO,CAAC;AAAA,mGACDA,EAAW,EAAE,QAAU,EAAE,CAAC;AAAA,cAC/GkI,CAAO;AAAA;AAAA;AAAA,cAGPC,CAAM;AAAA;AAAA;AAAA,OAIhB,CAAC,EAAE,KAAK,EAAE,EAEVL,EAAQ,UAAY,4CAA4CE,CAAI,QACtE,MAAY,CACVH,EAAM,MAAM,QAAU,QACtBC,EAAQ,UAAY,+DACtB,CACF,CAGA,eAAsBM,GAAeC,EAA+B,CAClE,GAAI,CACF,IAAMC,EAAM,MAAM,MAAM,8BAA+B,CACrD,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,UAAU,CAAE,OAAAD,CAAO,CAAC,CACjC,CAAC,EACK7J,EAAO,MAAM8J,EAAI,KAAK,EAC5B,GAAI,CAACA,EAAI,IAAM,CAAC9J,EAAK,QACnB,MAAM,IAAI,MAAMA,EAAK,QAAUA,EAAK,OAAS,QAAQ,EAEvD+C,EAAU/C,EAAK,SAAW,cAAe,UAAW,GAAI,EAExD,WAAW,IAAMM,GAAU,EAAE,MAAM,IAAM,CAAC,CAAC,EAAG,IAAI,CACpD,OAASuF,EAAQ,CACf9C,EAAU8C,GAAG,SAAW,aAAc,QAAS,GAAI,CACrD,CACF,CAEO,SAASkE,IAAuB,CACrC,IAAMrB,EAAQ,SAAS,eAAe,iBAAiB,EACnDA,GAAOA,EAAM,UAAU,OAAO,QAAQ,CAC5C,CAEA,SAASsB,IAAsB,CAC7B,IAAMtB,EAAQ,SAAS,eAAe,iBAAiB,EACnDA,GAAOA,EAAM,UAAU,IAAI,QAAQ,CACzC,CAEO,SAASuB,IAA8B,CAC5C,SAAS,iBAAiB,UAAY,GAAqB,CAEzD,GAAI,CAAAhB,GAAgB,EAAE,MAAM,EAG5B,IAAI,EAAE,MAAQ,KAAQ,EAAE,MAAQ,KAAO,EAAE,SAAW,CAClD,EAAE,eAAe,EACjBe,GAAc,EACd,MACF,CAGA,GAAI,EAAE,MAAQ,KAAO,CAAC,EAAE,SAAW,CAAC,EAAE,SAAW,CAAC,EAAE,OAAQ,CAC1D,IAAME,EAAS,SAAS,eAAe,kBAAkB,EACrDA,IACF,EAAE,eAAe,EACjBA,EAAO,MAAM,GAEf,MACF,CAGA,GAAI,EAAE,MAAQ,SAAU,CACtBH,GAAe,EACfpB,GAAY,EACZ,IAAMwB,EAAwB,OAAe,mBACzCA,GAAsBA,EAAqB,CACjD,EACF,CAAC,CACH,CAMO,SAASC,IAAwB,CAEtC,IAAMC,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,KAAO,8BACZA,EAAK,SAAW,iBAChB,SAAS,KAAK,YAAYA,CAAI,EAC9BA,EAAK,MAAM,EACX,SAAS,KAAK,YAAYA,CAAI,CAChC,CCl6CO,IAAMC,EAA6B,IAAI,IAS9C,eAAsBC,IAAgC,CAEpD,IAAMC,EADY,SAAS,eAAe,YAAY,GAC9B,OAAS,SAC3BC,EAAa,SAAS,eAAe,iBAAiB,EACtDC,EAAa,SAAS,eAAe,kBAAkB,EAE7D,GAAI,GAACD,GAAc,CAACC,GAEpB,CAAAD,EAAW,UAAY,8EACvBC,EAAW,UAAY,8BACvBJ,EAAc,MAAM,EACpBK,GAAkBH,CAAI,EAEtB,GAAI,CACF,IAAMI,EAAW,MAAM,MAAM,6BAA6B,mBAAmBJ,CAAI,CAAC,EAAE,EAEpF,GAAI,CAACI,EAAS,GAAI,CAChB,IAAIC,EAAW,iBAAiBD,EAAS,MAAM,GAC/C,GAAI,CAEFC,GADkB,MAAMD,EAAS,KAAK,GACjB,QAAUC,CACjC,MAAQ,CAER,CACAH,EAAW,YAAc,UACzBD,EAAW,UAAY,sBAAsBI,CAAQ,SACrDC,EAAUD,EAAU,OAAO,EAC3B,MACF,CAEA,IAAME,EAA+B,MAAMH,EAAS,KAAK,EAGzD,GAFAF,EAAW,YAAc,UAErB,CAACK,EAAK,QAAS,CACjB,IAAMF,EAAYE,EAAa,OAAS,yBACxCN,EAAW,UAAY,sBAAsBI,CAAQ,SACrDC,EAAUD,EAAU,OAAO,EAC3B,MACF,CAEAC,EAAU,aAAaC,EAAK,UAAU,WAAWA,EAAK,cAAc,QAAQ,CAAC,CAAC,MAAO,SAAS,EAG9F,IAAMC,EAAcC,GAAwBF,EAAK,eAAgBA,EAAK,gBAAgB,EAEtFN,EAAW,UAAY;AAAA,kDACuBM,EAAK,MAAQP,CAAI;AAAA;AAAA;AAAA;AAAA,+BAIpCO,EAAK,cAAc,QAAQ,CAAC,CAAC;AAAA;AAAA;AAAA;AAAA,+BAI7BA,EAAK,WAAW,eAAe,CAAC;AAAA;AAAA;AAAA;AAAA,+BAIhCA,EAAK,UAAU,eAAe,CAAC;AAAA;AAAA;AAAA,QAGtDC,CAAW;AAAA;AAAA;AAAA;AAAA,UAITD,EAAK,gBAAgB,IAAI,CAACG,EAAOC,IAAQ,CACzC,IAAMC,EAAcF,EAAM,KAAK,MAAM,GAAG,EAAE,IAAI,EAC9C,MAAO;AAAA;AAAA,8CAE6BC,CAAG,gBAAgBD,EAAM,KAAK,QAAQ,KAAM,QAAQ,EAAE,QAAQ,KAAM,OAAO,CAAC;AAAA;AAAA,wBAElGE,CAAW;AAAA,6DAC0BF,EAAM,IAAI;AAAA;AAAA;AAAA,wBAG/CA,EAAM,QAAQ,QAAQ,CAAC,CAAC;AAAA,6DACaA,EAAM,OAAS,YAAc,MAAM;AAAA;AAAA;AAAA,SAIxF,CAAC,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAef,QAAQ,IAAI,mCAAmC,EAC/C,IAAMG,EAAW,SAAS,eAAe,WAAW,EAC9CC,EAAU,SAAS,eAAe,sBAAsB,EACxDC,EAAY,SAAS,eAAe,gBAAgB,EACpDC,EAAc,SAAS,eAAe,kBAAkB,EAE9D,QAAQ,IAAI,sBAAuBH,CAAQ,EAC3C,QAAQ,IAAI,0BAA2BC,CAAO,EAE1CD,IACFA,EAAS,iBAAiB,QAAS,IAAM,CACvC,QAAQ,IAAI,uBAAuB,EACnCI,GAAe,OAAO,CACxB,CAAC,EACD,QAAQ,IAAI,uCAAkC,GAG5CH,IACFA,EAAQ,iBAAiB,QAAS,IAAM,CACtC,QAAQ,IAAI,kCAAkC,EAC9CG,GAAe,WAAW,CAC5B,CAAC,EACD,QAAQ,IAAI,2CAAsC,GAGhDF,IACFA,EAAU,iBAAiB,QAASG,EAAc,EAClD,QAAQ,IAAI,4CAAuC,GAGjDF,IACFA,EAAY,iBAAiB,QAASG,EAAgB,EACtD,QAAQ,IAAI,8CAAyC,GAIvD,IAAMC,EAAa,SAAS,iBAAmC,yCAAyC,EACxG,QAAQ,IAAI,oBAAqBA,EAAW,MAAM,EAClDA,EAAW,QAAQ,CAACC,EAAUV,IAAQ,CACpCU,EAAS,iBAAiB,SAAU,IAAM,CACxC,QAAQ,IAAI,YAAYV,CAAG,kBAAmBU,EAAS,QAAQ,IAAI,EAC/DA,EAAS,QAAQ,MACnBC,GAAoBD,EAAS,QAAQ,IAAI,CAE7C,CAAC,CACH,CAAC,EACD,QAAQ,IAAI,wCAAmC,CAEjD,OAASE,EAAO,CACd,IAAMlB,EAAYkB,EAAgB,SAAW,4BAC7CtB,EAAW,UAAY,6BAA6BI,CAAQ,SAC5DH,EAAW,YAAc,UACzBI,EAAUD,EAAU,OAAO,CAC7B,EACF,CASO,SAASiB,GAAoBtB,EAAoB,CACtD,QAAQ,IAAI,mCAAoCA,CAAI,EACpD,QAAQ,IAAI,wBAAyB,MAAM,KAAKF,CAAa,CAAC,EAC1DA,EAAc,IAAIE,CAAI,GACxBF,EAAc,OAAOE,CAAI,EACzB,QAAQ,IAAI,cAAc,IAE1BF,EAAc,IAAIE,CAAI,EACtB,QAAQ,IAAI,YAAY,GAE1B,QAAQ,IAAI,uBAAwB,MAAM,KAAKF,CAAa,CAAC,EAC7D0B,GAAoB,CACtB,CAKO,SAASA,IAA4B,CAC1C,IAAMC,EAAQ3B,EAAc,KACtB4B,EAAU,SAAS,eAAe,gBAAgB,EAClDC,EAAmB,SAAS,eAAe,0BAA0B,EACvED,IAASA,EAAQ,YAAc,OAAOD,CAAK,GAC3CE,IAAkBA,EAAiB,YAAc,OAAOF,CAAK,EACnE,CAKO,SAASP,IAAuB,CAClB,SAAS,iBAAmC,yCAAyC,EAC7F,QAAQU,GAAM,CACvBA,EAAG,QAAU,GACTA,EAAG,QAAQ,MACb9B,EAAc,IAAI8B,EAAG,QAAQ,IAAI,CAErC,CAAC,EACDJ,GAAoB,CACtB,CAKO,SAASL,IAAyB,CACpB,SAAS,iBAAmC,yCAAyC,EAC7F,QAAQS,GAAM,CACvBA,EAAG,QAAU,EACf,CAAC,EACD9B,EAAc,MAAM,EACpB0B,GAAoB,CACtB,CASA,eAAsBP,GAAeY,EAA8B,QAAwB,CAMzF,GALA,QAAQ,IAAI,+BAA+B,EAC3C,QAAQ,IAAI,QAASA,CAAI,EACzB,QAAQ,IAAI,sBAAuB/B,EAAc,IAAI,EACrD,QAAQ,IAAI,0BAA2B,MAAM,KAAKA,CAAa,CAAC,EAE5DA,EAAc,OAAS,EAAG,CAC5B,QAAQ,IAAI,kCAAkC,EAC9CQ,EAAU,oBAAqB,SAAS,EACxC,MACF,CAGA,IAAIwB,EACAD,IAAS,YACXC,EAAiB,mCAAyBhC,EAAc,IAAI;AAAA;AAAA;AAAA;AAAA,uDAI5DgC,EAAiB,QAAQhC,EAAc,IAAI;AAAA;AAAA,kDAI7C,QAAQ,IAAI,6BAA6B,EACzC,IAAMiC,EAAY,QAAQD,CAAc,EAGxC,GAFA,QAAQ,IAAI,kBAAmBC,CAAS,EAEpC,CAACA,EAAW,CACd,QAAQ,IAAI,gBAAgB,EAC5B,MACF,CAEA,QAAQ,IAAI,2BAA2B,EAEvC,IAAMC,EAAalC,EAAc,KAC7BmC,EAAU,EACVC,EAAS,EACPC,EAAsD,CAAC,EACzDC,EAAqB,GAGnBvB,EAAW,SAAS,eAAe,WAAW,EAC9CwB,EAAe,SAAS,eAAe,sBAAsB,EAC/DxB,IAAUA,EAAS,SAAW,IAC9BwB,IAAcA,EAAa,SAAW,IAI1CC,GADoBT,IAAS,YAAc,6CAAqC,2CAC/CG,EAAY,IAAM,CACjDI,EAAqB,EACvB,CAAC,EAGD,IAAIG,EAAU,EACd,QAAWvC,KAAQF,EAAe,CAChC,GAAIsC,EACF,MAGFG,IACA,IAAMC,EAAWxC,EAAK,MAAM,GAAG,EAAE,IAAI,EACrCyC,GAAsBF,EAASP,EAAY,eAAeQ,CAAQ,EAAE,EAEpE,GAAI,CACF,IAAMpC,EAAW,MAAM,MAAM,4BAA4B,mBAAmBJ,CAAI,CAAC,SAAS6B,CAAI,GAAI,CAChG,OAAQ,QACV,CAAC,EAED,GAAI,CAACzB,EAAS,GAAI,CAChB,IAAMsC,EAAY,MAAMtC,EAAS,KAAK,EAAE,MAAM,KAAO,CAAE,OAAQ,eAAgB,EAAE,EACjF,MAAM,IAAI,MAAMsC,EAAU,QAAU,QAAQtC,EAAS,MAAM,EAAE,CAC/D,CAEA,IAAMuC,EAAS,MAAMvC,EAAS,KAAK,EAE/BuC,EAAO,QACTV,KAEAC,IACAC,EAAY,KAAK,CAAE,KAAAnC,EAAM,MAAO2C,EAAO,OAAS,eAAgB,CAAC,EACjE,QAAQ,MAAM,aAAad,IAAS,YAAc,SAAW,eAAe,IAAI7B,CAAI,IAAK2C,EAAO,KAAK,EAEzG,OAASpB,EAAO,CACdW,IACAC,EAAY,KAAK,CAAE,KAAAnC,EAAM,MAAQuB,EAAgB,OAAQ,CAAC,EAC1D,QAAQ,MAAM,oBAAoBvB,CAAI,IAAKuB,CAAK,CAClD,CACF,CAGAqB,GAAoB,EAGhB/B,IAAUA,EAAS,SAAW,IAC9BwB,IAAcA,EAAa,SAAW,IAG1CvC,EAAc,MAAM,EACpB0B,GAAoB,EAGpB,IAAMqB,EAAchB,IAAS,YAAc,UAAY,iBACjDiB,EAAajB,IAAS,YAAc,SAAW,OAEjDO,EACF9B,EAAU,+CAAqC2B,EAAUC,CAAM,IAAIF,CAAU,UAAW,UAAW,GAAI,EAC9FC,EAAU,GAAKC,IAAW,GACnC5B,EAAU,uBAAkBuC,CAAW,IAAIZ,CAAO,WAAY,UAAW,GAAI,EACzEJ,IAAS,SACXvB,EAAU,wDAAkD,OAAQ,GAAI,GAEjE2B,EAAU,GAAKC,EAAS,GACjC5B,EAAU,gBAAMuC,EAAY,OAAO,CAAC,EAAE,YAAY,EAAIA,EAAY,MAAM,CAAC,CAAC,IAAIZ,CAAO,eAAea,CAAU,IAAIZ,CAAM,WAAY,UAAW,GAAI,EACnJ,QAAQ,MAAM,qBAAsBC,CAAW,IAE/C7B,EAAU,oBAAewC,CAAU,QAAQZ,CAAM,WAAY,QAAS,GAAI,EAC1E,QAAQ,MAAM,qBAAsBC,CAAW,GAIjD7B,EAAU,qBAAsB,OAAQ,GAAI,EAC5C,MAAMP,GAAe,CACvB,CASO,SAASI,GAAkBH,EAAoB,CACpD,IAAM+C,EAAiB,SAAS,eAAe,aAAa,EAC5D,GAAI,CAACA,EAAgB,OAErB,IAAMC,EAAQhD,EAAK,MAAM,GAAG,EAAE,OAAOiD,GAAKA,CAAC,EAC3C,GAAID,EAAM,SAAW,EAAG,CACtBD,EAAe,UAAY,8DAC3B,MACF,CAEA,IAAIG,EAAO,wEACPC,EAAc,GAElBH,EAAM,QAAQ,CAACI,EAAMC,IAAU,CAC7BF,GAAe,IAAMC,EACrB,IAAME,EAAWH,EACjBD,GAAQ,gDACRA,GAAQ,8CAA8CI,CAAQ,OAAOF,CAAI,SAC3E,CAAC,EAEDL,EAAe,UAAYG,CAC7B,CAKO,SAASK,GAAevD,EAAoB,CACjD,IAAMwD,EAAY,SAAS,eAAe,YAAY,EAClDA,IACFA,EAAU,MAAQxD,EAClBG,GAAkBH,CAAI,EACtBM,EAAU,gBAAgBN,CAAI,GAAI,OAAQ,GAAI,EAElD,CAKO,SAASyD,GAAQzD,EAAoB,CAC1CuD,GAAevD,CAAI,CACrB,CAKO,SAAS0D,IAAsB,CAEpC,OAAQ,OAAe,kBAAoB,UAC7C,CAOA,IAAMC,GAAkF,CACtF,OAAQ,CAAE,KAAM,kBAAO,MAAO,UAAW,MAAO,QAAS,EACzD,OAAQ,CAAE,KAAM,YAAM,MAAO,UAAW,MAAO,QAAS,EACxD,MAAO,CAAE,KAAM,YAAM,MAAO,UAAW,MAAO,OAAQ,EACtD,UAAW,CAAE,KAAM,YAAM,MAAO,UAAW,MAAO,WAAY,EAC9D,SAAU,CAAE,KAAM,YAAM,MAAO,UAAW,MAAO,UAAW,EAC5D,KAAM,CAAE,KAAM,YAAM,MAAO,UAAW,MAAO,MAAO,CACtD,EAKA,SAASC,GAAYC,EAAuB,CAC1C,GAAIA,IAAU,EAAG,MAAO,MACxB,IAAMC,EAAI,KACJC,EAAQ,CAAC,IAAK,KAAM,KAAM,KAAM,IAAI,EACpCC,EAAI,KAAK,MAAM,KAAK,IAAIH,CAAK,EAAI,KAAK,IAAIC,CAAC,CAAC,EAClD,OAAO,YAAYD,EAAQ,KAAK,IAAIC,EAAGE,CAAC,GAAG,QAAQ,CAAC,CAAC,EAAI,IAAMD,EAAMC,CAAC,CACxE,CAKO,SAASvD,GACdwD,EACAC,EACQ,CAER,GAAI,CAACD,GAAiB,OAAOA,GAAkB,SAC7C,MAAO,GAIT,IAAME,EAAU,OAAO,QAAQF,CAAa,EACzC,OAAO,CAAC,CAACG,EAAGC,CAAI,IAAMA,EAAO,CAAC,EAC9B,KAAK,CAACC,EAAGC,IAAMA,EAAE,CAAC,EAAID,EAAE,CAAC,CAAC,EAE7B,GAAIH,EAAQ,SAAW,EACrB,MAAO,GAIT,IAAMK,EAAmBL,EAAQ,OAAO,CAACM,EAAK,CAACL,EAAGC,CAAI,IAAMI,EAAMJ,EAAM,CAAC,EACnEK,EAAQR,GAAcM,EACtBG,EAAaD,EAAQF,EAAmBE,EAAQF,EAAmB,EAGnEI,EAAU,KAAK,IAAI,GAAGT,EAAQ,IAAI,CAAC,CAACC,EAAGC,CAAI,IAAMA,CAAI,EAAGM,CAAU,EAGlEE,EAAOV,EAAQ,IAAI,CAAC,CAACW,EAAUT,CAAI,IAAM,CAC7C,IAAMU,EAASpB,GAAgBmB,CAAQ,GAAK,CAAE,KAAM,YAAM,MAAO,OAAQ,MAAOA,CAAS,EACnFE,EAAaN,EAAQ,GAAKL,EAAOK,EAAQ,KAAK,QAAQ,CAAC,EAAI,IAC3DO,EAAWL,EAAU,EAAKP,EAAOO,EAAU,IAAO,EAExD,MAAO;AAAA;AAAA;AAAA,wCAG6BG,EAAO,IAAI;AAAA,wCACXA,EAAO,KAAK;AAAA,wCACZnB,GAAYS,CAAI,CAAC;AAAA,2CACdW,CAAU;AAAA;AAAA;AAAA,yDAGIC,CAAQ,kBAAkBF,EAAO,KAAK;AAAA;AAAA;AAAA,KAI7F,CAAC,EAAE,KAAK,EAAE,EAGNG,EAAW,GACf,GAAIP,EAAa,GAAKD,EAAQ,EAAG,CAC/B,IAAMS,GAAgBR,EAAaD,EAAQ,KAAK,QAAQ,CAAC,EACnDU,EAAaR,EAAU,EAAKD,EAAaC,EAAU,IAAO,EAChEM,EAAW;AAAA;AAAA;AAAA;AAAA;AAAA,wCAKyBtB,GAAYe,CAAU,CAAC;AAAA,2CACpBQ,CAAY;AAAA;AAAA;AAAA,yDAGEC,CAAU;AAAA;AAAA;AAAA,KAIjE,CAEA,MAAO;AAAA;AAAA;AAAA;AAAA,uBAIcxB,GAAYY,CAAgB,CAAC,uBAAuBL,EAAQ,MAAM;AAAA;AAAA;AAAA,UAG/EU,CAAI;AAAA,UACJK,CAAQ;AAAA;AAAA;AAAA,GAIlB,CC9fA,eAAsBG,IAAuC,CAC3D,GAAI,CACF,QAAQ,IAAI,+BAA+B,EAC3C,IAAMC,EAAW,MAAM,MAAM,0BAA0B,EAEvD,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,QAAQA,EAAS,MAAM,KAAKA,EAAS,UAAU,EAAE,EAGnE,IAAMC,EAAO,MAAMD,EAAS,KAAK,EACjC,QAAQ,IAAI,oBAAqBC,CAAI,EAErC,IAAMC,EAAY,SAAS,eAAe,gBAAgB,EAC1D,GAAI,CAACA,EAAW,OAEhB,GAAI,CAACD,EAAK,WAAaA,EAAK,UAAU,SAAW,EAAG,CAClDC,EAAU,UAAY,sEACtB,MACF,CAEAA,EAAU,UAAYD,EAAK,UAAU,IAAKE,GAAkB,CAC1D,IAAMC,EAAe,KAAK,UAAUD,CAAQ,EAAE,QAAQ,KAAM,KAAK,EACjE,MAAO;AAAA,oCACuBA,EAAS,YAAc,cAAgB,EAAE;AAAA,8CAC/BC,CAAY;AAAA,uCACnBD,EAAS,IAAI;AAAA,uCACbE,EAAWF,EAAS,IAAI,CAAC;AAAA,uCACzBE,EAAWF,EAAS,WAAW,CAAC;AAAA,YAC3DA,EAAS,YAAc,kDAAoD,EAAE;AAAA;AAAA,OAGrF,CAAC,EAAE,KAAK,EAAE,CACZ,OAASG,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,EAChD,IAAMJ,EAAY,SAAS,eAAe,gBAAgB,EACtDA,IACFA,EAAU,UAAY,6DAA8DI,EAAgB,OAAO,QAE7GC,EAAU,6BAAgCD,EAAgB,QAAS,OAAO,CAC5E,CACF,CASA,eAAsBE,GAA+B,CACnD,GAAI,CACF,QAAQ,IAAI,iCAAiC,EAC7C,IAAMR,EAAW,MAAM,MAAM,gBAAgB,EAC7C,QAAQ,IAAI,wCAAyCA,EAAS,MAAM,EACpE,IAAMC,EAAO,MAAMD,EAAS,KAAK,EACjC,QAAQ,IAAI,6BAA8BC,CAAI,EAE9C,IAAMC,EAAY,SAAS,eAAe,gBAAgB,EAE1D,GADA,QAAQ,IAAI,8BAA+B,CAAC,CAACA,CAAS,EAClD,CAACA,EAAW,OAEhB,GAAI,CAACD,EAAK,SAAW,CAACA,EAAK,WAAaA,EAAK,UAAU,SAAW,EAAG,CACnEC,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAOtB,MACF,CAEAA,EAAU,UAAYD,EAAK,UAAU,IAAKQ,GAAuB,CAC/D,IAAMC,EAAUD,EAAS,SAAWE,GAAeF,EAAS,QAAQ,EAAI,gBAClEG,EAAUH,EAAS,SAAWE,GAAeF,EAAS,QAAQ,EAAI,QAClEI,EAAcJ,EAAS,QAAU,UAAY,WAC7CK,EAAaL,EAAS,QAAU,iBAAc,kBAEpD,MAAO;AAAA,oCACuBA,EAAS,QAAU,GAAK,UAAU;AAAA;AAAA;AAAA,4CAG1BJ,EAAWI,EAAS,IAAI,CAAC;AAAA,gBACrDA,EAAS,YAAc,8BAA8BJ,EAAWI,EAAS,WAAW,CAAC,SAAW,EAAE;AAAA;AAAA;AAAA,sEAG5CA,EAAS,EAAE;AAAA;AAAA;AAAA,0EAGPA,EAAS,EAAE,MAAM,CAACA,EAAS,OAAO;AAAA,+BAC7EA,EAAS,QAAU,UAAY,QAAQ;AAAA,kBACpDA,EAAS,QAAU,eAAO,cAAI;AAAA;AAAA,iEAEiBA,EAAS,EAAE;AAAA;AAAA;AAAA,gEAGZA,EAAS,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CAS5BI,CAAW,KAAKC,CAAU;AAAA;AAAA;AAAA;AAAA;AAAA,iDAKxBC,GAAgBN,CAAQ,CAAC;AAAA;AAAA;AAAA;AAAA,iDAIzBA,EAAS,WAAW;AAAA;AAAA;AAAA;AAAA;AAAA,sDAKpBC,CAAO;AAAA;AAAA;AAAA;AAAA;AAAA,iDAKPE,CAAO;AAAA;AAAA;AAAA;AAAA,iDAINH,EAAiB,YAAY,QAAWA,EAAiB,eAAe,QAAU,CAAC;AAAA;AAAA;AAAA,YAGzHA,EAAS,QAAU;AAAA;AAAA,gEAEuBJ,EAAWI,EAAS,OAAO,CAAC;AAAA;AAAA,YAEpE,EAAE;AAAA;AAAA,OAGZ,CAAC,EAAE,KAAK,EAAE,CACZ,OAASH,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,EAChDC,EAAU,2BAA4B,OAAO,CAC/C,CACF,CAKA,eAAsBS,IAA8B,CAElD,IAAMC,EADe,SAAS,eAAe,aAAa,GACzB,OAAS,GAEpCC,EADS,SAAS,eAAe,eAAe,GACjC,OAAS,GAExBC,EADS,SAAS,eAAe,sBAAsB,GACjC,OAAS,GAE/BC,EADS,SAAS,eAAe,oBAAoB,GACjC,OAAS,GAE7BC,EADS,SAAS,eAAe,eAAe,GACjC,OAAS,GAExBC,EADY,SAAS,eAAe,kBAAkB,GACjC,SAAW,GAEhCC,EADW,SAAS,eAAe,iBAAiB,GACjC,SAAW,GAE9BC,EADS,SAAS,eAAe,eAAe,GAC7B,SAAW,GAG9BC,EAAa,MAAM,KAAK,SAAS,iBAAmC,kCAAkC,CAAC,EAC1G,IAAIC,GAAMA,EAAG,KAAK,EAErB,GAAI,CAACR,GAAQO,EAAW,SAAW,GAAK,CAACJ,EAAM,CAC7Cd,EAAU,qCAAsC,OAAO,EACvD,MACF,CAEA,IAAMoB,EAAoB,CACxB,KAAAT,EACA,YAAAC,EACA,WAAAM,EACA,UAAAL,EACA,YAAaC,EAAO,MACpB,QAAAC,EACA,OAAAC,EACA,SAAAC,CACF,EAGA,GAAIJ,IAAc,SAAU,CAC1B,IAAMQ,EAAO,MAAM,KAAK,SAAS,iBAAmC,4BAA4B,CAAC,EAC9F,IAAIF,GAAMA,EAAG,KAAK,EACrB,GAAIE,EAAK,SAAW,EAAG,CACrBrB,EAAU,6CAA8C,OAAO,EAC/D,MACF,CACAoB,EAAa,aAAeC,CAC9B,SAAWR,IAAc,UAAW,CAClC,IAAMS,EAAQ,SAAS,eAAe,cAAc,EAC9CC,EAAM,SAASD,GAAO,OAAS,GAAG,EACxC,GAAI,CAACC,GAAOA,EAAM,GAAKA,EAAM,GAAI,CAC/BvB,EAAU,sCAAuC,OAAO,EACxD,MACF,CACAoB,EAAa,aAAeG,CAC9B,CAEA,GAAI,CACF,IAAMC,EAAMd,EAAa,kBAAkBA,CAAU,GAAK,iBAGpDjB,EAAW,MAAM,MAAM+B,EAAK,CAChC,OAHad,EAAa,MAAQ,OAIlC,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,UAAUU,CAAY,CACnC,CAAC,EAEK1B,EAAO,MAAMD,EAAS,KAAK,EAEjC,GAAI,CAACA,EAAS,IAAM,CAACC,EAAK,QACxB,MAAM,IAAI,MAAMA,EAAK,OAAS,yBAAyB,EAGzDM,EAAUU,EAAa,oBAAsB,oBAAqB,SAAS,EAC3Ee,GAAmB,EACnBxB,EAAc,CAChB,OAASF,EAAO,CACd,QAAQ,MAAM,2BAA4BA,CAAK,EAC/CC,EAAWD,EAAgB,QAAS,OAAO,CAC7C,CACF,CAKA,eAAsB2B,GAAehB,EAAmC,CACtE,GAAK,QAAQ,6DAA6D,EAI1E,GAAI,CACF,IAAMjB,EAAW,MAAM,MAAM,kBAAkBiB,CAAU,GAAI,CAC3D,OAAQ,QACV,CAAC,EAEKhB,EAAO,MAAMD,EAAS,KAAK,EAEjC,GAAI,CAACA,EAAS,IAAM,CAACC,EAAK,QACxB,MAAM,IAAI,MAAMA,EAAK,OAAS,2BAA2B,EAG3DM,EAAU,mBAAoB,SAAS,EACvCC,EAAc,CAChB,OAASF,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,EACjDC,EAAWD,EAAgB,QAAS,OAAO,CAC7C,CACF,CAKA,eAAsB4B,GAAsBjB,EAAoBK,EAAiC,CAC/F,GAAI,CACF,IAAMtB,EAAW,MAAM,MAAM,kBAAkBiB,CAAU,WAAY,CACnE,OAAQ,QACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,UAAU,CAAE,QAAAK,CAAQ,CAAC,CAClC,CAAC,EAEKrB,EAAO,MAAMD,EAAS,KAAK,EAEjC,GAAI,CAACA,EAAS,IAAM,CAACC,EAAK,QACxB,MAAM,IAAI,MAAMA,EAAK,OAAS,2BAA2B,EAG3DM,EAAUe,EAAU,mBAAqB,oBAAqB,SAAS,EACvEd,EAAc,CAChB,OAASF,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,EACjDC,EAAWD,EAAgB,QAAS,OAAO,CAC7C,CACF,CAKA,eAAsB6B,GAAelB,EAAmC,CACtE,GAAK,QAAQ,sEAAsE,EAInF,GAAI,CACF,IAAMjB,EAAW,MAAM,MAAM,kBAAkBiB,CAAU,WAAY,CACnE,OAAQ,MACV,CAAC,EAEKhB,EAAO,MAAMD,EAAS,KAAK,EAEjC,GAAI,CAACA,EAAS,IAAM,CAACC,EAAK,QACxB,MAAM,IAAI,MAAMA,EAAK,SAAW,wBAAwB,EAG1DM,EAAU,sBAAuB,SAAS,EAE1C,WAAW,IAAMC,EAAc,EAAG,GAAI,EACtC,WAAW,IAAMA,EAAc,EAAG,GAAI,CACxC,OAASF,EAAO,CACd,QAAQ,MAAM,0BAA2BA,CAAK,EAC9CC,EAAWD,EAAgB,QAAS,OAAO,CAC7C,CACF,CASO,SAAS8B,GAAkBnB,EAA4B,KAAqB,CACjF,IAAMoB,EAAQ,SAAS,eAAe,gBAAgB,EAChDC,EAAQ,SAAS,eAAe,sBAAsB,EACtDC,EAAO,SAAS,eAAe,eAAe,EAEpD,GAAI,CAACF,GAAS,CAACC,EAAO,OAAO,QAAQ,QAAQ,EAEzCC,GAAMA,EAAK,MAAM,EACrB,IAAMC,EAAe,SAAS,eAAe,aAAa,EAO1D,OANIA,IAAcA,EAAa,MAAQvB,GAAc,IACrDqB,EAAM,YAAcrB,EAAa,gBAAkB,kBAGnDwB,GAA0B,EAEtBxB,EACKyB,GAAoBzB,CAAU,GAGvCoB,EAAM,UAAU,IAAI,QAAQ,EACrB,QAAQ,QAAQ,EACzB,CAKO,SAASL,IAA2B,CACzC,IAAMK,EAAQ,SAAS,eAAe,gBAAgB,EAClDA,GACFA,EAAM,UAAU,OAAO,QAAQ,CAEnC,CAKA,eAAeI,IAA2C,CACxD,GAAI,CAEF,IAAMxC,EAAO,MADI,MAAM,MAAM,6BAA6B,GAC9B,KAAK,EAE3BC,EAAY,SAAS,eAAe,qBAAqB,EAC/D,GAAI,CAACA,EAAW,OAEhBA,EAAU,UAAYD,EAAK,WAAW,IAAK0C,GAAY;AAAA;AAAA,0DAEDA,EAAG,EAAE;AAAA;AAAA,iDAEdtC,EAAWsC,EAAG,IAAI,CAAC;AAAA,iDACnBtC,EAAWsC,EAAG,aAAe,EAAE,CAAC;AAAA;AAAA;AAAA,KAG5E,EAAE,KAAK,EAAE,CACZ,OAASrC,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,CACnD,CACF,CAKA,eAAeoC,GAAoBzB,EAAmC,CACpE,GAAI,CAEF,IAAMhB,EAAO,MADI,MAAM,MAAM,kBAAkBgB,CAAU,EAAE,GAC/B,KAAK,EAEjC,GAAI,CAAChB,EAAK,QAAS,CACjBM,EAAU,qBAAsB,OAAO,EACvCyB,GAAmB,EACnB,MACF,CAEA,IAAMvB,EAAqBR,EAAK,SAE1B2C,EAAS,SAAS,eAAe,eAAe,EAChDC,EAAS,SAAS,eAAe,sBAAsB,EACvDC,EAAS,SAAS,eAAe,oBAAoB,EACrDC,EAAS,SAAS,eAAe,eAAe,EAChDC,EAAY,SAAS,eAAe,kBAAkB,EACtDC,EAAW,SAAS,eAAe,iBAAiB,EACpDC,EAAS,SAAS,eAAe,eAAe,EA0BtD,GAxBIN,IAAQA,EAAO,MAAQnC,EAAS,MAAQ,IACxCoC,IAAQA,EAAO,MAAQpC,EAAS,aAAe,IAC/CqC,GAAUrC,EAAS,YAAWqC,EAAO,MAAQrC,EAAS,WACtDsC,GAAUtC,EAAS,cAAasC,EAAO,MAAQtC,EAAS,YAAY,UAAU,EAAG,CAAC,GAClFuC,IAAWA,EAAU,QAAUvC,EAAS,SACxCwC,IAAUA,EAAS,QAAWxC,EAAiB,QAAU,IACzDyC,IAAQA,EAAO,QAAWzC,EAAiB,UAAY,KAG1DA,EAAS,YAAc,CAAC,GAAG,QAAS0C,GAAiB,CACpD,IAAMC,EAAW,SAAS,cAAgC,mCAAmCD,CAAI,IAAI,EACjGC,IAAUA,EAAS,QAAU,GACnC,CAAC,EAGDC,GAAuB,EAEnB5C,EAAS,YAAc,UAAYA,EAAS,cAC9CA,EAAS,aAAa,QAAQqB,GAAO,CACnC,IAAMsB,EAAW,SAAS,cAAgC,6BAA6BtB,CAAG,IAAI,EAC1FsB,IAAUA,EAAS,QAAU,GACnC,CAAC,EAGC3C,EAAS,YAAc,WAAaA,EAAS,aAAc,CAC7D,IAAMoB,EAAQ,SAAS,eAAe,cAAc,EAChDA,IAAOA,EAAM,MAAQ,OAAOpB,EAAS,YAAY,EACvD,CAEA,IAAM4B,EAAQ,SAAS,eAAe,gBAAgB,EAClDA,GAAOA,EAAM,UAAU,IAAI,QAAQ,CACzC,OAAS/B,EAAO,CACd,QAAQ,MAAM,2BAA4BA,CAAK,EAC/CC,EAAU,0BAA2B,OAAO,CAC9C,CACF,CAKO,SAAS8C,IAA+B,CAE7C,IAAMjC,EADS,SAAS,eAAe,oBAAoB,GACjC,OAAS,GAC7BkC,EAAe,SAAS,eAAe,eAAe,EACtDC,EAAc,SAAS,eAAe,cAAc,EAEtDD,IACFA,EAAa,MAAM,QAAUlC,IAAc,SAAW,QAAU,QAE9DmC,IACFA,EAAY,MAAM,QAAUnC,IAAc,UAAY,QAAU,OAEpE,CAKO,SAASoC,GAAsBrD,EAAqB,CACzDiC,GAAkB,EAGlB,WAAW,IAAM,CACf,IAAMQ,EAAS,SAAS,eAAe,eAAe,EAChDC,EAAS,SAAS,eAAe,sBAAsB,EACvDC,EAAS,SAAS,eAAe,oBAAoB,EACrDC,EAAS,SAAS,eAAe,eAAe,EAuBtD,GArBIH,IAAQA,EAAO,MAAQzC,EAAS,MAChC0C,IAAQA,EAAO,MAAQ1C,EAAS,aAChC2C,IAAQA,EAAO,MAAQ3C,EAAS,WAChC4C,IAAQA,EAAO,MAAQ5C,EAAS,YAAY,UAAU,EAAG,CAAC,GAG9DA,EAAS,WAAW,QAASgD,GAAiB,CAC5C,IAAMC,EAAW,SAAS,cAAgC,mCAAmCD,CAAI,IAAI,EACjGC,IAAUA,EAAS,QAAU,GACnC,CAAC,EAGDC,GAAuB,EAEnBlD,EAAS,cACXA,EAAS,aAAa,QAAS2B,GAAgB,CAC7C,IAAMsB,EAAW,SAAS,cAAgC,6BAA6BtB,CAAG,IAAI,EAC1FsB,IAAUA,EAAS,QAAU,GACnC,CAAC,EAGCjD,EAAS,aAAc,CACzB,IAAM0B,EAAQ,SAAS,eAAe,cAAc,EAChDA,IAAOA,EAAM,MAAQ1B,EAAS,aACpC,CACF,EAAG,GAAG,CACR,CAKA,IAAIsD,GAAsC,KAEnC,SAASC,IAA0B,CACxC,QAAQ,IAAI,uCAAuC,EACnD3D,GAAsB,EACtBS,EAAc,EAGViD,IACF,OAAO,cAAcA,EAAoB,EAE3CA,GAAuB,OAAO,YAAY,IAAM,CAC9C,IAAME,EAAM,SAAS,eAAe,UAAU,EAC1CA,GAAOA,EAAI,UAAU,SAAS,QAAQ,GACxCnD,EAAc,CAElB,EAAG,GAAK,CACV,CASA,SAASO,GAAgBN,EAA4B,CACnD,OAAIA,EAAS,YAAc,QAClB,QACEA,EAAS,YAAc,SAEzB,WADMA,EAAS,cAAc,IAAImD,GAAKA,EAAE,UAAU,EAAG,CAAC,EAAE,YAAY,CAAC,EAAE,KAAK,IAAI,GAC7D,SAAS,IAC1BnD,EAAS,YAAc,UACzB,gBAAgBA,EAAS,YAAY,IAEvCA,EAAS,WAAa,SAC/B,CAKA,SAASE,GAAekD,EAA2B,CACjD,GAAI,CACF,IAAMC,EAAO,IAAI,KAAKD,CAAS,EACzBE,EAAM,IAAI,KACVC,EAASF,EAAK,QAAQ,EAAIC,EAAI,QAAQ,EACtCE,EAAW,KAAK,MAAMD,GAAU,IAAO,GAAK,GAAK,GAAG,EACpDE,EAAY,KAAK,MAAMF,GAAU,IAAO,GAAK,GAAG,EAEtD,OAAIA,EAAS,EACJF,EAAK,eAAe,EAClBG,IAAa,GAAKC,EAAY,GAChC,MAAMA,CAAS,IACbD,EAAW,EACb,MAAMA,CAAQ,IAEdH,EAAK,mBAAmB,CAEnC,MAAY,CACV,OAAOD,CACT,CACF,CC1iBO,IAAMM,GAAN,KAAqB,CAMxB,YAAYC,EAAqB,CAFjC,KAAQ,KAAkB,CAAC,EAGvB,IAAMC,EAAK,SAAS,eAAeD,CAAW,EAC9C,GAAI,CAACC,EAAI,MAAM,IAAI,MAAM,aAAaD,CAAW,YAAY,EAC7D,KAAK,UAAYC,EAGjB,KAAK,UAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAiB3B,KAAK,YAAc,KAAK,UAAU,cAAc,aAAa,EAC7D,KAAK,QAAU,KAAK,UAAU,cAAc,mBAAmB,EAE/D,KAAK,YAAY,iBAAiB,QAAS,IAAM,KAAK,WAAW,CAAC,EAClE,KAAK,UAAU,cAAc,eAAe,GAAG,iBAAiB,QAAS,IAAM,KAAK,SAAS,CAAC,EAE9F,KAAK,SAAS,CAClB,CAEA,MAAM,UAAW,CACb,KAAK,QAAQ,UAAY,sDACzB,GAAI,CACA,IAAMC,EAAW,MAAM,MAAM,WAAW,EACxC,GAAI,CAACA,EAAS,GAAI,MAAM,IAAI,MAAM,qBAAqB,EAEvD,IAAMC,EAAO,MAAMD,EAAS,KAAK,EAC7BC,EAAK,SACL,KAAK,KAAOA,EAAK,KACjB,KAAK,WAAW,KAAK,IAAI,GAEzB,KAAK,QAAQ,UAAY,sBAAsBA,EAAK,OAAS,eAAe,QAEpF,OAASC,EAAG,CACR,KAAK,QAAQ,UAAY,0CAA0CA,CAAC,QACxE,CACJ,CAEA,YAAa,CACT,IAAMC,EAAQ,KAAK,YAAY,MAAM,YAAY,EAC3CC,EAAW,KAAK,KAAK,OAAOC,GAC9BA,EAAI,KAAK,YAAY,EAAE,SAASF,CAAK,GACrCE,EAAI,UAAU,YAAY,EAAE,SAASF,CAAK,CAC9C,EACA,KAAK,WAAWC,CAAQ,CAC5B,CAEA,WAAWE,EAAiB,CACxB,GAAIA,EAAK,SAAW,EAAG,CACnB,KAAK,QAAQ,UAAY,iDACzB,MACJ,CAEA,KAAK,QAAQ,UAAY,GAEzBA,EAAK,QAAQD,GAAO,CAChB,IAAME,EAAM,SAAS,cAAc,KAAK,EACxCA,EAAI,UAAY,UAChBA,EAAI,UAAY;AAAA;AAAA,wCAEYF,EAAI,IAAI;AAAA,uCACTA,EAAI,OAAO,WAAMA,EAAI,IAAI;AAAA;AAAA,wCAExBA,EAAI,YAAY;AAAA;AAAA,uDAEDA,EAAI,IAAI;AAAA;AAAA,cAInDE,EAAI,cAAc,QAAQ,GAAG,iBAAiB,QAAS,IAAM,KAAK,iBAAiBF,CAAG,CAAC,EACvF,KAAK,QAAQ,YAAYE,CAAG,CAChC,CAAC,CACL,CAEA,MAAM,iBAAiBF,EAAc,CACjC,GAAK,QAAQ,sCAAsCA,EAAI,IAAI,iDAAiD,EAI5G,GAAI,CACA,IAAMG,EAAM,KAAK,QAAQ,cAAc,oBAAoBH,EAAI,IAAI,IAAI,EACnEG,IACAA,EAAI,SAAW,GACfA,EAAI,YAAc,mBAGtB,IAAMR,EAAW,MAAM,MAAM,aAAa,mBAAmBK,EAAI,IAAI,CAAC,2BAA4B,CAC9F,OAAQ,MACZ,CAAC,EAED,GAAI,CAACL,EAAS,GAAI,MAAM,IAAI,MAAM,kBAAkB,EAEpD,IAAMS,EAA0B,MAAMT,EAAS,KAAK,EAChDS,EAAO,SACPC,EAAU,eAAeL,EAAI,IAAI,eAAe,KAAK,YAAYI,EAAO,eAAe,CAAC,GAAI,SAAS,EAErG,KAAK,KAAO,KAAK,KAAK,OAAOE,GAAKA,EAAE,OAASN,EAAI,IAAI,EACrD,KAAK,WAAW,KAAK,IAAI,IAEzBK,EAAU,uBAAuBL,EAAI,IAAI,GAAI,OAAO,EAChDG,IACAA,EAAI,SAAW,GACfA,EAAI,YAAc,aAG9B,OAASN,EAAG,CACRQ,EAAU,UAAUR,CAAC,GAAI,OAAO,EAEhC,KAAK,SAAS,CAClB,CACJ,CAEA,YAAYU,EAAuB,CAC/B,GAAIA,IAAU,EAAG,MAAO,MACxB,IAAMC,EAAI,KACJC,EAAQ,CAAC,IAAK,KAAM,KAAM,KAAM,IAAI,EACpCC,EAAI,KAAK,MAAM,KAAK,IAAIH,CAAK,EAAI,KAAK,IAAIC,CAAC,CAAC,EAClD,OAAO,YAAYD,EAAQ,KAAK,IAAIC,EAAGE,CAAC,GAAG,QAAQ,CAAC,CAAC,EAAI,IAAMD,EAAMC,CAAC,CAC1E,CACJ,EC7JO,IAAMC,GAAN,cAAwB,GAAI,CACjC,YAAYC,EAASC,EAAMC,GAAO,CAGhC,GAFA,MAAM,EACN,OAAO,iBAAiB,KAAM,CAAC,QAAS,CAAC,MAAO,IAAI,GAAK,EAAG,KAAM,CAAC,MAAOD,CAAG,CAAC,CAAC,EAC3ED,GAAW,KAAM,OAAW,CAACC,EAAKE,CAAK,IAAKH,EAAS,KAAK,IAAIC,EAAKE,CAAK,CAC9E,CACA,IAAIF,EAAK,CACP,OAAO,MAAM,IAAIG,GAAW,KAAMH,CAAG,CAAC,CACxC,CACA,IAAIA,EAAK,CACP,OAAO,MAAM,IAAIG,GAAW,KAAMH,CAAG,CAAC,CACxC,CACA,IAAIA,EAAKE,EAAO,CACd,OAAO,MAAM,IAAIE,GAAW,KAAMJ,CAAG,EAAGE,CAAK,CAC/C,CACA,OAAOF,EAAK,CACV,OAAO,MAAM,OAAOK,GAAc,KAAML,CAAG,CAAC,CAC9C,CACF,EAmBA,SAASM,GAAW,CAAC,QAAAC,EAAS,KAAAC,CAAI,EAAGC,EAAO,CAC1C,IAAMC,EAAMF,EAAKC,CAAK,EACtB,OAAOF,EAAQ,IAAIG,CAAG,EAAIH,EAAQ,IAAIG,CAAG,EAAID,CAC/C,CAEA,SAASE,GAAW,CAAC,QAAAJ,EAAS,KAAAC,CAAI,EAAGC,EAAO,CAC1C,IAAMC,EAAMF,EAAKC,CAAK,EACtB,OAAIF,EAAQ,IAAIG,CAAG,EAAUH,EAAQ,IAAIG,CAAG,GAC5CH,EAAQ,IAAIG,EAAKD,CAAK,EACfA,EACT,CAEA,SAASG,GAAc,CAAC,QAAAL,EAAS,KAAAC,CAAI,EAAGC,EAAO,CAC7C,IAAMC,EAAMF,EAAKC,CAAK,EACtB,OAAIF,EAAQ,IAAIG,CAAG,IACjBD,EAAQF,EAAQ,IAAIG,CAAG,EACvBH,EAAQ,OAAOG,CAAG,GAEbD,CACT,CAEA,SAASI,GAAMJ,EAAO,CACpB,OAAOA,IAAU,MAAQ,OAAOA,GAAU,SAAWA,EAAM,QAAQ,EAAIA,CACzE,CC5DA,IAAIK,GAAO,CAAC,MAAO,IAAM,CAAC,CAAC,EAE3B,SAASC,IAAW,CAClB,QAASC,EAAI,EAAGC,EAAI,UAAU,OAAQC,EAAI,CAAC,EAAGC,EAAGH,EAAIC,EAAG,EAAED,EAAG,CAC3D,GAAI,EAAEG,EAAI,UAAUH,CAAC,EAAI,KAAQG,KAAKD,GAAM,QAAQ,KAAKC,CAAC,EAAG,MAAM,IAAI,MAAM,iBAAmBA,CAAC,EACjGD,EAAEC,CAAC,EAAI,CAAC,CACV,CACA,OAAO,IAAIC,GAASF,CAAC,CACvB,CAEA,SAASE,GAASF,EAAG,CACnB,KAAK,EAAIA,CACX,CAEA,SAASG,GAAeC,EAAWC,EAAO,CACxC,OAAOD,EAAU,KAAK,EAAE,MAAM,OAAO,EAAE,IAAI,SAASH,EAAG,CACrD,IAAIK,EAAO,GAAIR,EAAIG,EAAE,QAAQ,GAAG,EAEhC,GADIH,GAAK,IAAGQ,EAAOL,EAAE,MAAMH,EAAI,CAAC,EAAGG,EAAIA,EAAE,MAAM,EAAGH,CAAC,GAC/CG,GAAK,CAACI,EAAM,eAAeJ,CAAC,EAAG,MAAM,IAAI,MAAM,iBAAmBA,CAAC,EACvE,MAAO,CAAC,KAAMA,EAAG,KAAMK,CAAI,CAC7B,CAAC,CACH,CAEAJ,GAAS,UAAYL,GAAS,UAAY,CACxC,YAAaK,GACb,GAAI,SAASK,EAAUC,EAAU,CAC/B,IAAIR,EAAI,KAAK,EACTS,EAAIN,GAAeI,EAAW,GAAIP,CAAC,EACnCC,EACAH,EAAI,GACJC,EAAIU,EAAE,OAGV,GAAI,UAAU,OAAS,EAAG,CACxB,KAAO,EAAEX,EAAIC,GAAG,IAAKE,GAAKM,EAAWE,EAAEX,CAAC,GAAG,QAAUG,EAAIS,GAAIV,EAAEC,CAAC,EAAGM,EAAS,IAAI,GAAI,OAAON,EAC3F,MACF,CAIA,GAAIO,GAAY,MAAQ,OAAOA,GAAa,WAAY,MAAM,IAAI,MAAM,qBAAuBA,CAAQ,EACvG,KAAO,EAAEV,EAAIC,GACX,GAAIE,GAAKM,EAAWE,EAAEX,CAAC,GAAG,KAAME,EAAEC,CAAC,EAAIU,GAAIX,EAAEC,CAAC,EAAGM,EAAS,KAAMC,CAAQ,UAC/DA,GAAY,KAAM,IAAKP,KAAKD,EAAGA,EAAEC,CAAC,EAAIU,GAAIX,EAAEC,CAAC,EAAGM,EAAS,KAAM,IAAI,EAG9E,OAAO,IACT,EACA,KAAM,UAAW,CACf,IAAIK,EAAO,CAAC,EAAGZ,EAAI,KAAK,EACxB,QAASC,KAAKD,EAAGY,EAAKX,CAAC,EAAID,EAAEC,CAAC,EAAE,MAAM,EACtC,OAAO,IAAIC,GAASU,CAAI,CAC1B,EACA,KAAM,SAASC,EAAMC,EAAM,CACzB,IAAKf,EAAI,UAAU,OAAS,GAAK,EAAG,QAASgB,EAAO,IAAI,MAAMhB,CAAC,EAAGD,EAAI,EAAGC,EAAGE,EAAGH,EAAIC,EAAG,EAAED,EAAGiB,EAAKjB,CAAC,EAAI,UAAUA,EAAI,CAAC,EACpH,GAAI,CAAC,KAAK,EAAE,eAAee,CAAI,EAAG,MAAM,IAAI,MAAM,iBAAmBA,CAAI,EACzE,IAAKZ,EAAI,KAAK,EAAEY,CAAI,EAAGf,EAAI,EAAGC,EAAIE,EAAE,OAAQH,EAAIC,EAAG,EAAED,EAAGG,EAAEH,CAAC,EAAE,MAAM,MAAMgB,EAAMC,CAAI,CACrF,EACA,MAAO,SAASF,EAAMC,EAAMC,EAAM,CAChC,GAAI,CAAC,KAAK,EAAE,eAAeF,CAAI,EAAG,MAAM,IAAI,MAAM,iBAAmBA,CAAI,EACzE,QAASZ,EAAI,KAAK,EAAEY,CAAI,EAAGf,EAAI,EAAGC,EAAIE,EAAE,OAAQH,EAAIC,EAAG,EAAED,EAAGG,EAAEH,CAAC,EAAE,MAAM,MAAMgB,EAAMC,CAAI,CACzF,CACF,EAEA,SAASL,GAAIG,EAAMP,EAAM,CACvB,QAASR,EAAI,EAAGC,EAAIc,EAAK,OAAQG,EAAGlB,EAAIC,EAAG,EAAED,EAC3C,IAAKkB,EAAIH,EAAKf,CAAC,GAAG,OAASQ,EACzB,OAAOU,EAAE,KAGf,CAEA,SAASL,GAAIE,EAAMP,EAAME,EAAU,CACjC,QAASV,EAAI,EAAGC,EAAIc,EAAK,OAAQf,EAAIC,EAAG,EAAED,EACxC,GAAIe,EAAKf,CAAC,EAAE,OAASQ,EAAM,CACzBO,EAAKf,CAAC,EAAIF,GAAMiB,EAAOA,EAAK,MAAM,EAAGf,CAAC,EAAE,OAAOe,EAAK,MAAMf,EAAI,CAAC,CAAC,EAChE,KACF,CAEF,OAAIU,GAAY,MAAMK,EAAK,KAAK,CAAC,KAAMP,EAAM,MAAOE,CAAQ,CAAC,EACtDK,CACT,CAEA,IAAOI,GAAQpB,GCnFR,IAAIqB,GAAQ,+BAEZC,GAAQ,CACb,IAAK,6BACL,MAAOD,GACP,MAAO,+BACP,IAAK,uCACL,MAAO,+BACT,ECNe,SAARE,EAAiBC,EAAM,CAC5B,IAAIC,EAASD,GAAQ,GAAIE,EAAID,EAAO,QAAQ,GAAG,EAC/C,OAAIC,GAAK,IAAMD,EAASD,EAAK,MAAM,EAAGE,CAAC,KAAO,UAASF,EAAOA,EAAK,MAAME,EAAI,CAAC,GACvEC,GAAW,eAAeF,CAAM,EAAI,CAAC,MAAOE,GAAWF,CAAM,EAAG,MAAOD,CAAI,EAAIA,CACxF,CCHA,SAASI,GAAeC,EAAM,CAC5B,OAAO,UAAW,CAChB,IAAIC,EAAW,KAAK,cAChBC,EAAM,KAAK,aACf,OAAOA,IAAQC,IAASF,EAAS,gBAAgB,eAAiBE,GAC5DF,EAAS,cAAcD,CAAI,EAC3BC,EAAS,gBAAgBC,EAAKF,CAAI,CAC1C,CACF,CAEA,SAASI,GAAaC,EAAU,CAC9B,OAAO,UAAW,CAChB,OAAO,KAAK,cAAc,gBAAgBA,EAAS,MAAOA,EAAS,KAAK,CAC1E,CACF,CAEe,SAARC,GAAiBN,EAAM,CAC5B,IAAIK,EAAWE,EAAUP,CAAI,EAC7B,OAAQK,EAAS,MACXD,GACAL,IAAgBM,CAAQ,CAChC,CCxBA,SAASG,IAAO,CAAC,CAEF,SAARC,EAAiBC,EAAU,CAChC,OAAOA,GAAY,KAAOF,GAAO,UAAW,CAC1C,OAAO,KAAK,cAAcE,CAAQ,CACpC,CACF,CCHe,SAARC,GAAiBC,EAAQ,CAC1B,OAAOA,GAAW,aAAYA,EAASC,EAASD,CAAM,GAE1D,QAASE,EAAS,KAAK,QAASC,EAAID,EAAO,OAAQE,EAAY,IAAI,MAAMD,CAAC,EAAGE,EAAI,EAAGA,EAAIF,EAAG,EAAEE,EAC3F,QAASC,EAAQJ,EAAOG,CAAC,EAAGE,EAAID,EAAM,OAAQE,EAAWJ,EAAUC,CAAC,EAAI,IAAI,MAAME,CAAC,EAAGE,EAAMC,EAASC,EAAI,EAAGA,EAAIJ,EAAG,EAAEI,GAC9GF,EAAOH,EAAMK,CAAC,KAAOD,EAAUV,EAAO,KAAKS,EAAMA,EAAK,SAAUE,EAAGL,CAAK,KACvE,aAAcG,IAAMC,EAAQ,SAAWD,EAAK,UAChDD,EAASG,CAAC,EAAID,GAKpB,OAAO,IAAIE,EAAUR,EAAW,KAAK,QAAQ,CAC/C,CCVe,SAARS,GAAuBC,EAAG,CAC/B,OAAOA,GAAK,KAAO,CAAC,EAAI,MAAM,QAAQA,CAAC,EAAIA,EAAI,MAAM,KAAKA,CAAC,CAC7D,CCRA,SAASC,IAAQ,CACf,MAAO,CAAC,CACV,CAEe,SAARC,GAAiBC,EAAU,CAChC,OAAOA,GAAY,KAAOF,GAAQ,UAAW,CAC3C,OAAO,KAAK,iBAAiBE,CAAQ,CACvC,CACF,CCJA,SAASC,GAASC,EAAQ,CACxB,OAAO,UAAW,CAChB,OAAOC,GAAMD,EAAO,MAAM,KAAM,SAAS,CAAC,CAC5C,CACF,CAEe,SAARE,GAAiBF,EAAQ,CAC1B,OAAOA,GAAW,WAAYA,EAASD,GAASC,CAAM,EACrDA,EAASG,GAAYH,CAAM,EAEhC,QAASI,EAAS,KAAK,QAASC,EAAID,EAAO,OAAQE,EAAY,CAAC,EAAGC,EAAU,CAAC,EAAGC,EAAI,EAAGA,EAAIH,EAAG,EAAEG,EAC/F,QAASC,EAAQL,EAAOI,CAAC,EAAGE,EAAID,EAAM,OAAQE,EAAMC,EAAI,EAAGA,EAAIF,EAAG,EAAEE,GAC9DD,EAAOF,EAAMG,CAAC,KAChBN,EAAU,KAAKN,EAAO,KAAKW,EAAMA,EAAK,SAAUC,EAAGH,CAAK,CAAC,EACzDF,EAAQ,KAAKI,CAAI,GAKvB,OAAO,IAAIE,EAAUP,EAAWC,CAAO,CACzC,CCxBe,SAARO,GAAiBC,EAAU,CAChC,OAAO,UAAW,CAChB,OAAO,KAAK,QAAQA,CAAQ,CAC9B,CACF,CAEO,SAASC,GAAaD,EAAU,CACrC,OAAO,SAASE,EAAM,CACpB,OAAOA,EAAK,QAAQF,CAAQ,CAC9B,CACF,CCRA,IAAIG,GAAO,MAAM,UAAU,KAE3B,SAASC,GAAUC,EAAO,CACxB,OAAO,UAAW,CAChB,OAAOF,GAAK,KAAK,KAAK,SAAUE,CAAK,CACvC,CACF,CAEA,SAASC,IAAa,CACpB,OAAO,KAAK,iBACd,CAEe,SAARC,GAAiBF,EAAO,CAC7B,OAAO,KAAK,OAAOA,GAAS,KAAOC,GAC7BF,GAAU,OAAOC,GAAU,WAAaA,EAAQG,GAAaH,CAAK,CAAC,CAAC,CAC5E,CCfA,IAAII,GAAS,MAAM,UAAU,OAE7B,SAASC,IAAW,CAClB,OAAO,MAAM,KAAK,KAAK,QAAQ,CACjC,CAEA,SAASC,GAAeC,EAAO,CAC7B,OAAO,UAAW,CAChB,OAAOH,GAAO,KAAK,KAAK,SAAUG,CAAK,CACzC,CACF,CAEe,SAARC,GAAiBD,EAAO,CAC7B,OAAO,KAAK,UAAUA,GAAS,KAAOF,GAChCC,GAAe,OAAOC,GAAU,WAAaA,EAAQE,GAAaF,CAAK,CAAC,CAAC,CACjF,CCde,SAARG,GAAiBC,EAAO,CACzB,OAAOA,GAAU,aAAYA,EAAQC,GAAQD,CAAK,GAEtD,QAASE,EAAS,KAAK,QAASC,EAAID,EAAO,OAAQE,EAAY,IAAI,MAAMD,CAAC,EAAGE,EAAI,EAAGA,EAAIF,EAAG,EAAEE,EAC3F,QAASC,EAAQJ,EAAOG,CAAC,EAAGE,EAAID,EAAM,OAAQE,EAAWJ,EAAUC,CAAC,EAAI,CAAC,EAAGI,EAAMC,EAAI,EAAGA,EAAIH,EAAG,EAAEG,GAC3FD,EAAOH,EAAMI,CAAC,IAAMV,EAAM,KAAKS,EAAMA,EAAK,SAAUC,EAAGJ,CAAK,GAC/DE,EAAS,KAAKC,CAAI,EAKxB,OAAO,IAAIE,EAAUP,EAAW,KAAK,QAAQ,CAC/C,CCfe,SAARQ,GAAiBC,EAAQ,CAC9B,OAAO,IAAI,MAAMA,EAAO,MAAM,CAChC,CCCe,SAARC,IAAmB,CACxB,OAAO,IAAIC,EAAU,KAAK,QAAU,KAAK,QAAQ,IAAIC,EAAM,EAAG,KAAK,QAAQ,CAC7E,CAEO,SAASC,GAAUC,EAAQC,EAAO,CACvC,KAAK,cAAgBD,EAAO,cAC5B,KAAK,aAAeA,EAAO,aAC3B,KAAK,MAAQ,KACb,KAAK,QAAUA,EACf,KAAK,SAAWC,CAClB,CAEAF,GAAU,UAAY,CACpB,YAAaA,GACb,YAAa,SAASG,EAAO,CAAE,OAAO,KAAK,QAAQ,aAAaA,EAAO,KAAK,KAAK,CAAG,EACpF,aAAc,SAASA,EAAOC,EAAM,CAAE,OAAO,KAAK,QAAQ,aAAaD,EAAOC,CAAI,CAAG,EACrF,cAAe,SAASC,EAAU,CAAE,OAAO,KAAK,QAAQ,cAAcA,CAAQ,CAAG,EACjF,iBAAkB,SAASA,EAAU,CAAE,OAAO,KAAK,QAAQ,iBAAiBA,CAAQ,CAAG,CACzF,ECrBe,SAARC,GAAiBC,EAAG,CACzB,OAAO,UAAW,CAChB,OAAOA,CACT,CACF,CCAA,SAASC,GAAUC,EAAQC,EAAOC,EAAOC,EAAQC,EAAMC,EAAM,CAS3D,QARI,EAAI,EACJC,EACAC,EAAcN,EAAM,OACpBO,EAAaH,EAAK,OAKf,EAAIG,EAAY,EAAE,GACnBF,EAAOL,EAAM,CAAC,IAChBK,EAAK,SAAWD,EAAK,CAAC,EACtBF,EAAO,CAAC,EAAIG,GAEZJ,EAAM,CAAC,EAAI,IAAIO,GAAUT,EAAQK,EAAK,CAAC,CAAC,EAK5C,KAAO,EAAIE,EAAa,EAAE,GACpBD,EAAOL,EAAM,CAAC,KAChBG,EAAK,CAAC,EAAIE,EAGhB,CAEA,SAASI,GAAQV,EAAQC,EAAOC,EAAOC,EAAQC,EAAMC,EAAMM,EAAK,CAC9D,IAAIC,EACAN,EACAO,EAAiB,IAAI,IACrBN,EAAcN,EAAM,OACpBO,EAAaH,EAAK,OAClBS,EAAY,IAAI,MAAMP,CAAW,EACjCQ,EAIJ,IAAKH,EAAI,EAAGA,EAAIL,EAAa,EAAEK,GACzBN,EAAOL,EAAMW,CAAC,KAChBE,EAAUF,CAAC,EAAIG,EAAWJ,EAAI,KAAKL,EAAMA,EAAK,SAAUM,EAAGX,CAAK,EAAI,GAChEY,EAAe,IAAIE,CAAQ,EAC7BX,EAAKQ,CAAC,EAAIN,EAEVO,EAAe,IAAIE,EAAUT,CAAI,GAQvC,IAAKM,EAAI,EAAGA,EAAIJ,EAAY,EAAEI,EAC5BG,EAAWJ,EAAI,KAAKX,EAAQK,EAAKO,CAAC,EAAGA,EAAGP,CAAI,EAAI,IAC5CC,EAAOO,EAAe,IAAIE,CAAQ,IACpCZ,EAAOS,CAAC,EAAIN,EACZA,EAAK,SAAWD,EAAKO,CAAC,EACtBC,EAAe,OAAOE,CAAQ,GAE9Bb,EAAMU,CAAC,EAAI,IAAIH,GAAUT,EAAQK,EAAKO,CAAC,CAAC,EAK5C,IAAKA,EAAI,EAAGA,EAAIL,EAAa,EAAEK,GACxBN,EAAOL,EAAMW,CAAC,IAAOC,EAAe,IAAIC,EAAUF,CAAC,CAAC,IAAMN,IAC7DF,EAAKQ,CAAC,EAAIN,EAGhB,CAEA,SAASU,GAAMV,EAAM,CACnB,OAAOA,EAAK,QACd,CAEe,SAARW,GAAiBC,EAAOP,EAAK,CAClC,GAAI,CAAC,UAAU,OAAQ,OAAO,MAAM,KAAK,KAAMK,EAAK,EAEpD,IAAIG,EAAOR,EAAMD,GAAUX,GACvBqB,EAAU,KAAK,SACfC,EAAS,KAAK,QAEd,OAAOH,GAAU,aAAYA,EAAQI,GAASJ,CAAK,GAEvD,QAASK,EAAIF,EAAO,OAAQlB,EAAS,IAAI,MAAMoB,CAAC,EAAGrB,EAAQ,IAAI,MAAMqB,CAAC,EAAGnB,EAAO,IAAI,MAAMmB,CAAC,EAAGC,EAAI,EAAGA,EAAID,EAAG,EAAEC,EAAG,CAC/G,IAAIxB,EAASoB,EAAQI,CAAC,EAClBvB,EAAQoB,EAAOG,CAAC,EAChBjB,EAAcN,EAAM,OACpBI,EAAOoB,GAAUP,EAAM,KAAKlB,EAAQA,GAAUA,EAAO,SAAUwB,EAAGJ,CAAO,CAAC,EAC1EZ,EAAaH,EAAK,OAClBqB,EAAaxB,EAAMsB,CAAC,EAAI,IAAI,MAAMhB,CAAU,EAC5CmB,EAAcxB,EAAOqB,CAAC,EAAI,IAAI,MAAMhB,CAAU,EAC9CoB,EAAYxB,EAAKoB,CAAC,EAAI,IAAI,MAAMjB,CAAW,EAE/CY,EAAKnB,EAAQC,EAAOyB,EAAYC,EAAaC,EAAWvB,EAAMM,CAAG,EAKjE,QAASkB,EAAK,EAAGC,EAAK,EAAGC,EAAUC,EAAMH,EAAKrB,EAAY,EAAEqB,EAC1D,GAAIE,EAAWL,EAAWG,CAAE,EAAG,CAE7B,IADIA,GAAMC,IAAIA,EAAKD,EAAK,GACjB,EAAEG,EAAOL,EAAYG,CAAE,IAAM,EAAEA,EAAKtB,GAAW,CACtDuB,EAAS,MAAQC,GAAQ,IAC3B,CAEJ,CAEA,OAAA7B,EAAS,IAAI8B,EAAU9B,EAAQiB,CAAO,EACtCjB,EAAO,OAASD,EAChBC,EAAO,MAAQC,EACRD,CACT,CAQA,SAASsB,GAAUpB,EAAM,CACvB,OAAO,OAAOA,GAAS,UAAY,WAAYA,EAC3CA,EACA,MAAM,KAAKA,CAAI,CACrB,CC5He,SAAR6B,IAAmB,CACxB,OAAO,IAAIC,EAAU,KAAK,OAAS,KAAK,QAAQ,IAAIC,EAAM,EAAG,KAAK,QAAQ,CAC5E,CCLe,SAARC,GAAiBC,EAASC,EAAUC,EAAQ,CACjD,IAAIC,EAAQ,KAAK,MAAM,EAAGC,EAAS,KAAMC,EAAO,KAAK,KAAK,EAC1D,OAAI,OAAOL,GAAY,YACrBG,EAAQH,EAAQG,CAAK,EACjBA,IAAOA,EAAQA,EAAM,UAAU,IAEnCA,EAAQA,EAAM,OAAOH,EAAU,EAAE,EAE/BC,GAAY,OACdG,EAASH,EAASG,CAAM,EACpBA,IAAQA,EAASA,EAAO,UAAU,IAEpCF,GAAU,KAAMG,EAAK,OAAO,EAAQH,EAAOG,CAAI,EAC5CF,GAASC,EAASD,EAAM,MAAMC,CAAM,EAAE,MAAM,EAAIA,CACzD,CCZe,SAARE,GAAiBC,EAAS,CAG/B,QAFIC,EAAYD,EAAQ,UAAYA,EAAQ,UAAU,EAAIA,EAEjDE,EAAU,KAAK,QAASC,EAAUF,EAAU,QAASG,EAAKF,EAAQ,OAAQG,EAAKF,EAAQ,OAAQG,EAAI,KAAK,IAAIF,EAAIC,CAAE,EAAGE,EAAS,IAAI,MAAMH,CAAE,EAAGI,EAAI,EAAGA,EAAIF,EAAG,EAAEE,EACpK,QAASC,EAASP,EAAQM,CAAC,EAAGE,EAASP,EAAQK,CAAC,EAAGG,EAAIF,EAAO,OAAQG,EAAQL,EAAOC,CAAC,EAAI,IAAI,MAAMG,CAAC,EAAGE,EAAMC,EAAI,EAAGA,EAAIH,EAAG,EAAEG,GACxHD,EAAOJ,EAAOK,CAAC,GAAKJ,EAAOI,CAAC,KAC9BF,EAAME,CAAC,EAAID,GAKjB,KAAOL,EAAIJ,EAAI,EAAEI,EACfD,EAAOC,CAAC,EAAIN,EAAQM,CAAC,EAGvB,OAAO,IAAIO,EAAUR,EAAQ,KAAK,QAAQ,CAC5C,CClBe,SAARS,IAAmB,CAExB,QAASC,EAAS,KAAK,QAASC,EAAI,GAAIC,EAAIF,EAAO,OAAQ,EAAEC,EAAIC,GAC/D,QAASC,EAAQH,EAAOC,CAAC,EAAGG,EAAID,EAAM,OAAS,EAAGE,EAAOF,EAAMC,CAAC,EAAGE,EAAM,EAAEF,GAAK,IAC1EE,EAAOH,EAAMC,CAAC,KACZC,GAAQC,EAAK,wBAAwBD,CAAI,EAAI,GAAGA,EAAK,WAAW,aAAaC,EAAMD,CAAI,EAC3FA,EAAOC,GAKb,OAAO,IACT,CCVe,SAARC,GAAiBC,EAAS,CAC1BA,IAASA,EAAUC,IAExB,SAASC,EAAYC,EAAGC,EAAG,CACzB,OAAOD,GAAKC,EAAIJ,EAAQG,EAAE,SAAUC,EAAE,QAAQ,EAAI,CAACD,EAAI,CAACC,CAC1D,CAEA,QAASC,EAAS,KAAK,QAASC,EAAID,EAAO,OAAQE,EAAa,IAAI,MAAMD,CAAC,EAAGE,EAAI,EAAGA,EAAIF,EAAG,EAAEE,EAAG,CAC/F,QAASC,EAAQJ,EAAOG,CAAC,EAAGE,EAAID,EAAM,OAAQE,EAAYJ,EAAWC,CAAC,EAAI,IAAI,MAAME,CAAC,EAAGE,EAAMC,EAAI,EAAGA,EAAIH,EAAG,EAAEG,GACxGD,EAAOH,EAAMI,CAAC,KAChBF,EAAUE,CAAC,EAAID,GAGnBD,EAAU,KAAKT,CAAW,CAC5B,CAEA,OAAO,IAAIY,EAAUP,EAAY,KAAK,QAAQ,EAAE,MAAM,CACxD,CAEA,SAASN,GAAUE,EAAGC,EAAG,CACvB,OAAOD,EAAIC,EAAI,GAAKD,EAAIC,EAAI,EAAID,GAAKC,EAAI,EAAI,GAC/C,CCvBe,SAARW,IAAmB,CACxB,IAAIC,EAAW,UAAU,CAAC,EAC1B,iBAAU,CAAC,EAAI,KACfA,EAAS,MAAM,KAAM,SAAS,EACvB,IACT,CCLe,SAARC,IAAmB,CACxB,OAAO,MAAM,KAAK,IAAI,CACxB,CCFe,SAARC,IAAmB,CAExB,QAASC,EAAS,KAAK,QAASC,EAAI,EAAGC,EAAIF,EAAO,OAAQC,EAAIC,EAAG,EAAED,EACjE,QAASE,EAAQH,EAAOC,CAAC,EAAGG,EAAI,EAAGC,EAAIF,EAAM,OAAQC,EAAIC,EAAG,EAAED,EAAG,CAC/D,IAAIE,EAAOH,EAAMC,CAAC,EAClB,GAAIE,EAAM,OAAOA,CACnB,CAGF,OAAO,IACT,CCVe,SAARC,IAAmB,CACxB,IAAIC,EAAO,EACX,QAAWC,KAAQ,KAAM,EAAED,EAC3B,OAAOA,CACT,CCJe,SAARE,IAAmB,CACxB,MAAO,CAAC,KAAK,KAAK,CACpB,CCFe,SAARC,GAAiBC,EAAU,CAEhC,QAASC,EAAS,KAAK,QAASC,EAAI,EAAGC,EAAIF,EAAO,OAAQC,EAAIC,EAAG,EAAED,EACjE,QAASE,EAAQH,EAAOC,CAAC,EAAGG,EAAI,EAAGC,EAAIF,EAAM,OAAQG,EAAMF,EAAIC,EAAG,EAAED,GAC9DE,EAAOH,EAAMC,CAAC,IAAGL,EAAS,KAAKO,EAAMA,EAAK,SAAUF,EAAGD,CAAK,EAIpE,OAAO,IACT,CCPA,SAASI,GAAWC,EAAM,CACxB,OAAO,UAAW,CAChB,KAAK,gBAAgBA,CAAI,CAC3B,CACF,CAEA,SAASC,GAAaC,EAAU,CAC9B,OAAO,UAAW,CAChB,KAAK,kBAAkBA,EAAS,MAAOA,EAAS,KAAK,CACvD,CACF,CAEA,SAASC,GAAaH,EAAMI,EAAO,CACjC,OAAO,UAAW,CAChB,KAAK,aAAaJ,EAAMI,CAAK,CAC/B,CACF,CAEA,SAASC,GAAeH,EAAUE,EAAO,CACvC,OAAO,UAAW,CAChB,KAAK,eAAeF,EAAS,MAAOA,EAAS,MAAOE,CAAK,CAC3D,CACF,CAEA,SAASE,GAAaN,EAAMI,EAAO,CACjC,OAAO,UAAW,CAChB,IAAIG,EAAIH,EAAM,MAAM,KAAM,SAAS,EAC/BG,GAAK,KAAM,KAAK,gBAAgBP,CAAI,EACnC,KAAK,aAAaA,EAAMO,CAAC,CAChC,CACF,CAEA,SAASC,GAAeN,EAAUE,EAAO,CACvC,OAAO,UAAW,CAChB,IAAIG,EAAIH,EAAM,MAAM,KAAM,SAAS,EAC/BG,GAAK,KAAM,KAAK,kBAAkBL,EAAS,MAAOA,EAAS,KAAK,EAC/D,KAAK,eAAeA,EAAS,MAAOA,EAAS,MAAOK,CAAC,CAC5D,CACF,CAEe,SAARE,GAAiBT,EAAMI,EAAO,CACnC,IAAIF,EAAWQ,EAAUV,CAAI,EAE7B,GAAI,UAAU,OAAS,EAAG,CACxB,IAAIW,EAAO,KAAK,KAAK,EACrB,OAAOT,EAAS,MACVS,EAAK,eAAeT,EAAS,MAAOA,EAAS,KAAK,EAClDS,EAAK,aAAaT,CAAQ,CAClC,CAEA,OAAO,KAAK,MAAME,GAAS,KACpBF,EAAS,MAAQD,GAAeF,GAAe,OAAOK,GAAU,WAChEF,EAAS,MAAQM,GAAiBF,GAClCJ,EAAS,MAAQG,GAAiBF,IAAgBD,EAAUE,CAAK,CAAC,CAC3E,CCxDe,SAARQ,GAAiBC,EAAM,CAC5B,OAAQA,EAAK,eAAiBA,EAAK,cAAc,aACzCA,EAAK,UAAYA,GAClBA,EAAK,WACd,CCFA,SAASC,GAAYC,EAAM,CACzB,OAAO,UAAW,CAChB,KAAK,MAAM,eAAeA,CAAI,CAChC,CACF,CAEA,SAASC,GAAcD,EAAME,EAAOC,EAAU,CAC5C,OAAO,UAAW,CAChB,KAAK,MAAM,YAAYH,EAAME,EAAOC,CAAQ,CAC9C,CACF,CAEA,SAASC,GAAcJ,EAAME,EAAOC,EAAU,CAC5C,OAAO,UAAW,CAChB,IAAIE,EAAIH,EAAM,MAAM,KAAM,SAAS,EAC/BG,GAAK,KAAM,KAAK,MAAM,eAAeL,CAAI,EACxC,KAAK,MAAM,YAAYA,EAAMK,EAAGF,CAAQ,CAC/C,CACF,CAEe,SAARG,GAAiBN,EAAME,EAAOC,EAAU,CAC7C,OAAO,UAAU,OAAS,EACpB,KAAK,MAAMD,GAAS,KACdH,GAAc,OAAOG,GAAU,WAC/BE,GACAH,IAAeD,EAAME,EAAOC,GAAmB,EAAa,CAAC,EACnEI,EAAW,KAAK,KAAK,EAAGP,CAAI,CACpC,CAEO,SAASO,EAAWC,EAAMR,EAAM,CACrC,OAAOQ,EAAK,MAAM,iBAAiBR,CAAI,GAChCS,GAAYD,CAAI,EAAE,iBAAiBA,EAAM,IAAI,EAAE,iBAAiBR,CAAI,CAC7E,CClCA,SAASU,GAAeC,EAAM,CAC5B,OAAO,UAAW,CAChB,OAAO,KAAKA,CAAI,CAClB,CACF,CAEA,SAASC,GAAiBD,EAAME,EAAO,CACrC,OAAO,UAAW,CAChB,KAAKF,CAAI,EAAIE,CACf,CACF,CAEA,SAASC,GAAiBH,EAAME,EAAO,CACrC,OAAO,UAAW,CAChB,IAAIE,EAAIF,EAAM,MAAM,KAAM,SAAS,EAC/BE,GAAK,KAAM,OAAO,KAAKJ,CAAI,EAC1B,KAAKA,CAAI,EAAII,CACpB,CACF,CAEe,SAARC,GAAiBL,EAAME,EAAO,CACnC,OAAO,UAAU,OAAS,EACpB,KAAK,MAAMA,GAAS,KAChBH,GAAiB,OAAOG,GAAU,WAClCC,GACAF,IAAkBD,EAAME,CAAK,CAAC,EAClC,KAAK,KAAK,EAAEF,CAAI,CACxB,CC3BA,SAASM,GAAWC,EAAQ,CAC1B,OAAOA,EAAO,KAAK,EAAE,MAAM,OAAO,CACpC,CAEA,SAASC,GAAUC,EAAM,CACvB,OAAOA,EAAK,WAAa,IAAIC,GAAUD,CAAI,CAC7C,CAEA,SAASC,GAAUD,EAAM,CACvB,KAAK,MAAQA,EACb,KAAK,OAASH,GAAWG,EAAK,aAAa,OAAO,GAAK,EAAE,CAC3D,CAEAC,GAAU,UAAY,CACpB,IAAK,SAASC,EAAM,CAClB,IAAIC,EAAI,KAAK,OAAO,QAAQD,CAAI,EAC5BC,EAAI,IACN,KAAK,OAAO,KAAKD,CAAI,EACrB,KAAK,MAAM,aAAa,QAAS,KAAK,OAAO,KAAK,GAAG,CAAC,EAE1D,EACA,OAAQ,SAASA,EAAM,CACrB,IAAIC,EAAI,KAAK,OAAO,QAAQD,CAAI,EAC5BC,GAAK,IACP,KAAK,OAAO,OAAOA,EAAG,CAAC,EACvB,KAAK,MAAM,aAAa,QAAS,KAAK,OAAO,KAAK,GAAG,CAAC,EAE1D,EACA,SAAU,SAASD,EAAM,CACvB,OAAO,KAAK,OAAO,QAAQA,CAAI,GAAK,CACtC,CACF,EAEA,SAASE,GAAWJ,EAAMK,EAAO,CAE/B,QADIC,EAAOP,GAAUC,CAAI,EAAGG,EAAI,GAAII,EAAIF,EAAM,OACvC,EAAEF,EAAII,GAAGD,EAAK,IAAID,EAAMF,CAAC,CAAC,CACnC,CAEA,SAASK,GAAcR,EAAMK,EAAO,CAElC,QADIC,EAAOP,GAAUC,CAAI,EAAGG,EAAI,GAAII,EAAIF,EAAM,OACvC,EAAEF,EAAII,GAAGD,EAAK,OAAOD,EAAMF,CAAC,CAAC,CACtC,CAEA,SAASM,GAAYJ,EAAO,CAC1B,OAAO,UAAW,CAChBD,GAAW,KAAMC,CAAK,CACxB,CACF,CAEA,SAASK,GAAaL,EAAO,CAC3B,OAAO,UAAW,CAChBG,GAAc,KAAMH,CAAK,CAC3B,CACF,CAEA,SAASM,GAAgBN,EAAOO,EAAO,CACrC,OAAO,UAAW,EACfA,EAAM,MAAM,KAAM,SAAS,EAAIR,GAAaI,IAAe,KAAMH,CAAK,CACzE,CACF,CAEe,SAARQ,GAAiBX,EAAMU,EAAO,CACnC,IAAIP,EAAQR,GAAWK,EAAO,EAAE,EAEhC,GAAI,UAAU,OAAS,EAAG,CAExB,QADII,EAAOP,GAAU,KAAK,KAAK,CAAC,EAAGI,EAAI,GAAII,EAAIF,EAAM,OAC9C,EAAEF,EAAII,GAAG,GAAI,CAACD,EAAK,SAASD,EAAMF,CAAC,CAAC,EAAG,MAAO,GACrD,MAAO,EACT,CAEA,OAAO,KAAK,MAAM,OAAOS,GAAU,WAC7BD,GAAkBC,EAClBH,GACAC,IAAcL,EAAOO,CAAK,CAAC,CACnC,CC1EA,SAASE,IAAa,CACpB,KAAK,YAAc,EACrB,CAEA,SAASC,GAAaC,EAAO,CAC3B,OAAO,UAAW,CAChB,KAAK,YAAcA,CACrB,CACF,CAEA,SAASC,GAAaD,EAAO,CAC3B,OAAO,UAAW,CAChB,IAAIE,EAAIF,EAAM,MAAM,KAAM,SAAS,EACnC,KAAK,YAAcE,GAAY,EACjC,CACF,CAEe,SAARC,GAAiBH,EAAO,CAC7B,OAAO,UAAU,OACX,KAAK,KAAKA,GAAS,KACfF,IAAc,OAAOE,GAAU,WAC/BC,GACAF,IAAcC,CAAK,CAAC,EACxB,KAAK,KAAK,EAAE,WACpB,CCxBA,SAASI,IAAa,CACpB,KAAK,UAAY,EACnB,CAEA,SAASC,GAAaC,EAAO,CAC3B,OAAO,UAAW,CAChB,KAAK,UAAYA,CACnB,CACF,CAEA,SAASC,GAAaD,EAAO,CAC3B,OAAO,UAAW,CAChB,IAAIE,EAAIF,EAAM,MAAM,KAAM,SAAS,EACnC,KAAK,UAAYE,GAAY,EAC/B,CACF,CAEe,SAARC,GAAiBH,EAAO,CAC7B,OAAO,UAAU,OACX,KAAK,KAAKA,GAAS,KACfF,IAAc,OAAOE,GAAU,WAC/BC,GACAF,IAAcC,CAAK,CAAC,EACxB,KAAK,KAAK,EAAE,SACpB,CCxBA,SAASI,IAAQ,CACX,KAAK,aAAa,KAAK,WAAW,YAAY,IAAI,CACxD,CAEe,SAARC,IAAmB,CACxB,OAAO,KAAK,KAAKD,EAAK,CACxB,CCNA,SAASE,IAAQ,CACX,KAAK,iBAAiB,KAAK,WAAW,aAAa,KAAM,KAAK,WAAW,UAAU,CACzF,CAEe,SAARC,IAAmB,CACxB,OAAO,KAAK,KAAKD,EAAK,CACxB,CCJe,SAARE,GAAiBC,EAAM,CAC5B,IAAIC,EAAS,OAAOD,GAAS,WAAaA,EAAOE,GAAQF,CAAI,EAC7D,OAAO,KAAK,OAAO,UAAW,CAC5B,OAAO,KAAK,YAAYC,EAAO,MAAM,KAAM,SAAS,CAAC,CACvD,CAAC,CACH,CCJA,SAASE,IAAe,CACtB,OAAO,IACT,CAEe,SAARC,GAAiBC,EAAMC,EAAQ,CACpC,IAAIC,EAAS,OAAOF,GAAS,WAAaA,EAAOG,GAAQH,CAAI,EACzDI,EAASH,GAAU,KAAOH,GAAe,OAAOG,GAAW,WAAaA,EAASI,EAASJ,CAAM,EACpG,OAAO,KAAK,OAAO,UAAW,CAC5B,OAAO,KAAK,aAAaC,EAAO,MAAM,KAAM,SAAS,EAAGE,EAAO,MAAM,KAAM,SAAS,GAAK,IAAI,CAC/F,CAAC,CACH,CCbA,SAASE,IAAS,CAChB,IAAIC,EAAS,KAAK,WACdA,GAAQA,EAAO,YAAY,IAAI,CACrC,CAEe,SAARC,IAAmB,CACxB,OAAO,KAAK,KAAKF,EAAM,CACzB,CCPA,SAASG,IAAyB,CAChC,IAAIC,EAAQ,KAAK,UAAU,EAAK,EAAGC,EAAS,KAAK,WACjD,OAAOA,EAASA,EAAO,aAAaD,EAAO,KAAK,WAAW,EAAIA,CACjE,CAEA,SAASE,IAAsB,CAC7B,IAAIF,EAAQ,KAAK,UAAU,EAAI,EAAGC,EAAS,KAAK,WAChD,OAAOA,EAASA,EAAO,aAAaD,EAAO,KAAK,WAAW,EAAIA,CACjE,CAEe,SAARG,GAAiBC,EAAM,CAC5B,OAAO,KAAK,OAAOA,EAAOF,GAAsBH,EAAsB,CACxE,CCZe,SAARM,GAAiBC,EAAO,CAC7B,OAAO,UAAU,OACX,KAAK,SAAS,WAAYA,CAAK,EAC/B,KAAK,KAAK,EAAE,QACpB,CCJA,SAASC,GAAgBC,EAAU,CACjC,OAAO,SAASC,EAAO,CACrBD,EAAS,KAAK,KAAMC,EAAO,KAAK,QAAQ,CAC1C,CACF,CAEA,SAASC,GAAeC,EAAW,CACjC,OAAOA,EAAU,KAAK,EAAE,MAAM,OAAO,EAAE,IAAI,SAAS,EAAG,CACrD,IAAIC,EAAO,GAAIC,EAAI,EAAE,QAAQ,GAAG,EAChC,OAAIA,GAAK,IAAGD,EAAO,EAAE,MAAMC,EAAI,CAAC,EAAG,EAAI,EAAE,MAAM,EAAGA,CAAC,GAC5C,CAAC,KAAM,EAAG,KAAMD,CAAI,CAC7B,CAAC,CACH,CAEA,SAASE,GAASC,EAAU,CAC1B,OAAO,UAAW,CAChB,IAAIC,EAAK,KAAK,KACd,GAAKA,EACL,SAASC,EAAI,EAAGJ,EAAI,GAAIK,EAAIF,EAAG,OAAQG,EAAGF,EAAIC,EAAG,EAAED,EAC7CE,EAAIH,EAAGC,CAAC,GAAI,CAACF,EAAS,MAAQI,EAAE,OAASJ,EAAS,OAASI,EAAE,OAASJ,EAAS,KACjF,KAAK,oBAAoBI,EAAE,KAAMA,EAAE,SAAUA,EAAE,OAAO,EAEtDH,EAAG,EAAEH,CAAC,EAAIM,EAGV,EAAEN,EAAGG,EAAG,OAASH,EAChB,OAAO,KAAK,KACnB,CACF,CAEA,SAASO,GAAML,EAAUM,EAAOC,EAAS,CACvC,OAAO,UAAW,CAChB,IAAIN,EAAK,KAAK,KAAM,EAAGR,EAAWD,GAAgBc,CAAK,EACvD,GAAIL,GAAI,QAASC,EAAI,EAAGC,EAAIF,EAAG,OAAQC,EAAIC,EAAG,EAAED,EAC9C,IAAK,EAAID,EAAGC,CAAC,GAAG,OAASF,EAAS,MAAQ,EAAE,OAASA,EAAS,KAAM,CAClE,KAAK,oBAAoB,EAAE,KAAM,EAAE,SAAU,EAAE,OAAO,EACtD,KAAK,iBAAiB,EAAE,KAAM,EAAE,SAAWP,EAAU,EAAE,QAAUc,CAAO,EACxE,EAAE,MAAQD,EACV,MACF,EAEF,KAAK,iBAAiBN,EAAS,KAAMP,EAAUc,CAAO,EACtD,EAAI,CAAC,KAAMP,EAAS,KAAM,KAAMA,EAAS,KAAM,MAAOM,EAAO,SAAUb,EAAU,QAASc,CAAO,EAC5FN,EACAA,EAAG,KAAK,CAAC,EADL,KAAK,KAAO,CAAC,CAAC,CAEzB,CACF,CAEe,SAARO,GAAiBR,EAAUM,EAAOC,EAAS,CAChD,IAAIX,EAAYD,GAAeK,EAAW,EAAE,EAAGF,EAAGW,EAAIb,EAAU,OAAQc,EAExE,GAAI,UAAU,OAAS,EAAG,CACxB,IAAIT,EAAK,KAAK,KAAK,EAAE,KACrB,GAAIA,GAAI,QAASC,EAAI,EAAGC,EAAIF,EAAG,OAAQG,EAAGF,EAAIC,EAAG,EAAED,EACjD,IAAKJ,EAAI,EAAGM,EAAIH,EAAGC,CAAC,EAAGJ,EAAIW,EAAG,EAAEX,EAC9B,IAAKY,EAAId,EAAUE,CAAC,GAAG,OAASM,EAAE,MAAQM,EAAE,OAASN,EAAE,KACrD,OAAOA,EAAE,MAIf,MACF,CAGA,IADAH,EAAKK,EAAQD,GAAQN,GAChBD,EAAI,EAAGA,EAAIW,EAAG,EAAEX,EAAG,KAAK,KAAKG,EAAGL,EAAUE,CAAC,EAAGQ,EAAOC,CAAO,CAAC,EAClE,OAAO,IACT,CChEA,SAASI,GAAcC,EAAMC,EAAMC,EAAQ,CACzC,IAAIC,EAASC,GAAYJ,CAAI,EACzBK,EAAQF,EAAO,YAEf,OAAOE,GAAU,WACnBA,EAAQ,IAAIA,EAAMJ,EAAMC,CAAM,GAE9BG,EAAQF,EAAO,SAAS,YAAY,OAAO,EACvCD,GAAQG,EAAM,UAAUJ,EAAMC,EAAO,QAASA,EAAO,UAAU,EAAGG,EAAM,OAASH,EAAO,QACvFG,EAAM,UAAUJ,EAAM,GAAO,EAAK,GAGzCD,EAAK,cAAcK,CAAK,CAC1B,CAEA,SAASC,GAAiBL,EAAMC,EAAQ,CACtC,OAAO,UAAW,CAChB,OAAOH,GAAc,KAAME,EAAMC,CAAM,CACzC,CACF,CAEA,SAASK,GAAiBN,EAAMC,EAAQ,CACtC,OAAO,UAAW,CAChB,OAAOH,GAAc,KAAME,EAAMC,EAAO,MAAM,KAAM,SAAS,CAAC,CAChE,CACF,CAEe,SAARM,GAAiBP,EAAMC,EAAQ,CACpC,OAAO,KAAK,MAAM,OAAOA,GAAW,WAC9BK,GACAD,IAAkBL,EAAMC,CAAM,CAAC,CACvC,CCjCe,SAARO,IAAoB,CACzB,QAASC,EAAS,KAAK,QAASC,EAAI,EAAGC,EAAIF,EAAO,OAAQC,EAAIC,EAAG,EAAED,EACjE,QAASE,EAAQH,EAAOC,CAAC,EAAGG,EAAI,EAAGC,EAAIF,EAAM,OAAQG,EAAMF,EAAIC,EAAG,EAAED,GAC9DE,EAAOH,EAAMC,CAAC,KAAG,MAAME,EAGjC,CC6BO,IAAIC,GAAO,CAAC,IAAI,EAEhB,SAASC,EAAUC,EAAQC,EAAS,CACzC,KAAK,QAAUD,EACf,KAAK,SAAWC,CAClB,CAEA,SAASC,IAAY,CACnB,OAAO,IAAIH,EAAU,CAAC,CAAC,SAAS,eAAe,CAAC,EAAGD,EAAI,CACzD,CAEA,SAASK,IAAsB,CAC7B,OAAO,IACT,CAEAJ,EAAU,UAAYG,GAAU,UAAY,CAC1C,YAAaH,EACb,OAAQK,GACR,UAAWC,GACX,YAAaC,GACb,eAAgBC,GAChB,OAAQC,GACR,KAAMC,GACN,MAAOC,GACP,KAAMC,GACN,KAAMC,GACN,MAAOC,GACP,UAAWV,GACX,MAAOW,GACP,KAAMC,GACN,KAAMC,GACN,MAAOC,GACP,KAAMC,GACN,KAAMC,GACN,MAAOC,GACP,KAAMC,GACN,KAAMC,GACN,MAAOC,GACP,SAAUC,GACV,QAASC,GACT,KAAMC,GACN,KAAMC,GACN,MAAOC,GACP,MAAOC,GACP,OAAQC,GACR,OAAQC,GACR,OAAQC,GACR,MAAOC,GACP,MAAOC,GACP,GAAIC,GACJ,SAAUC,GACV,CAAC,OAAO,QAAQ,EAAGC,EACrB,EAEA,IAAOC,EAAQpC,GCvFA,SAARqC,GAAiBC,EAAU,CAChC,OAAO,OAAOA,GAAa,SACrB,IAAIC,EAAU,CAAC,CAAC,SAAS,cAAcD,CAAQ,CAAC,CAAC,EAAG,CAAC,SAAS,eAAe,CAAC,EAC9E,IAAIC,EAAU,CAAC,CAACD,CAAQ,CAAC,EAAGE,EAAI,CACxC,CCNe,SAARC,GAAiBC,EAAaC,EAASC,EAAW,CACvDF,EAAY,UAAYC,EAAQ,UAAYC,EAC5CA,EAAU,YAAcF,CAC1B,CAEO,SAASG,GAAOC,EAAQC,EAAY,CACzC,IAAIH,EAAY,OAAO,OAAOE,EAAO,SAAS,EAC9C,QAASE,KAAOD,EAAYH,EAAUI,CAAG,EAAID,EAAWC,CAAG,EAC3D,OAAOJ,CACT,CCPO,SAASK,IAAQ,CAAC,CAElB,IAAIC,GAAS,GACTC,GAAW,EAAID,GAEtBE,GAAM,sBACNC,GAAM,oDACNC,EAAM,qDACNC,GAAQ,qBACRC,GAAe,IAAI,OAAO,UAAUJ,EAAG,IAAIA,EAAG,IAAIA,EAAG,MAAM,EAC3DK,GAAe,IAAI,OAAO,UAAUH,CAAG,IAAIA,CAAG,IAAIA,CAAG,MAAM,EAC3DI,GAAgB,IAAI,OAAO,WAAWN,EAAG,IAAIA,EAAG,IAAIA,EAAG,IAAIC,EAAG,MAAM,EACpEM,GAAgB,IAAI,OAAO,WAAWL,CAAG,IAAIA,CAAG,IAAIA,CAAG,IAAID,EAAG,MAAM,EACpEO,GAAe,IAAI,OAAO,UAAUP,EAAG,IAAIC,CAAG,IAAIA,CAAG,MAAM,EAC3DO,GAAgB,IAAI,OAAO,WAAWR,EAAG,IAAIC,CAAG,IAAIA,CAAG,IAAID,EAAG,MAAM,EAEpES,GAAQ,CACV,UAAW,SACX,aAAc,SACd,KAAM,MACN,WAAY,QACZ,MAAO,SACP,MAAO,SACP,OAAQ,SACR,MAAO,EACP,eAAgB,SAChB,KAAM,IACN,WAAY,QACZ,MAAO,SACP,UAAW,SACX,UAAW,QACX,WAAY,QACZ,UAAW,SACX,MAAO,SACP,eAAgB,QAChB,SAAU,SACV,QAAS,SACT,KAAM,MACN,SAAU,IACV,SAAU,MACV,cAAe,SACf,SAAU,SACV,UAAW,MACX,SAAU,SACV,UAAW,SACX,YAAa,QACb,eAAgB,QAChB,WAAY,SACZ,WAAY,SACZ,QAAS,QACT,WAAY,SACZ,aAAc,QACd,cAAe,QACf,cAAe,QACf,cAAe,QACf,cAAe,MACf,WAAY,QACZ,SAAU,SACV,YAAa,MACb,QAAS,QACT,QAAS,QACT,WAAY,QACZ,UAAW,SACX,YAAa,SACb,YAAa,QACb,QAAS,SACT,UAAW,SACX,WAAY,SACZ,KAAM,SACN,UAAW,SACX,KAAM,QACN,MAAO,MACP,YAAa,SACb,KAAM,QACN,SAAU,SACV,QAAS,SACT,UAAW,SACX,OAAQ,QACR,MAAO,SACP,MAAO,SACP,SAAU,SACV,cAAe,SACf,UAAW,QACX,aAAc,SACd,UAAW,SACX,WAAY,SACZ,UAAW,SACX,qBAAsB,SACtB,UAAW,SACX,WAAY,QACZ,UAAW,SACX,UAAW,SACX,YAAa,SACb,cAAe,QACf,aAAc,QACd,eAAgB,QAChB,eAAgB,QAChB,eAAgB,SAChB,YAAa,SACb,KAAM,MACN,UAAW,QACX,MAAO,SACP,QAAS,SACT,OAAQ,QACR,iBAAkB,QAClB,WAAY,IACZ,aAAc,SACd,aAAc,QACd,eAAgB,QAChB,gBAAiB,QACjB,kBAAmB,MACnB,gBAAiB,QACjB,gBAAiB,SACjB,aAAc,QACd,UAAW,SACX,UAAW,SACX,SAAU,SACV,YAAa,SACb,KAAM,IACN,QAAS,SACT,MAAO,QACP,UAAW,QACX,OAAQ,SACR,UAAW,SACX,OAAQ,SACR,cAAe,SACf,UAAW,SACX,cAAe,SACf,cAAe,SACf,WAAY,SACZ,UAAW,SACX,KAAM,SACN,KAAM,SACN,KAAM,SACN,WAAY,SACZ,OAAQ,QACR,cAAe,QACf,IAAK,SACL,UAAW,SACX,UAAW,QACX,YAAa,QACb,OAAQ,SACR,WAAY,SACZ,SAAU,QACV,SAAU,SACV,OAAQ,SACR,OAAQ,SACR,QAAS,QACT,UAAW,QACX,UAAW,QACX,UAAW,QACX,KAAM,SACN,YAAa,MACb,UAAW,QACX,IAAK,SACL,KAAM,MACN,QAAS,SACT,OAAQ,SACR,UAAW,QACX,OAAQ,SACR,MAAO,SACP,MAAO,SACP,WAAY,SACZ,OAAQ,SACR,YAAa,QACf,EAEAC,GAAOd,GAAOe,EAAO,CACnB,KAAKC,EAAU,CACb,OAAO,OAAO,OAAO,IAAI,KAAK,YAAa,KAAMA,CAAQ,CAC3D,EACA,aAAc,CACZ,OAAO,KAAK,IAAI,EAAE,YAAY,CAChC,EACA,IAAKC,GACL,UAAWA,GACX,WAAYC,GACZ,UAAWC,GACX,UAAWC,GACX,SAAUA,EACZ,CAAC,EAED,SAASH,IAAkB,CACzB,OAAO,KAAK,IAAI,EAAE,UAAU,CAC9B,CAEA,SAASC,IAAmB,CAC1B,OAAO,KAAK,IAAI,EAAE,WAAW,CAC/B,CAEA,SAASC,IAAkB,CACzB,OAAOE,GAAW,IAAI,EAAE,UAAU,CACpC,CAEA,SAASD,IAAkB,CACzB,OAAO,KAAK,IAAI,EAAE,UAAU,CAC9B,CAEe,SAARL,EAAuBO,EAAQ,CACpC,IAAIC,EAAGC,EACP,OAAAF,GAAUA,EAAS,IAAI,KAAK,EAAE,YAAY,GAClCC,EAAIjB,GAAM,KAAKgB,CAAM,IAAME,EAAID,EAAE,CAAC,EAAE,OAAQA,EAAI,SAASA,EAAE,CAAC,EAAG,EAAE,EAAGC,IAAM,EAAIC,GAAKF,CAAC,EACtFC,IAAM,EAAI,IAAIE,EAAKH,GAAK,EAAI,GAAQA,GAAK,EAAI,IAAQA,GAAK,EAAI,GAAQA,EAAI,KAASA,EAAI,KAAQ,EAAMA,EAAI,GAAM,CAAC,EAChHC,IAAM,EAAIG,GAAKJ,GAAK,GAAK,IAAMA,GAAK,GAAK,IAAMA,GAAK,EAAI,KAAOA,EAAI,KAAQ,GAAI,EAC/EC,IAAM,EAAIG,GAAMJ,GAAK,GAAK,GAAQA,GAAK,EAAI,IAAQA,GAAK,EAAI,GAAQA,GAAK,EAAI,IAAQA,GAAK,EAAI,GAAQA,EAAI,MAAUA,EAAI,KAAQ,EAAMA,EAAI,IAAQ,GAAI,EACtJ,OACCA,EAAIhB,GAAa,KAAKe,CAAM,GAAK,IAAII,EAAIH,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAG,CAAC,GAC5DA,EAAIf,GAAa,KAAKc,CAAM,GAAK,IAAII,EAAIH,EAAE,CAAC,EAAI,IAAM,IAAKA,EAAE,CAAC,EAAI,IAAM,IAAKA,EAAE,CAAC,EAAI,IAAM,IAAK,CAAC,GAChGA,EAAId,GAAc,KAAKa,CAAM,GAAKK,GAAKJ,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,CAAC,GAC7DA,EAAIb,GAAc,KAAKY,CAAM,GAAKK,GAAKJ,EAAE,CAAC,EAAI,IAAM,IAAKA,EAAE,CAAC,EAAI,IAAM,IAAKA,EAAE,CAAC,EAAI,IAAM,IAAKA,EAAE,CAAC,CAAC,GACjGA,EAAIZ,GAAa,KAAKW,CAAM,GAAKM,GAAKL,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAI,IAAKA,EAAE,CAAC,EAAI,IAAK,CAAC,GACrEA,EAAIX,GAAc,KAAKU,CAAM,GAAKM,GAAKL,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAI,IAAKA,EAAE,CAAC,EAAI,IAAKA,EAAE,CAAC,CAAC,EAC1EV,GAAM,eAAeS,CAAM,EAAIG,GAAKZ,GAAMS,CAAM,CAAC,EACjDA,IAAW,cAAgB,IAAII,EAAI,IAAK,IAAK,IAAK,CAAC,EACnD,IACR,CAEA,SAASD,GAAKI,EAAG,CACf,OAAO,IAAIH,EAAIG,GAAK,GAAK,IAAMA,GAAK,EAAI,IAAMA,EAAI,IAAM,CAAC,CAC3D,CAEA,SAASF,GAAKG,EAAGC,EAAGC,EAAGC,EAAG,CACxB,OAAIA,GAAK,IAAGH,EAAIC,EAAIC,EAAI,KACjB,IAAIN,EAAII,EAAGC,EAAGC,EAAGC,CAAC,CAC3B,CAEO,SAASC,GAAWC,EAAG,CAE5B,OADMA,aAAanC,KAAQmC,EAAIpB,EAAMoB,CAAC,GACjCA,GACLA,EAAIA,EAAE,IAAI,EACH,IAAIT,EAAIS,EAAE,EAAGA,EAAE,EAAGA,EAAE,EAAGA,EAAE,OAAO,GAFxB,IAAIT,CAGrB,CAEO,SAASU,GAAIN,EAAGC,EAAGC,EAAGK,EAAS,CACpC,OAAO,UAAU,SAAW,EAAIH,GAAWJ,CAAC,EAAI,IAAIJ,EAAII,EAAGC,EAAGC,EAAGK,GAAkB,CAAW,CAChG,CAEO,SAASX,EAAII,EAAGC,EAAGC,EAAGK,EAAS,CACpC,KAAK,EAAI,CAACP,EACV,KAAK,EAAI,CAACC,EACV,KAAK,EAAI,CAACC,EACV,KAAK,QAAU,CAACK,CAClB,CAEAvB,GAAOY,EAAKU,GAAKE,GAAOtC,GAAO,CAC7B,SAASuC,EAAG,CACV,OAAAA,EAAIA,GAAK,KAAOrC,GAAW,KAAK,IAAIA,GAAUqC,CAAC,EACxC,IAAIb,EAAI,KAAK,EAAIa,EAAG,KAAK,EAAIA,EAAG,KAAK,EAAIA,EAAG,KAAK,OAAO,CACjE,EACA,OAAOA,EAAG,CACR,OAAAA,EAAIA,GAAK,KAAOtC,GAAS,KAAK,IAAIA,GAAQsC,CAAC,EACpC,IAAIb,EAAI,KAAK,EAAIa,EAAG,KAAK,EAAIA,EAAG,KAAK,EAAIA,EAAG,KAAK,OAAO,CACjE,EACA,KAAM,CACJ,OAAO,IACT,EACA,OAAQ,CACN,OAAO,IAAIb,EAAIc,EAAO,KAAK,CAAC,EAAGA,EAAO,KAAK,CAAC,EAAGA,EAAO,KAAK,CAAC,EAAGC,GAAO,KAAK,OAAO,CAAC,CACrF,EACA,aAAc,CACZ,MAAQ,KAAQ,KAAK,GAAK,KAAK,EAAI,OAC3B,KAAQ,KAAK,GAAK,KAAK,EAAI,OAC3B,KAAQ,KAAK,GAAK,KAAK,EAAI,OAC3B,GAAK,KAAK,SAAW,KAAK,SAAW,CAC/C,EACA,IAAKC,GACL,UAAWA,GACX,WAAYC,GACZ,UAAWC,GACX,SAAUA,EACZ,CAAC,CAAC,EAEF,SAASF,IAAgB,CACvB,MAAO,IAAIG,EAAI,KAAK,CAAC,CAAC,GAAGA,EAAI,KAAK,CAAC,CAAC,GAAGA,EAAI,KAAK,CAAC,CAAC,EACpD,CAEA,SAASF,IAAiB,CACxB,MAAO,IAAIE,EAAI,KAAK,CAAC,CAAC,GAAGA,EAAI,KAAK,CAAC,CAAC,GAAGA,EAAI,KAAK,CAAC,CAAC,GAAGA,GAAK,MAAM,KAAK,OAAO,EAAI,EAAI,KAAK,SAAW,GAAG,CAAC,EAC1G,CAEA,SAASD,IAAgB,CACvB,IAAMX,EAAIQ,GAAO,KAAK,OAAO,EAC7B,MAAO,GAAGR,IAAM,EAAI,OAAS,OAAO,GAAGO,EAAO,KAAK,CAAC,CAAC,KAAKA,EAAO,KAAK,CAAC,CAAC,KAAKA,EAAO,KAAK,CAAC,CAAC,GAAGP,IAAM,EAAI,IAAM,KAAKA,CAAC,GAAG,EACzH,CAEA,SAASQ,GAAOJ,EAAS,CACvB,OAAO,MAAMA,CAAO,EAAI,EAAI,KAAK,IAAI,EAAG,KAAK,IAAI,EAAGA,CAAO,CAAC,CAC9D,CAEA,SAASG,EAAOM,EAAO,CACrB,OAAO,KAAK,IAAI,EAAG,KAAK,IAAI,IAAK,KAAK,MAAMA,CAAK,GAAK,CAAC,CAAC,CAC1D,CAEA,SAASD,EAAIC,EAAO,CAClB,OAAAA,EAAQN,EAAOM,CAAK,GACZA,EAAQ,GAAK,IAAM,IAAMA,EAAM,SAAS,EAAE,CACpD,CAEA,SAASlB,GAAKmB,EAAGC,EAAGxB,EAAGS,EAAG,CACxB,OAAIA,GAAK,EAAGc,EAAIC,EAAIxB,EAAI,IACfA,GAAK,GAAKA,GAAK,EAAGuB,EAAIC,EAAI,IAC1BA,GAAK,IAAGD,EAAI,KACd,IAAIE,EAAIF,EAAGC,EAAGxB,EAAGS,CAAC,CAC3B,CAEO,SAASZ,GAAWc,EAAG,CAC5B,GAAIA,aAAac,EAAK,OAAO,IAAIA,EAAId,EAAE,EAAGA,EAAE,EAAGA,EAAE,EAAGA,EAAE,OAAO,EAE7D,GADMA,aAAanC,KAAQmC,EAAIpB,EAAMoB,CAAC,GAClC,CAACA,EAAG,OAAO,IAAIc,EACnB,GAAId,aAAac,EAAK,OAAOd,EAC7BA,EAAIA,EAAE,IAAI,EACV,IAAIL,EAAIK,EAAE,EAAI,IACVJ,EAAII,EAAE,EAAI,IACVH,EAAIG,EAAE,EAAI,IACVe,EAAM,KAAK,IAAIpB,EAAGC,EAAGC,CAAC,EACtBmB,EAAM,KAAK,IAAIrB,EAAGC,EAAGC,CAAC,EACtBe,EAAI,IACJC,EAAIG,EAAMD,EACV1B,GAAK2B,EAAMD,GAAO,EACtB,OAAIF,GACElB,IAAMqB,EAAKJ,GAAKhB,EAAIC,GAAKgB,GAAKjB,EAAIC,GAAK,EAClCD,IAAMoB,EAAKJ,GAAKf,EAAIF,GAAKkB,EAAI,EACjCD,GAAKjB,EAAIC,GAAKiB,EAAI,EACvBA,GAAKxB,EAAI,GAAM2B,EAAMD,EAAM,EAAIC,EAAMD,EACrCH,GAAK,IAELC,EAAIxB,EAAI,GAAKA,EAAI,EAAI,EAAIuB,EAEpB,IAAIE,EAAIF,EAAGC,EAAGxB,EAAGW,EAAE,OAAO,CACnC,CAEO,SAASiB,GAAIL,EAAGC,EAAGxB,EAAGa,EAAS,CACpC,OAAO,UAAU,SAAW,EAAIhB,GAAW0B,CAAC,EAAI,IAAIE,EAAIF,EAAGC,EAAGxB,EAAGa,GAAkB,CAAW,CAChG,CAEA,SAASY,EAAIF,EAAGC,EAAGxB,EAAGa,EAAS,CAC7B,KAAK,EAAI,CAACU,EACV,KAAK,EAAI,CAACC,EACV,KAAK,EAAI,CAACxB,EACV,KAAK,QAAU,CAACa,CAClB,CAEAvB,GAAOmC,EAAKG,GAAKd,GAAOtC,GAAO,CAC7B,SAASuC,EAAG,CACV,OAAAA,EAAIA,GAAK,KAAOrC,GAAW,KAAK,IAAIA,GAAUqC,CAAC,EACxC,IAAIU,EAAI,KAAK,EAAG,KAAK,EAAG,KAAK,EAAIV,EAAG,KAAK,OAAO,CACzD,EACA,OAAOA,EAAG,CACR,OAAAA,EAAIA,GAAK,KAAOtC,GAAS,KAAK,IAAIA,GAAQsC,CAAC,EACpC,IAAIU,EAAI,KAAK,EAAG,KAAK,EAAG,KAAK,EAAIV,EAAG,KAAK,OAAO,CACzD,EACA,KAAM,CACJ,IAAIQ,EAAI,KAAK,EAAI,KAAO,KAAK,EAAI,GAAK,IAClCC,EAAI,MAAMD,CAAC,GAAK,MAAM,KAAK,CAAC,EAAI,EAAI,KAAK,EACzCvB,EAAI,KAAK,EACT6B,EAAK7B,GAAKA,EAAI,GAAMA,EAAI,EAAIA,GAAKwB,EACjCM,EAAK,EAAI9B,EAAI6B,EACjB,OAAO,IAAI3B,EACT6B,GAAQR,GAAK,IAAMA,EAAI,IAAMA,EAAI,IAAKO,EAAID,CAAE,EAC5CE,GAAQR,EAAGO,EAAID,CAAE,EACjBE,GAAQR,EAAI,IAAMA,EAAI,IAAMA,EAAI,IAAKO,EAAID,CAAE,EAC3C,KAAK,OACP,CACF,EACA,OAAQ,CACN,OAAO,IAAIJ,EAAIO,GAAO,KAAK,CAAC,EAAGC,GAAO,KAAK,CAAC,EAAGA,GAAO,KAAK,CAAC,EAAGhB,GAAO,KAAK,OAAO,CAAC,CACrF,EACA,aAAc,CACZ,OAAQ,GAAK,KAAK,GAAK,KAAK,GAAK,GAAK,MAAM,KAAK,CAAC,IAC1C,GAAK,KAAK,GAAK,KAAK,GAAK,GACzB,GAAK,KAAK,SAAW,KAAK,SAAW,CAC/C,EACA,WAAY,CACV,IAAMR,EAAIQ,GAAO,KAAK,OAAO,EAC7B,MAAO,GAAGR,IAAM,EAAI,OAAS,OAAO,GAAGuB,GAAO,KAAK,CAAC,CAAC,KAAKC,GAAO,KAAK,CAAC,EAAI,GAAG,MAAMA,GAAO,KAAK,CAAC,EAAI,GAAG,IAAIxB,IAAM,EAAI,IAAM,KAAKA,CAAC,GAAG,EACvI,CACF,CAAC,CAAC,EAEF,SAASuB,GAAOV,EAAO,CACrB,OAAAA,GAASA,GAAS,GAAK,IAChBA,EAAQ,EAAIA,EAAQ,IAAMA,CACnC,CAEA,SAASW,GAAOX,EAAO,CACrB,OAAO,KAAK,IAAI,EAAG,KAAK,IAAI,EAAGA,GAAS,CAAC,CAAC,CAC5C,CAGA,SAASS,GAAQR,EAAGO,EAAID,EAAI,CAC1B,OAAQN,EAAI,GAAKO,GAAMD,EAAKC,GAAMP,EAAI,GAChCA,EAAI,IAAMM,EACVN,EAAI,IAAMO,GAAMD,EAAKC,IAAO,IAAMP,GAAK,GACvCO,GAAM,GACd,CC3YO,SAASI,GAAMC,EAAIC,EAAIC,EAAIC,EAAIC,EAAI,CACxC,IAAIC,EAAKL,EAAKA,EAAIM,EAAKD,EAAKL,EAC5B,QAAS,EAAI,EAAIA,EAAK,EAAIK,EAAKC,GAAML,GAC9B,EAAI,EAAII,EAAK,EAAIC,GAAMJ,GACvB,EAAI,EAAIF,EAAK,EAAIK,EAAK,EAAIC,GAAMH,EACjCG,EAAKF,GAAM,CACnB,CAEe,SAARG,GAAiBC,EAAQ,CAC9B,IAAIC,EAAID,EAAO,OAAS,EACxB,OAAO,SAASE,EAAG,CACjB,IAAIC,EAAID,GAAK,EAAKA,EAAI,EAAKA,GAAK,GAAKA,EAAI,EAAGD,EAAI,GAAK,KAAK,MAAMC,EAAID,CAAC,EACjEP,EAAKM,EAAOG,CAAC,EACbR,EAAKK,EAAOG,EAAI,CAAC,EACjBV,EAAKU,EAAI,EAAIH,EAAOG,EAAI,CAAC,EAAI,EAAIT,EAAKC,EACtCC,EAAKO,EAAIF,EAAI,EAAID,EAAOG,EAAI,CAAC,EAAI,EAAIR,EAAKD,EAC9C,OAAOH,IAAOW,EAAIC,EAAIF,GAAKA,EAAGR,EAAIC,EAAIC,EAAIC,CAAE,CAC9C,CACF,CChBe,SAARQ,GAAiBC,EAAQ,CAC9B,IAAIC,EAAID,EAAO,OACf,OAAO,SAASE,EAAG,CACjB,IAAIC,EAAI,KAAK,QAAQD,GAAK,GAAK,EAAI,EAAEA,EAAIA,GAAKD,CAAC,EAC3CG,EAAKJ,GAAQG,EAAIF,EAAI,GAAKA,CAAC,EAC3BI,EAAKL,EAAOG,EAAIF,CAAC,EACjBK,EAAKN,GAAQG,EAAI,GAAKF,CAAC,EACvBM,EAAKP,GAAQG,EAAI,GAAKF,CAAC,EAC3B,OAAOO,IAAON,EAAIC,EAAIF,GAAKA,EAAGG,EAAIC,EAAIC,EAAIC,CAAE,CAC9C,CACF,CCZA,IAAOE,GAAQC,GAAK,IAAMA,ECE1B,SAASC,GAAOC,EAAGC,EAAG,CACpB,OAAO,SAASC,EAAG,CACjB,OAAOF,EAAIE,EAAID,CACjB,CACF,CAEA,SAASE,GAAYH,EAAGI,EAAGC,EAAG,CAC5B,OAAOL,EAAI,KAAK,IAAIA,EAAGK,CAAC,EAAGD,EAAI,KAAK,IAAIA,EAAGC,CAAC,EAAIL,EAAGK,EAAI,EAAIA,EAAG,SAASH,EAAG,CACxE,OAAO,KAAK,IAAIF,EAAIE,EAAIE,EAAGC,CAAC,CAC9B,CACF,CAOO,SAASC,GAAMC,EAAG,CACvB,OAAQA,EAAI,CAACA,IAAO,EAAIC,GAAU,SAASC,EAAGC,EAAG,CAC/C,OAAOA,EAAID,EAAIE,GAAYF,EAAGC,EAAGH,CAAC,EAAIK,GAAS,MAAMH,CAAC,EAAIC,EAAID,CAAC,CACjE,CACF,CAEe,SAARD,GAAyBC,EAAGC,EAAG,CACpC,IAAIG,EAAIH,EAAID,EACZ,OAAOI,EAAIC,GAAOL,EAAGI,CAAC,EAAID,GAAS,MAAMH,CAAC,EAAIC,EAAID,CAAC,CACrD,CCvBA,IAAOM,GAAS,SAASC,EAASC,EAAG,CACnC,IAAIC,EAAQC,GAAMF,CAAC,EAEnB,SAASG,EAAIC,EAAOC,EAAK,CACvB,IAAIC,EAAIL,GAAOG,EAAQD,GAASC,CAAK,GAAG,GAAIC,EAAMF,GAASE,CAAG,GAAG,CAAC,EAC9DE,EAAIN,EAAMG,EAAM,EAAGC,EAAI,CAAC,EACxBG,EAAIP,EAAMG,EAAM,EAAGC,EAAI,CAAC,EACxBI,EAAUC,GAAQN,EAAM,QAASC,EAAI,OAAO,EAChD,OAAO,SAASM,EAAG,CACjB,OAAAP,EAAM,EAAIE,EAAEK,CAAC,EACbP,EAAM,EAAIG,EAAEI,CAAC,EACbP,EAAM,EAAII,EAAEG,CAAC,EACbP,EAAM,QAAUK,EAAQE,CAAC,EAClBP,EAAQ,EACjB,CACF,CAEA,OAAAD,EAAI,MAAQJ,EAELI,CACT,EAAG,CAAC,EAEJ,SAASS,GAAUC,EAAQ,CACzB,OAAO,SAASC,EAAQ,CACtB,IAAI,EAAIA,EAAO,OACX,EAAI,IAAI,MAAM,CAAC,EACfP,EAAI,IAAI,MAAM,CAAC,EACfC,EAAI,IAAI,MAAM,CAAC,EACf,EAAGP,EACP,IAAK,EAAI,EAAG,EAAI,EAAG,EAAE,EACnBA,EAAQE,GAASW,EAAO,CAAC,CAAC,EAC1B,EAAE,CAAC,EAAIb,EAAM,GAAK,EAClBM,EAAE,CAAC,EAAIN,EAAM,GAAK,EAClBO,EAAE,CAAC,EAAIP,EAAM,GAAK,EAEpB,SAAIY,EAAO,CAAC,EACZN,EAAIM,EAAON,CAAC,EACZC,EAAIK,EAAOL,CAAC,EACZP,EAAM,QAAU,EACT,SAASU,EAAG,CACjB,OAAAV,EAAM,EAAI,EAAEU,CAAC,EACbV,EAAM,EAAIM,EAAEI,CAAC,EACbV,EAAM,EAAIO,EAAEG,CAAC,EACNV,EAAQ,EACjB,CACF,CACF,CAEO,IAAIc,GAAWH,GAAUI,EAAK,EAC1BC,GAAiBL,GAAUM,EAAW,ECtDlC,SAARC,EAAiBC,EAAGC,EAAG,CAC5B,OAAOD,EAAI,CAACA,EAAGC,EAAI,CAACA,EAAG,SAASC,EAAG,CACjC,OAAOF,GAAK,EAAIE,GAAKD,EAAIC,CAC3B,CACF,CCFA,IAAIC,GAAM,8CACNC,GAAM,IAAI,OAAOD,GAAI,OAAQ,GAAG,EAEpC,SAASE,GAAKC,EAAG,CACf,OAAO,UAAW,CAChB,OAAOA,CACT,CACF,CAEA,SAASC,GAAID,EAAG,CACd,OAAO,SAAS,EAAG,CACjB,OAAOA,EAAE,CAAC,EAAI,EAChB,CACF,CAEe,SAARE,GAAiBC,EAAGH,EAAG,CAC5B,IAAII,EAAKP,GAAI,UAAYC,GAAI,UAAY,EACrCO,EACAC,EACAC,EACA,EAAI,GACJC,EAAI,CAAC,EACLC,EAAI,CAAC,EAMT,IAHAN,EAAIA,EAAI,GAAIH,EAAIA,EAAI,IAGZK,EAAKR,GAAI,KAAKM,CAAC,KACfG,EAAKR,GAAI,KAAKE,CAAC,KAChBO,EAAKD,EAAG,OAASF,IACpBG,EAAKP,EAAE,MAAMI,EAAIG,CAAE,EACfC,EAAE,CAAC,EAAGA,EAAE,CAAC,GAAKD,EACbC,EAAE,EAAE,CAAC,EAAID,IAEXF,EAAKA,EAAG,CAAC,MAAQC,EAAKA,EAAG,CAAC,GACzBE,EAAE,CAAC,EAAGA,EAAE,CAAC,GAAKF,EACbE,EAAE,EAAE,CAAC,EAAIF,GAEdE,EAAE,EAAE,CAAC,EAAI,KACTC,EAAE,KAAK,CAAC,EAAM,EAAGC,EAAOL,EAAIC,CAAE,CAAC,CAAC,GAElCF,EAAKN,GAAI,UAIX,OAAIM,EAAKJ,EAAE,SACTO,EAAKP,EAAE,MAAMI,CAAE,EACXI,EAAE,CAAC,EAAGA,EAAE,CAAC,GAAKD,EACbC,EAAE,EAAE,CAAC,EAAID,GAKTC,EAAE,OAAS,EAAKC,EAAE,CAAC,EACpBR,GAAIQ,EAAE,CAAC,EAAE,CAAC,EACVV,GAAKC,CAAC,GACLA,EAAIS,EAAE,OAAQ,SAASE,EAAG,CACzB,QAASC,EAAI,EAAGC,EAAGD,EAAIZ,EAAG,EAAEY,EAAGJ,GAAGK,EAAIJ,EAAEG,CAAC,GAAG,CAAC,EAAIC,EAAE,EAAEF,CAAC,EACtD,OAAOH,EAAE,KAAK,EAAE,CAClB,EACR,CC/DA,IAAIM,GAAU,IAAM,KAAK,GAEdC,GAAW,CACpB,WAAY,EACZ,WAAY,EACZ,OAAQ,EACR,MAAO,EACP,OAAQ,EACR,OAAQ,CACV,EAEe,SAARC,GAAiBC,EAAGC,EAAGC,EAAGC,EAAGC,EAAGC,EAAG,CACxC,IAAIC,EAAQC,EAAQC,EACpB,OAAIF,EAAS,KAAK,KAAKN,EAAIA,EAAIC,EAAIA,CAAC,KAAGD,GAAKM,EAAQL,GAAKK,IACrDE,EAAQR,EAAIE,EAAID,EAAIE,KAAGD,GAAKF,EAAIQ,EAAOL,GAAKF,EAAIO,IAChDD,EAAS,KAAK,KAAKL,EAAIA,EAAIC,EAAIA,CAAC,KAAGD,GAAKK,EAAQJ,GAAKI,EAAQC,GAASD,GACtEP,EAAIG,EAAIF,EAAIC,IAAGF,EAAI,CAACA,EAAGC,EAAI,CAACA,EAAGO,EAAQ,CAACA,EAAOF,EAAS,CAACA,GACtD,CACL,WAAYF,EACZ,WAAYC,EACZ,OAAQ,KAAK,MAAMJ,EAAGD,CAAC,EAAIH,GAC3B,MAAO,KAAK,KAAKW,CAAK,EAAIX,GAC1B,OAAQS,EACR,OAAQC,CACV,CACF,CCvBA,IAAIE,GAGG,SAASC,GAASC,EAAO,CAC9B,IAAMC,EAAI,IAAK,OAAO,WAAc,WAAa,UAAY,iBAAiBD,EAAQ,EAAE,EACxF,OAAOC,EAAE,WAAaC,GAAWC,GAAUF,EAAE,EAAGA,EAAE,EAAGA,EAAE,EAAGA,EAAE,EAAGA,EAAE,EAAGA,EAAE,CAAC,CACzE,CAEO,SAASG,GAASJ,EAAO,CAC9B,OAAIA,GAAS,KAAaE,IACrBJ,KAASA,GAAU,SAAS,gBAAgB,6BAA8B,GAAG,GAClFA,GAAQ,aAAa,YAAaE,CAAK,GACjCA,EAAQF,GAAQ,UAAU,QAAQ,YAAY,IACpDE,EAAQA,EAAM,OACPG,GAAUH,EAAM,EAAGA,EAAM,EAAGA,EAAM,EAAGA,EAAM,EAAGA,EAAM,EAAGA,EAAM,CAAC,GAFNE,GAGjE,CCdA,SAASG,GAAqBC,EAAOC,EAASC,EAASC,EAAU,CAE/D,SAASC,EAAIC,EAAG,CACd,OAAOA,EAAE,OAASA,EAAE,IAAI,EAAI,IAAM,EACpC,CAEA,SAASC,EAAUC,EAAIC,EAAIC,EAAIC,EAAIL,EAAGM,EAAG,CACvC,GAAIJ,IAAOE,GAAMD,IAAOE,EAAI,CAC1B,IAAIE,EAAIP,EAAE,KAAK,aAAc,KAAMJ,EAAS,KAAMC,CAAO,EACzDS,EAAE,KAAK,CAAC,EAAGC,EAAI,EAAG,EAAGC,EAAON,EAAIE,CAAE,CAAC,EAAG,CAAC,EAAGG,EAAI,EAAG,EAAGC,EAAOL,EAAIE,CAAE,CAAC,CAAC,CACrE,MAAWD,GAAMC,IACfL,EAAE,KAAK,aAAeI,EAAKR,EAAUS,EAAKR,CAAO,CAErD,CAEA,SAASY,EAAOC,EAAGC,EAAGX,EAAGM,EAAG,CACtBI,IAAMC,GACJD,EAAIC,EAAI,IAAKA,GAAK,IAAcA,EAAID,EAAI,MAAKA,GAAK,KACtDJ,EAAE,KAAK,CAAC,EAAGN,EAAE,KAAKD,EAAIC,CAAC,EAAI,UAAW,KAAMF,CAAQ,EAAI,EAAG,EAAGU,EAAOE,EAAGC,CAAC,CAAC,CAAC,GAClEA,GACTX,EAAE,KAAKD,EAAIC,CAAC,EAAI,UAAYW,EAAIb,CAAQ,CAE5C,CAEA,SAASc,EAAMF,EAAGC,EAAGX,EAAGM,EAAG,CACrBI,IAAMC,EACRL,EAAE,KAAK,CAAC,EAAGN,EAAE,KAAKD,EAAIC,CAAC,EAAI,SAAU,KAAMF,CAAQ,EAAI,EAAG,EAAGU,EAAOE,EAAGC,CAAC,CAAC,CAAC,EACjEA,GACTX,EAAE,KAAKD,EAAIC,CAAC,EAAI,SAAWW,EAAIb,CAAQ,CAE3C,CAEA,SAASe,EAAMX,EAAIC,EAAIC,EAAIC,EAAIL,EAAGM,EAAG,CACnC,GAAIJ,IAAOE,GAAMD,IAAOE,EAAI,CAC1B,IAAIE,EAAIP,EAAE,KAAKD,EAAIC,CAAC,EAAI,SAAU,KAAM,IAAK,KAAM,GAAG,EACtDM,EAAE,KAAK,CAAC,EAAGC,EAAI,EAAG,EAAGC,EAAON,EAAIE,CAAE,CAAC,EAAG,CAAC,EAAGG,EAAI,EAAG,EAAGC,EAAOL,EAAIE,CAAE,CAAC,CAAC,CACrE,MAAWD,IAAO,GAAKC,IAAO,IAC5BL,EAAE,KAAKD,EAAIC,CAAC,EAAI,SAAWI,EAAK,IAAMC,EAAK,GAAG,CAElD,CAEA,OAAO,SAASK,EAAGC,EAAG,CACpB,IAAIX,EAAI,CAAC,EACLM,EAAI,CAAC,EACT,OAAAI,EAAIf,EAAMe,CAAC,EAAGC,EAAIhB,EAAMgB,CAAC,EACzBV,EAAUS,EAAE,WAAYA,EAAE,WAAYC,EAAE,WAAYA,EAAE,WAAYX,EAAGM,CAAC,EACtEG,EAAOC,EAAE,OAAQC,EAAE,OAAQX,EAAGM,CAAC,EAC/BM,EAAMF,EAAE,MAAOC,EAAE,MAAOX,EAAGM,CAAC,EAC5BO,EAAMH,EAAE,OAAQA,EAAE,OAAQC,EAAE,OAAQA,EAAE,OAAQX,EAAGM,CAAC,EAClDI,EAAIC,EAAI,KACD,SAASG,EAAG,CAEjB,QADIP,EAAI,GAAIQ,EAAIT,EAAE,OAAQU,EACnB,EAAET,EAAIQ,GAAGf,GAAGgB,EAAIV,EAAEC,CAAC,GAAG,CAAC,EAAIS,EAAE,EAAEF,CAAC,EACvC,OAAOd,EAAE,KAAK,EAAE,CAClB,CACF,CACF,CAEO,IAAIiB,GAA0BvB,GAAqBwB,GAAU,OAAQ,MAAO,MAAM,EAC9EC,GAA0BzB,GAAqB0B,GAAU,KAAM,IAAK,GAAG,EC9DlF,IAAIC,GAAQ,EACRC,GAAU,EACVC,GAAW,EACXC,GAAY,IACZC,GACAC,GACAC,GAAY,EACZC,GAAW,EACXC,GAAY,EACZC,GAAQ,OAAO,aAAgB,UAAY,YAAY,IAAM,YAAc,KAC3EC,GAAW,OAAO,QAAW,UAAY,OAAO,sBAAwB,OAAO,sBAAsB,KAAK,MAAM,EAAI,SAASC,EAAG,CAAE,WAAWA,EAAG,EAAE,CAAG,EAElJ,SAASC,IAAM,CACpB,OAAOL,KAAaG,GAASG,EAAQ,EAAGN,GAAWE,GAAM,IAAI,EAAID,GACnE,CAEA,SAASK,IAAW,CAClBN,GAAW,CACb,CAEO,SAASO,IAAQ,CACtB,KAAK,MACL,KAAK,MACL,KAAK,MAAQ,IACf,CAEAA,GAAM,UAAYC,GAAM,UAAY,CAClC,YAAaD,GACb,QAAS,SAASE,EAAUC,EAAOC,EAAM,CACvC,GAAI,OAAOF,GAAa,WAAY,MAAM,IAAI,UAAU,4BAA4B,EACpFE,GAAQA,GAAQ,KAAON,GAAI,EAAI,CAACM,IAASD,GAAS,KAAO,EAAI,CAACA,GAC1D,CAAC,KAAK,OAASZ,KAAa,OAC1BA,GAAUA,GAAS,MAAQ,KAC1BD,GAAW,KAChBC,GAAW,MAEb,KAAK,MAAQW,EACb,KAAK,MAAQE,EACbC,GAAM,CACR,EACA,KAAM,UAAW,CACX,KAAK,QACP,KAAK,MAAQ,KACb,KAAK,MAAQ,IACbA,GAAM,EAEV,CACF,EAEO,SAASJ,GAAMC,EAAUC,EAAOC,EAAM,CAC3C,IAAIE,EAAI,IAAIN,GACZ,OAAAM,EAAE,QAAQJ,EAAUC,EAAOC,CAAI,EACxBE,CACT,CAEO,SAASC,IAAa,CAC3BT,GAAI,EACJ,EAAEZ,GAEF,QADIoB,EAAIhB,GAAUkB,EACXF,IACAE,EAAIf,GAAWa,EAAE,QAAU,GAAGA,EAAE,MAAM,KAAK,OAAWE,CAAC,EAC5DF,EAAIA,EAAE,MAER,EAAEpB,EACJ,CAEA,SAASuB,IAAO,CACdhB,IAAYD,GAAYG,GAAM,IAAI,GAAKD,GACvCR,GAAQC,GAAU,EAClB,GAAI,CACFoB,GAAW,CACb,QAAE,CACArB,GAAQ,EACRwB,GAAI,EACJjB,GAAW,CACb,CACF,CAEA,SAASkB,IAAO,CACd,IAAIb,EAAMH,GAAM,IAAI,EAAGQ,EAAQL,EAAMN,GACjCW,EAAQd,KAAWK,IAAaS,EAAOX,GAAYM,EACzD,CAEA,SAASY,IAAM,CAEb,QADIE,EAAIC,EAAKvB,GAAUwB,EAAIV,EAAO,IAC3BS,GACDA,EAAG,OACDT,EAAOS,EAAG,QAAOT,EAAOS,EAAG,OAC/BD,EAAKC,EAAIA,EAAKA,EAAG,QAEjBC,EAAKD,EAAG,MAAOA,EAAG,MAAQ,KAC1BA,EAAKD,EAAKA,EAAG,MAAQE,EAAKxB,GAAWwB,GAGzCvB,GAAWqB,EACXP,GAAMD,CAAI,CACZ,CAEA,SAASC,GAAMD,EAAM,CACnB,GAAI,CAAAlB,GACJ,CAAIC,KAASA,GAAU,aAAaA,EAAO,GAC3C,IAAIgB,EAAQC,EAAOX,GACfU,EAAQ,IACNC,EAAO,MAAUjB,GAAU,WAAWsB,GAAML,EAAOT,GAAM,IAAI,EAAID,EAAS,GAC1EN,KAAUA,GAAW,cAAcA,EAAQ,KAE1CA,KAAUI,GAAYG,GAAM,IAAI,EAAGP,GAAW,YAAYuB,GAAMtB,EAAS,GAC9EH,GAAQ,EAAGU,GAASa,EAAI,GAE5B,CC3Ge,SAARM,GAAiBC,EAAUC,EAAOC,EAAM,CAC7C,IAAIC,EAAI,IAAIC,GACZ,OAAAH,EAAQA,GAAS,KAAO,EAAI,CAACA,EAC7BE,EAAE,QAAQE,GAAW,CACnBF,EAAE,KAAK,EACPH,EAASK,EAAUJ,CAAK,CAC1B,EAAGA,EAAOC,CAAI,EACPC,CACT,CCPA,IAAIG,GAAUC,GAAS,QAAS,MAAO,SAAU,WAAW,EACxDC,GAAa,CAAC,EAEPC,GAAU,EACVC,GAAY,EACZC,GAAW,EACXC,GAAU,EACVC,GAAU,EACVC,GAAS,EACTC,GAAQ,EAEJ,SAARC,EAAiBC,EAAMC,EAAMC,EAAIC,EAAOC,EAAOC,EAAQ,CAC5D,IAAIC,EAAYN,EAAK,aACrB,GAAI,CAACM,EAAWN,EAAK,aAAe,CAAC,UAC5BE,KAAMI,EAAW,OAC1BC,GAAOP,EAAME,EAAI,CACf,KAAMD,EACN,MAAOE,EACP,MAAOC,EACP,GAAIf,GACJ,MAAOE,GACP,KAAMc,EAAO,KACb,MAAOA,EAAO,MACd,SAAUA,EAAO,SACjB,KAAMA,EAAO,KACb,MAAO,KACP,MAAOb,EACT,CAAC,CACH,CAEO,SAASgB,GAAKR,EAAME,EAAI,CAC7B,IAAIO,EAAWC,EAAIV,EAAME,CAAE,EAC3B,GAAIO,EAAS,MAAQjB,GAAS,MAAM,IAAI,MAAM,6BAA6B,EAC3E,OAAOiB,CACT,CAEO,SAASE,EAAIX,EAAME,EAAI,CAC5B,IAAIO,EAAWC,EAAIV,EAAME,CAAE,EAC3B,GAAIO,EAAS,MAAQd,GAAS,MAAM,IAAI,MAAM,2BAA2B,EACzE,OAAOc,CACT,CAEO,SAASC,EAAIV,EAAME,EAAI,CAC5B,IAAIO,EAAWT,EAAK,aACpB,GAAI,CAACS,GAAY,EAAEA,EAAWA,EAASP,CAAE,GAAI,MAAM,IAAI,MAAM,sBAAsB,EACnF,OAAOO,CACT,CAEA,SAASF,GAAOP,EAAME,EAAIU,EAAM,CAC9B,IAAIN,EAAYN,EAAK,aACjBa,EAIJP,EAAUJ,CAAE,EAAIU,EAChBA,EAAK,MAAQE,GAAML,EAAU,EAAGG,EAAK,IAAI,EAEzC,SAASH,EAASM,EAAS,CACzBH,EAAK,MAAQnB,GACbmB,EAAK,MAAM,QAAQI,EAAOJ,EAAK,MAAOA,EAAK,IAAI,EAG3CA,EAAK,OAASG,GAASC,EAAMD,EAAUH,EAAK,KAAK,CACvD,CAEA,SAASI,EAAMD,EAAS,CACtB,IAAIE,EAAGC,EAAGC,EAAGC,EAGb,GAAIR,EAAK,QAAUnB,GAAW,OAAO4B,EAAK,EAE1C,IAAKJ,KAAKX,EAER,GADAc,EAAId,EAAUW,CAAC,EACXG,EAAE,OAASR,EAAK,KAKpB,IAAIQ,EAAE,QAAUzB,GAAS,OAAO2B,GAAQN,CAAK,EAGzCI,EAAE,QAAUxB,IACdwB,EAAE,MAAQtB,GACVsB,EAAE,MAAM,KAAK,EACbA,EAAE,GAAG,KAAK,YAAapB,EAAMA,EAAK,SAAUoB,EAAE,MAAOA,EAAE,KAAK,EAC5D,OAAOd,EAAUW,CAAC,GAIX,CAACA,EAAIf,IACZkB,EAAE,MAAQtB,GACVsB,EAAE,MAAM,KAAK,EACbA,EAAE,GAAG,KAAK,SAAUpB,EAAMA,EAAK,SAAUoB,EAAE,MAAOA,EAAE,KAAK,EACzD,OAAOd,EAAUW,CAAC,GAoBtB,GAZAK,GAAQ,UAAW,CACbV,EAAK,QAAUjB,KACjBiB,EAAK,MAAQhB,GACbgB,EAAK,MAAM,QAAQW,EAAMX,EAAK,MAAOA,EAAK,IAAI,EAC9CW,EAAKR,CAAO,EAEhB,CAAC,EAIDH,EAAK,MAAQlB,GACbkB,EAAK,GAAG,KAAK,QAASZ,EAAMA,EAAK,SAAUY,EAAK,MAAOA,EAAK,KAAK,EAC7DA,EAAK,QAAUlB,GAKnB,KAJAkB,EAAK,MAAQjB,GAGbkB,EAAQ,IAAI,MAAMM,EAAIP,EAAK,MAAM,MAAM,EAClCK,EAAI,EAAGC,EAAI,GAAID,EAAIE,EAAG,EAAEF,GACvBG,EAAIR,EAAK,MAAMK,CAAC,EAAE,MAAM,KAAKjB,EAAMA,EAAK,SAAUY,EAAK,MAAOA,EAAK,KAAK,KAC1EC,EAAM,EAAEK,CAAC,EAAIE,GAGjBP,EAAM,OAASK,EAAI,EACrB,CAEA,SAASK,EAAKR,EAAS,CAKrB,QAJIS,EAAIT,EAAUH,EAAK,SAAWA,EAAK,KAAK,KAAK,KAAMG,EAAUH,EAAK,QAAQ,GAAKA,EAAK,MAAM,QAAQS,CAAI,EAAGT,EAAK,MAAQf,GAAQ,GAC9HoB,EAAI,GACJE,EAAIN,EAAM,OAEP,EAAEI,EAAIE,GACXN,EAAMI,CAAC,EAAE,KAAKjB,EAAMwB,CAAC,EAInBZ,EAAK,QAAUf,KACjBe,EAAK,GAAG,KAAK,MAAOZ,EAAMA,EAAK,SAAUY,EAAK,MAAOA,EAAK,KAAK,EAC/DS,EAAK,EAET,CAEA,SAASA,GAAO,CACdT,EAAK,MAAQd,GACbc,EAAK,MAAM,KAAK,EAChB,OAAON,EAAUJ,CAAE,EACnB,QAASe,KAAKX,EAAW,OACzB,OAAON,EAAK,YACd,CACF,CCtJe,SAARyB,GAAiBC,EAAMC,EAAM,CAClC,IAAIC,EAAYF,EAAK,aACjBG,EACAC,EACAC,EAAQ,GACR,EAEJ,GAAKH,EAEL,CAAAD,EAAOA,GAAQ,KAAO,KAAOA,EAAO,GAEpC,IAAK,KAAKC,EAAW,CACnB,IAAKC,EAAWD,EAAU,CAAC,GAAG,OAASD,EAAM,CAAEI,EAAQ,GAAO,QAAU,CACxED,EAASD,EAAS,MAAQG,IAAYH,EAAS,MAAQI,GACvDJ,EAAS,MAAQK,GACjBL,EAAS,MAAM,KAAK,EACpBA,EAAS,GAAG,KAAKC,EAAS,YAAc,SAAUJ,EAAMA,EAAK,SAAUG,EAAS,MAAOA,EAAS,KAAK,EACrG,OAAOD,EAAU,CAAC,CACpB,CAEIG,GAAO,OAAOL,EAAK,aACzB,CCrBe,SAARS,GAAiBC,EAAM,CAC5B,OAAO,KAAK,KAAK,UAAW,CAC1BD,GAAU,KAAMC,CAAI,CACtB,CAAC,CACH,CCJA,SAASC,GAAYC,EAAIC,EAAM,CAC7B,IAAIC,EAAQC,EACZ,OAAO,UAAW,CAChB,IAAIC,EAAWC,EAAI,KAAML,CAAE,EACvBM,EAAQF,EAAS,MAKrB,GAAIE,IAAUJ,EAAQ,CACpBC,EAASD,EAASI,EAClB,QAAS,EAAI,EAAGC,EAAIJ,EAAO,OAAQ,EAAII,EAAG,EAAE,EAC1C,GAAIJ,EAAO,CAAC,EAAE,OAASF,EAAM,CAC3BE,EAASA,EAAO,MAAM,EACtBA,EAAO,OAAO,EAAG,CAAC,EAClB,KACF,CAEJ,CAEAC,EAAS,MAAQD,CACnB,CACF,CAEA,SAASK,GAAcR,EAAIC,EAAMQ,EAAO,CACtC,IAAIP,EAAQC,EACZ,GAAI,OAAOM,GAAU,WAAY,MAAM,IAAI,MAC3C,OAAO,UAAW,CAChB,IAAIL,EAAWC,EAAI,KAAML,CAAE,EACvBM,EAAQF,EAAS,MAKrB,GAAIE,IAAUJ,EAAQ,CACpBC,GAAUD,EAASI,GAAO,MAAM,EAChC,QAASI,EAAI,CAAC,KAAMT,EAAM,MAAOQ,CAAK,EAAGE,EAAI,EAAGJ,EAAIJ,EAAO,OAAQQ,EAAIJ,EAAG,EAAEI,EAC1E,GAAIR,EAAOQ,CAAC,EAAE,OAASV,EAAM,CAC3BE,EAAOQ,CAAC,EAAID,EACZ,KACF,CAEEC,IAAMJ,GAAGJ,EAAO,KAAKO,CAAC,CAC5B,CAEAN,EAAS,MAAQD,CACnB,CACF,CAEe,SAARS,GAAiBX,EAAMQ,EAAO,CACnC,IAAIT,EAAK,KAAK,IAId,GAFAC,GAAQ,GAEJ,UAAU,OAAS,EAAG,CAExB,QADIK,EAAQO,EAAI,KAAK,KAAK,EAAGb,CAAE,EAAE,MACxBW,EAAI,EAAGJ,EAAID,EAAM,OAAQI,EAAGC,EAAIJ,EAAG,EAAEI,EAC5C,IAAKD,EAAIJ,EAAMK,CAAC,GAAG,OAASV,EAC1B,OAAOS,EAAE,MAGb,OAAO,IACT,CAEA,OAAO,KAAK,MAAMD,GAAS,KAAOV,GAAcS,IAAeR,EAAIC,EAAMQ,CAAK,CAAC,CACjF,CAEO,SAASK,GAAWC,EAAYd,EAAMQ,EAAO,CAClD,IAAIT,EAAKe,EAAW,IAEpB,OAAAA,EAAW,KAAK,UAAW,CACzB,IAAIX,EAAWC,EAAI,KAAML,CAAE,GAC1BI,EAAS,QAAUA,EAAS,MAAQ,CAAC,IAAIH,CAAI,EAAIQ,EAAM,MAAM,KAAM,SAAS,CAC/E,CAAC,EAEM,SAASO,EAAM,CACpB,OAAOH,EAAIG,EAAMhB,CAAE,EAAE,MAAMC,CAAI,CACjC,CACF,CC7Ee,SAARgB,GAAiBC,EAAGC,EAAG,CAC5B,IAAIC,EACJ,OAAQ,OAAOD,GAAM,SAAWE,EAC1BF,aAAaG,EAAQC,IACpBH,EAAIE,EAAMH,CAAC,IAAMA,EAAIC,EAAGG,IACzBC,IAAmBN,EAAGC,CAAC,CAC/B,CCJA,SAASM,GAAWC,EAAM,CACxB,OAAO,UAAW,CAChB,KAAK,gBAAgBA,CAAI,CAC3B,CACF,CAEA,SAASC,GAAaC,EAAU,CAC9B,OAAO,UAAW,CAChB,KAAK,kBAAkBA,EAAS,MAAOA,EAAS,KAAK,CACvD,CACF,CAEA,SAASC,GAAaH,EAAMI,EAAaC,EAAQ,CAC/C,IAAIC,EACAC,EAAUF,EAAS,GACnBG,EACJ,OAAO,UAAW,CAChB,IAAIC,EAAU,KAAK,aAAaT,CAAI,EACpC,OAAOS,IAAYF,EAAU,KACvBE,IAAYH,EAAWE,EACvBA,EAAeJ,EAAYE,EAAWG,EAASJ,CAAM,CAC7D,CACF,CAEA,SAASK,GAAeR,EAAUE,EAAaC,EAAQ,CACrD,IAAIC,EACAC,EAAUF,EAAS,GACnBG,EACJ,OAAO,UAAW,CAChB,IAAIC,EAAU,KAAK,eAAeP,EAAS,MAAOA,EAAS,KAAK,EAChE,OAAOO,IAAYF,EAAU,KACvBE,IAAYH,EAAWE,EACvBA,EAAeJ,EAAYE,EAAWG,EAASJ,CAAM,CAC7D,CACF,CAEA,SAASM,GAAaX,EAAMI,EAAaQ,EAAO,CAC9C,IAAIN,EACAO,EACAL,EACJ,OAAO,UAAW,CAChB,IAAIC,EAASJ,EAASO,EAAM,IAAI,EAAGL,EACnC,OAAIF,GAAU,KAAa,KAAK,KAAK,gBAAgBL,CAAI,GACzDS,EAAU,KAAK,aAAaT,CAAI,EAChCO,EAAUF,EAAS,GACZI,IAAYF,EAAU,KACvBE,IAAYH,GAAYC,IAAYM,EAAWL,GAC9CK,EAAWN,EAASC,EAAeJ,EAAYE,EAAWG,EAASJ,CAAM,GAClF,CACF,CAEA,SAASS,GAAeZ,EAAUE,EAAaQ,EAAO,CACpD,IAAIN,EACAO,EACAL,EACJ,OAAO,UAAW,CAChB,IAAIC,EAASJ,EAASO,EAAM,IAAI,EAAGL,EACnC,OAAIF,GAAU,KAAa,KAAK,KAAK,kBAAkBH,EAAS,MAAOA,EAAS,KAAK,GACrFO,EAAU,KAAK,eAAeP,EAAS,MAAOA,EAAS,KAAK,EAC5DK,EAAUF,EAAS,GACZI,IAAYF,EAAU,KACvBE,IAAYH,GAAYC,IAAYM,EAAWL,GAC9CK,EAAWN,EAASC,EAAeJ,EAAYE,EAAWG,EAASJ,CAAM,GAClF,CACF,CAEe,SAARU,GAAiBf,EAAMY,EAAO,CACnC,IAAIV,EAAWc,EAAUhB,CAAI,EAAGiB,EAAIf,IAAa,YAAcgB,GAAuBC,GACtF,OAAO,KAAK,UAAUnB,EAAM,OAAOY,GAAU,YACtCV,EAAS,MAAQY,GAAiBH,IAAcT,EAAUe,EAAGG,GAAW,KAAM,QAAUpB,EAAMY,CAAK,CAAC,EACrGA,GAAS,MAAQV,EAAS,MAAQD,GAAeF,IAAYG,CAAQ,GACpEA,EAAS,MAAQQ,GAAiBP,IAAcD,EAAUe,EAAGL,CAAK,CAAC,CAC5E,CC3EA,SAASS,GAAgBC,EAAMC,EAAG,CAChC,OAAO,SAASC,EAAG,CACjB,KAAK,aAAaF,EAAMC,EAAE,KAAK,KAAMC,CAAC,CAAC,CACzC,CACF,CAEA,SAASC,GAAkBC,EAAUH,EAAG,CACtC,OAAO,SAASC,EAAG,CACjB,KAAK,eAAeE,EAAS,MAAOA,EAAS,MAAOH,EAAE,KAAK,KAAMC,CAAC,CAAC,CACrE,CACF,CAEA,SAASG,GAAYD,EAAUE,EAAO,CACpC,IAAIC,EAAIC,EACR,SAASC,GAAQ,CACf,IAAIR,EAAIK,EAAM,MAAM,KAAM,SAAS,EACnC,OAAIL,IAAMO,IAAID,GAAMC,EAAKP,IAAME,GAAkBC,EAAUH,CAAC,GACrDM,CACT,CACA,OAAAE,EAAM,OAASH,EACRG,CACT,CAEA,SAASC,GAAUV,EAAMM,EAAO,CAC9B,IAAIC,EAAIC,EACR,SAASC,GAAQ,CACf,IAAIR,EAAIK,EAAM,MAAM,KAAM,SAAS,EACnC,OAAIL,IAAMO,IAAID,GAAMC,EAAKP,IAAMF,GAAgBC,EAAMC,CAAC,GAC/CM,CACT,CACA,OAAAE,EAAM,OAASH,EACRG,CACT,CAEe,SAARE,GAAiBX,EAAMM,EAAO,CACnC,IAAIM,EAAM,QAAUZ,EACpB,GAAI,UAAU,OAAS,EAAG,OAAQY,EAAM,KAAK,MAAMA,CAAG,IAAMA,EAAI,OAChE,GAAIN,GAAS,KAAM,OAAO,KAAK,MAAMM,EAAK,IAAI,EAC9C,GAAI,OAAON,GAAU,WAAY,MAAM,IAAI,MAC3C,IAAIF,EAAWS,EAAUb,CAAI,EAC7B,OAAO,KAAK,MAAMY,GAAMR,EAAS,MAAQC,GAAcK,IAAWN,EAAUE,CAAK,CAAC,CACpF,CCzCA,SAASQ,GAAcC,EAAIC,EAAO,CAChC,OAAO,UAAW,CAChBC,GAAK,KAAMF,CAAE,EAAE,MAAQ,CAACC,EAAM,MAAM,KAAM,SAAS,CACrD,CACF,CAEA,SAASE,GAAcH,EAAIC,EAAO,CAChC,OAAOA,EAAQ,CAACA,EAAO,UAAW,CAChCC,GAAK,KAAMF,CAAE,EAAE,MAAQC,CACzB,CACF,CAEe,SAARG,GAAiBH,EAAO,CAC7B,IAAID,EAAK,KAAK,IAEd,OAAO,UAAU,OACX,KAAK,MAAM,OAAOC,GAAU,WACxBF,GACAI,IAAeH,EAAIC,CAAK,CAAC,EAC7BI,EAAI,KAAK,KAAK,EAAGL,CAAE,EAAE,KAC7B,CCpBA,SAASM,GAAiBC,EAAIC,EAAO,CACnC,OAAO,UAAW,CAChBC,EAAI,KAAMF,CAAE,EAAE,SAAW,CAACC,EAAM,MAAM,KAAM,SAAS,CACvD,CACF,CAEA,SAASE,GAAiBH,EAAIC,EAAO,CACnC,OAAOA,EAAQ,CAACA,EAAO,UAAW,CAChCC,EAAI,KAAMF,CAAE,EAAE,SAAWC,CAC3B,CACF,CAEe,SAARG,GAAiBH,EAAO,CAC7B,IAAID,EAAK,KAAK,IAEd,OAAO,UAAU,OACX,KAAK,MAAM,OAAOC,GAAU,WACxBF,GACAI,IAAkBH,EAAIC,CAAK,CAAC,EAChCI,EAAI,KAAK,KAAK,EAAGL,CAAE,EAAE,QAC7B,CCpBA,SAASM,GAAaC,EAAIC,EAAO,CAC/B,GAAI,OAAOA,GAAU,WAAY,MAAM,IAAI,MAC3C,OAAO,UAAW,CAChBC,EAAI,KAAMF,CAAE,EAAE,KAAOC,CACvB,CACF,CAEe,SAARE,GAAiBF,EAAO,CAC7B,IAAID,EAAK,KAAK,IAEd,OAAO,UAAU,OACX,KAAK,KAAKD,GAAaC,EAAIC,CAAK,CAAC,EACjCG,EAAI,KAAK,KAAK,EAAGJ,CAAE,EAAE,IAC7B,CCbA,SAASK,GAAYC,EAAIC,EAAO,CAC9B,OAAO,UAAW,CAChB,IAAIC,EAAID,EAAM,MAAM,KAAM,SAAS,EACnC,GAAI,OAAOC,GAAM,WAAY,MAAM,IAAI,MACvCC,EAAI,KAAMH,CAAE,EAAE,KAAOE,CACvB,CACF,CAEe,SAARE,GAAiBH,EAAO,CAC7B,GAAI,OAAOA,GAAU,WAAY,MAAM,IAAI,MAC3C,OAAO,KAAK,KAAKF,GAAY,KAAK,IAAKE,CAAK,CAAC,CAC/C,CCVe,SAARI,GAAiBC,EAAO,CACzB,OAAOA,GAAU,aAAYA,EAAQC,GAAQD,CAAK,GAEtD,QAASE,EAAS,KAAK,QAASC,EAAID,EAAO,OAAQE,EAAY,IAAI,MAAMD,CAAC,EAAGE,EAAI,EAAGA,EAAIF,EAAG,EAAEE,EAC3F,QAASC,EAAQJ,EAAOG,CAAC,EAAGE,EAAID,EAAM,OAAQE,EAAWJ,EAAUC,CAAC,EAAI,CAAC,EAAGI,EAAMC,EAAI,EAAGA,EAAIH,EAAG,EAAEG,GAC3FD,EAAOH,EAAMI,CAAC,IAAMV,EAAM,KAAKS,EAAMA,EAAK,SAAUC,EAAGJ,CAAK,GAC/DE,EAAS,KAAKC,CAAI,EAKxB,OAAO,IAAIE,EAAWP,EAAW,KAAK,SAAU,KAAK,MAAO,KAAK,GAAG,CACtE,CCbe,SAARQ,GAAiBC,EAAY,CAClC,GAAIA,EAAW,MAAQ,KAAK,IAAK,MAAM,IAAI,MAE3C,QAASC,EAAU,KAAK,QAASC,EAAUF,EAAW,QAASG,EAAKF,EAAQ,OAAQG,EAAKF,EAAQ,OAAQG,EAAI,KAAK,IAAIF,EAAIC,CAAE,EAAGE,EAAS,IAAI,MAAMH,CAAE,EAAGI,EAAI,EAAGA,EAAIF,EAAG,EAAEE,EACrK,QAASC,EAASP,EAAQM,CAAC,EAAGE,EAASP,EAAQK,CAAC,EAAGG,EAAIF,EAAO,OAAQG,EAAQL,EAAOC,CAAC,EAAI,IAAI,MAAMG,CAAC,EAAGE,EAAMC,EAAI,EAAGA,EAAIH,EAAG,EAAEG,GACxHD,EAAOJ,EAAOK,CAAC,GAAKJ,EAAOI,CAAC,KAC9BF,EAAME,CAAC,EAAID,GAKjB,KAAOL,EAAIJ,EAAI,EAAEI,EACfD,EAAOC,CAAC,EAAIN,EAAQM,CAAC,EAGvB,OAAO,IAAIO,EAAWR,EAAQ,KAAK,SAAU,KAAK,MAAO,KAAK,GAAG,CACnE,CChBA,SAASS,GAAMC,EAAM,CACnB,OAAQA,EAAO,IAAI,KAAK,EAAE,MAAM,OAAO,EAAE,MAAM,SAAS,EAAG,CACzD,IAAIC,EAAI,EAAE,QAAQ,GAAG,EACrB,OAAIA,GAAK,IAAG,EAAI,EAAE,MAAM,EAAGA,CAAC,GACrB,CAAC,GAAK,IAAM,OACrB,CAAC,CACH,CAEA,SAASC,GAAWC,EAAIH,EAAMI,EAAU,CACtC,IAAIC,EAAKC,EAAKC,EAAMR,GAAMC,CAAI,EAAIQ,GAAOC,EACzC,OAAO,UAAW,CAChB,IAAIC,EAAWH,EAAI,KAAMJ,CAAE,EACvBQ,EAAKD,EAAS,GAKdC,IAAON,IAAMC,GAAOD,EAAMM,GAAI,KAAK,GAAG,GAAGX,EAAMI,CAAQ,EAE3DM,EAAS,GAAKJ,CAChB,CACF,CAEe,SAARM,GAAiBZ,EAAMI,EAAU,CACtC,IAAID,EAAK,KAAK,IAEd,OAAO,UAAU,OAAS,EACpBU,EAAI,KAAK,KAAK,EAAGV,CAAE,EAAE,GAAG,GAAGH,CAAI,EAC/B,KAAK,KAAKE,GAAWC,EAAIH,EAAMI,CAAQ,CAAC,CAChD,CC/BA,SAASU,GAAeC,EAAI,CAC1B,OAAO,UAAW,CAChB,IAAIC,EAAS,KAAK,WAClB,QAASC,KAAK,KAAK,aAAc,GAAI,CAACA,IAAMF,EAAI,OAC5CC,GAAQA,EAAO,YAAY,IAAI,CACrC,CACF,CAEe,SAARE,IAAmB,CACxB,OAAO,KAAK,GAAG,aAAcJ,GAAe,KAAK,GAAG,CAAC,CACvD,CCNe,SAARK,GAAiBC,EAAQ,CAC9B,IAAIC,EAAO,KAAK,MACZC,EAAK,KAAK,IAEV,OAAOF,GAAW,aAAYA,EAASG,EAASH,CAAM,GAE1D,QAASI,EAAS,KAAK,QAASC,EAAID,EAAO,OAAQE,EAAY,IAAI,MAAMD,CAAC,EAAGE,EAAI,EAAGA,EAAIF,EAAG,EAAEE,EAC3F,QAASC,EAAQJ,EAAOG,CAAC,EAAGE,EAAID,EAAM,OAAQE,EAAWJ,EAAUC,CAAC,EAAI,IAAI,MAAME,CAAC,EAAGE,EAAMC,EAASC,EAAI,EAAGA,EAAIJ,EAAG,EAAEI,GAC9GF,EAAOH,EAAMK,CAAC,KAAOD,EAAUZ,EAAO,KAAKW,EAAMA,EAAK,SAAUE,EAAGL,CAAK,KACvE,aAAcG,IAAMC,EAAQ,SAAWD,EAAK,UAChDD,EAASG,CAAC,EAAID,EACdE,EAASJ,EAASG,CAAC,EAAGZ,EAAMC,EAAIW,EAAGH,EAAUK,EAAIJ,EAAMT,CAAE,CAAC,GAKhE,OAAO,IAAIc,EAAWV,EAAW,KAAK,SAAUL,EAAMC,CAAE,CAC1D,CCjBe,SAARe,GAAiBC,EAAQ,CAC9B,IAAIC,EAAO,KAAK,MACZC,EAAK,KAAK,IAEV,OAAOF,GAAW,aAAYA,EAASG,GAAYH,CAAM,GAE7D,QAASI,EAAS,KAAK,QAASC,EAAID,EAAO,OAAQE,EAAY,CAAC,EAAGC,EAAU,CAAC,EAAGC,EAAI,EAAGA,EAAIH,EAAG,EAAEG,EAC/F,QAASC,EAAQL,EAAOI,CAAC,EAAGE,EAAID,EAAM,OAAQE,EAAMC,EAAI,EAAGA,EAAIF,EAAG,EAAEE,EAClE,GAAID,EAAOF,EAAMG,CAAC,EAAG,CACnB,QAASC,EAAWb,EAAO,KAAKW,EAAMA,EAAK,SAAUC,EAAGH,CAAK,EAAGK,EAAOC,EAAUC,EAAIL,EAAMT,CAAE,EAAGe,EAAI,EAAGC,EAAIL,EAAS,OAAQI,EAAIC,EAAG,EAAED,GAC/HH,EAAQD,EAASI,CAAC,IACpBE,EAASL,EAAOb,EAAMC,EAAIe,EAAGJ,EAAUE,CAAO,EAGlDT,EAAU,KAAKO,CAAQ,EACvBN,EAAQ,KAAKI,CAAI,CACnB,CAIJ,OAAO,IAAIS,EAAWd,EAAWC,EAASN,EAAMC,CAAE,CACpD,CCvBA,IAAImB,GAAYC,EAAU,UAAU,YAErB,SAARA,IAAmB,CACxB,OAAO,IAAID,GAAU,KAAK,QAAS,KAAK,QAAQ,CAClD,CCAA,SAASE,GAAUC,EAAMC,EAAa,CACpC,IAAIC,EACAC,EACAC,EACJ,OAAO,UAAW,CAChB,IAAIC,EAAUC,EAAM,KAAMN,CAAI,EAC1BO,GAAW,KAAK,MAAM,eAAeP,CAAI,EAAGM,EAAM,KAAMN,CAAI,GAChE,OAAOK,IAAYE,EAAU,KACvBF,IAAYH,GAAYK,IAAYJ,EAAWC,EAC/CA,EAAeH,EAAYC,EAAWG,EAASF,EAAWI,CAAO,CACzE,CACF,CAEA,SAASC,GAAYR,EAAM,CACzB,OAAO,UAAW,CAChB,KAAK,MAAM,eAAeA,CAAI,CAChC,CACF,CAEA,SAASS,GAAcT,EAAMC,EAAaS,EAAQ,CAChD,IAAIR,EACAK,EAAUG,EAAS,GACnBN,EACJ,OAAO,UAAW,CAChB,IAAIC,EAAUC,EAAM,KAAMN,CAAI,EAC9B,OAAOK,IAAYE,EAAU,KACvBF,IAAYH,EAAWE,EACvBA,EAAeH,EAAYC,EAAWG,EAASK,CAAM,CAC7D,CACF,CAEA,SAASC,GAAcX,EAAMC,EAAaW,EAAO,CAC/C,IAAIV,EACAC,EACAC,EACJ,OAAO,UAAW,CAChB,IAAIC,EAAUC,EAAM,KAAMN,CAAI,EAC1BU,EAASE,EAAM,IAAI,EACnBL,EAAUG,EAAS,GACvB,OAAIA,GAAU,OAAMH,EAAUG,GAAU,KAAK,MAAM,eAAeV,CAAI,EAAGM,EAAM,KAAMN,CAAI,IAClFK,IAAYE,EAAU,KACvBF,IAAYH,GAAYK,IAAYJ,EAAWC,GAC9CD,EAAWI,EAASH,EAAeH,EAAYC,EAAWG,EAASK,CAAM,EAClF,CACF,CAEA,SAASG,GAAiBC,EAAId,EAAM,CAClC,IAAIe,EAAKC,EAAKC,EAAWC,EAAM,SAAWlB,EAAMmB,EAAQ,OAASD,EAAKE,EACtE,OAAO,UAAW,CAChB,IAAIC,EAAWC,EAAI,KAAMR,CAAE,EACvBS,EAAKF,EAAS,GACdG,EAAWH,EAAS,MAAMH,CAAG,GAAK,KAAOE,IAAWA,EAASZ,GAAYR,CAAI,GAAK,QAKlFuB,IAAOR,GAAOE,IAAcO,KAAWR,GAAOD,EAAMQ,GAAI,KAAK,GAAG,GAAGJ,EAAOF,EAAYO,CAAQ,EAElGH,EAAS,GAAKL,CAChB,CACF,CAEe,SAARS,GAAiBzB,EAAMY,EAAOc,EAAU,CAC7C,IAAIC,GAAK3B,GAAQ,KAAQ,YAAc4B,GAAuBC,GAC9D,OAAOjB,GAAS,KAAO,KAClB,WAAWZ,EAAMD,GAAUC,EAAM2B,CAAC,CAAC,EACnC,GAAG,aAAe3B,EAAMQ,GAAYR,CAAI,CAAC,EAC1C,OAAOY,GAAU,WAAa,KAC7B,WAAWZ,EAAMW,GAAcX,EAAM2B,EAAGG,GAAW,KAAM,SAAW9B,EAAMY,CAAK,CAAC,CAAC,EACjF,KAAKC,GAAiB,KAAK,IAAKb,CAAI,CAAC,EACtC,KACC,WAAWA,EAAMS,GAAcT,EAAM2B,EAAGf,CAAK,EAAGc,CAAQ,EACxD,GAAG,aAAe1B,EAAM,IAAI,CACnC,CC/EA,SAAS+B,GAAiBC,EAAMC,EAAGC,EAAU,CAC3C,OAAO,SAASC,EAAG,CACjB,KAAK,MAAM,YAAYH,EAAMC,EAAE,KAAK,KAAME,CAAC,EAAGD,CAAQ,CACxD,CACF,CAEA,SAASE,GAAWJ,EAAMK,EAAOH,EAAU,CACzC,IAAIC,EAAGG,EACP,SAASC,GAAQ,CACf,IAAI,EAAIF,EAAM,MAAM,KAAM,SAAS,EACnC,OAAI,IAAMC,IAAIH,GAAKG,EAAK,IAAMP,GAAiBC,EAAM,EAAGE,CAAQ,GACzDC,CACT,CACA,OAAAI,EAAM,OAASF,EACRE,CACT,CAEe,SAARC,GAAiBR,EAAMK,EAAOH,EAAU,CAC7C,IAAIO,EAAM,UAAYT,GAAQ,IAC9B,GAAI,UAAU,OAAS,EAAG,OAAQS,EAAM,KAAK,MAAMA,CAAG,IAAMA,EAAI,OAChE,GAAIJ,GAAS,KAAM,OAAO,KAAK,MAAMI,EAAK,IAAI,EAC9C,GAAI,OAAOJ,GAAU,WAAY,MAAM,IAAI,MAC3C,OAAO,KAAK,MAAMI,EAAKL,GAAWJ,EAAMK,EAAOH,GAAmB,EAAa,CAAC,CAClF,CCrBA,SAASQ,GAAaC,EAAO,CAC3B,OAAO,UAAW,CAChB,KAAK,YAAcA,CACrB,CACF,CAEA,SAASC,GAAaD,EAAO,CAC3B,OAAO,UAAW,CAChB,IAAIE,EAASF,EAAM,IAAI,EACvB,KAAK,YAAcE,GAAiB,EACtC,CACF,CAEe,SAARC,GAAiBH,EAAO,CAC7B,OAAO,KAAK,MAAM,OAAQ,OAAOA,GAAU,WACrCC,GAAaG,GAAW,KAAM,OAAQJ,CAAK,CAAC,EAC5CD,GAAaC,GAAS,KAAO,GAAKA,EAAQ,EAAE,CAAC,CACrD,CCnBA,SAASK,GAAgBC,EAAG,CAC1B,OAAO,SAAS,EAAG,CACjB,KAAK,YAAcA,EAAE,KAAK,KAAM,CAAC,CACnC,CACF,CAEA,SAASC,GAAUC,EAAO,CACxB,IAAIC,EAAIC,EACR,SAASC,GAAQ,CACf,IAAIL,EAAIE,EAAM,MAAM,KAAM,SAAS,EACnC,OAAIF,IAAMI,IAAID,GAAMC,EAAKJ,IAAMD,GAAgBC,CAAC,GACzCG,CACT,CACA,OAAAE,EAAM,OAASH,EACRG,CACT,CAEe,SAARC,GAAiBJ,EAAO,CAC7B,IAAIK,EAAM,OACV,GAAI,UAAU,OAAS,EAAG,OAAQA,EAAM,KAAK,MAAMA,CAAG,IAAMA,EAAI,OAChE,GAAIL,GAAS,KAAM,OAAO,KAAK,MAAMK,EAAK,IAAI,EAC9C,GAAI,OAAOL,GAAU,WAAY,MAAM,IAAI,MAC3C,OAAO,KAAK,MAAMK,EAAKN,GAAUC,CAAK,CAAC,CACzC,CCpBe,SAARM,IAAmB,CAKxB,QAJIC,EAAO,KAAK,MACZC,EAAM,KAAK,IACXC,EAAMC,GAAM,EAEPC,EAAS,KAAK,QAASC,EAAID,EAAO,OAAQE,EAAI,EAAGA,EAAID,EAAG,EAAEC,EACjE,QAASC,EAAQH,EAAOE,CAAC,EAAGE,EAAID,EAAM,OAAQE,EAAMC,EAAI,EAAGA,EAAIF,EAAG,EAAEE,EAClE,GAAID,EAAOF,EAAMG,CAAC,EAAG,CACnB,IAAIC,EAAUC,EAAIH,EAAMR,CAAG,EAC3BY,EAASJ,EAAMT,EAAME,EAAKQ,EAAGH,EAAO,CAClC,KAAMI,EAAQ,KAAOA,EAAQ,MAAQA,EAAQ,SAC7C,MAAO,EACP,SAAUA,EAAQ,SAClB,KAAMA,EAAQ,IAChB,CAAC,CACH,CAIJ,OAAO,IAAIG,EAAWV,EAAQ,KAAK,SAAUJ,EAAME,CAAG,CACxD,CCrBe,SAARa,IAAmB,CACxB,IAAIC,EAAKC,EAAKC,EAAO,KAAMC,EAAKD,EAAK,IAAKE,EAAOF,EAAK,KAAK,EAC3D,OAAO,IAAI,QAAQ,SAASG,EAASC,EAAQ,CAC3C,IAAIC,EAAS,CAAC,MAAOD,CAAM,EACvBE,EAAM,CAAC,MAAO,UAAW,CAAM,EAAEJ,IAAS,GAAGC,EAAQ,CAAG,CAAC,EAE7DH,EAAK,KAAK,UAAW,CACnB,IAAIO,EAAWC,EAAI,KAAMP,CAAE,EACvBQ,EAAKF,EAAS,GAKdE,IAAOX,IACTC,GAAOD,EAAMW,GAAI,KAAK,EACtBV,EAAI,EAAE,OAAO,KAAKM,CAAM,EACxBN,EAAI,EAAE,UAAU,KAAKM,CAAM,EAC3BN,EAAI,EAAE,IAAI,KAAKO,CAAG,GAGpBC,EAAS,GAAKR,CAChB,CAAC,EAGGG,IAAS,GAAGC,EAAQ,CAC1B,CAAC,CACH,CCNA,IAAIO,GAAK,EAEF,SAASC,EAAWC,EAAQC,EAASC,EAAMJ,EAAI,CACpD,KAAK,QAAUE,EACf,KAAK,SAAWC,EAChB,KAAK,MAAQC,EACb,KAAK,IAAMJ,CACb,CAEe,SAARK,GAA4BD,EAAM,CACvC,OAAOE,EAAU,EAAE,WAAWF,CAAI,CACpC,CAEO,SAASG,IAAQ,CACtB,MAAO,EAAEP,EACX,CAEA,IAAIQ,EAAsBF,EAAU,UAEpCL,EAAW,UAAYI,GAAW,UAAY,CAC5C,YAAaJ,EACb,OAAQQ,GACR,UAAWC,GACX,YAAaF,EAAoB,YACjC,eAAgBA,EAAoB,eACpC,OAAQG,GACR,MAAOC,GACP,UAAWN,GACX,WAAYO,GACZ,KAAML,EAAoB,KAC1B,MAAOA,EAAoB,MAC3B,KAAMA,EAAoB,KAC1B,KAAMA,EAAoB,KAC1B,MAAOA,EAAoB,MAC3B,KAAMA,EAAoB,KAC1B,GAAIM,GACJ,KAAMC,GACN,UAAWC,GACX,MAAOC,GACP,WAAYC,GACZ,KAAMC,GACN,UAAWC,GACX,OAAQC,GACR,MAAOC,GACP,MAAOC,GACP,SAAUC,GACV,KAAMC,GACN,YAAaC,GACb,IAAKC,GACL,CAAC,OAAO,QAAQ,EAAGnB,EAAoB,OAAO,QAAQ,CACxD,EChEO,SAASoB,GAAWC,EAAG,CAC5B,QAASA,GAAK,IAAM,EAAIA,EAAIA,EAAIA,GAAKA,GAAK,GAAKA,EAAIA,EAAI,GAAK,CAC9D,CCLA,IAAIC,GAAgB,CAClB,KAAM,KACN,MAAO,EACP,SAAU,IACV,KAAMC,EACR,EAEA,SAASC,GAAQC,EAAMC,EAAI,CAEzB,QADIC,EACG,EAAEA,EAASF,EAAK,eAAiB,EAAEE,EAASA,EAAOD,CAAE,IAC1D,GAAI,EAAED,EAAOA,EAAK,YAChB,MAAM,IAAI,MAAM,cAAcC,CAAE,YAAY,EAGhD,OAAOC,CACT,CAEe,SAARC,GAAiBC,EAAM,CAC5B,IAAIH,EACAC,EAEAE,aAAgBC,GAClBJ,EAAKG,EAAK,IAAKA,EAAOA,EAAK,QAE3BH,EAAKK,GAAM,GAAIJ,EAASL,IAAe,KAAOU,GAAI,EAAGH,EAAOA,GAAQ,KAAO,KAAOA,EAAO,IAG3F,QAASI,EAAS,KAAK,QAASC,EAAID,EAAO,OAAQE,EAAI,EAAGA,EAAID,EAAG,EAAEC,EACjE,QAASC,EAAQH,EAAOE,CAAC,EAAGE,EAAID,EAAM,OAAQX,EAAMa,EAAI,EAAGA,EAAID,EAAG,EAAEC,GAC9Db,EAAOW,EAAME,CAAC,IAChBC,EAASd,EAAMI,EAAMH,EAAIY,EAAGF,EAAOT,GAAUH,GAAQC,EAAMC,CAAE,CAAC,EAKpE,OAAO,IAAII,EAAWG,EAAQ,KAAK,SAAUJ,EAAMH,CAAE,CACvD,CCrCAc,EAAU,UAAU,UAAYC,GAChCD,EAAU,UAAU,WAAaE,GCSjC,GAAM,CAAC,IAAAC,GAAK,IAAAC,GAAK,IAAAC,EAAG,EAAI,KAExB,SAASC,GAAQ,EAAG,CAClB,MAAO,CAAC,CAAC,EAAE,CAAC,EAAG,CAAC,EAAE,CAAC,CAAC,CACtB,CAEA,SAASC,GAAQ,EAAG,CAClB,MAAO,CAACD,GAAQ,EAAE,CAAC,CAAC,EAAGA,GAAQ,EAAE,CAAC,CAAC,CAAC,CACtC,CAEA,IAAIE,GAAI,CACN,KAAM,IACN,QAAS,CAAC,IAAK,GAAG,EAAE,IAAIC,EAAI,EAC5B,MAAO,SAASC,EAAGC,EAAG,CAAE,OAAOD,GAAK,KAAO,KAAO,CAAC,CAAC,CAACA,EAAE,CAAC,EAAGC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAG,CAAC,CAACD,EAAE,CAAC,EAAGC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAG,EACxF,OAAQ,SAASC,EAAI,CAAE,OAAOA,GAAM,CAACA,EAAG,CAAC,EAAE,CAAC,EAAGA,EAAG,CAAC,EAAE,CAAC,CAAC,CAAG,CAC5D,EAEIC,GAAI,CACN,KAAM,IACN,QAAS,CAAC,IAAK,GAAG,EAAE,IAAIJ,EAAI,EAC5B,MAAO,SAASK,EAAGH,EAAG,CAAE,OAAOG,GAAK,KAAO,KAAO,CAAC,CAACH,EAAE,CAAC,EAAE,CAAC,EAAG,CAACG,EAAE,CAAC,CAAC,EAAG,CAACH,EAAE,CAAC,EAAE,CAAC,EAAG,CAACG,EAAE,CAAC,CAAC,CAAC,CAAG,EACxF,OAAQ,SAASF,EAAI,CAAE,OAAOA,GAAM,CAACA,EAAG,CAAC,EAAE,CAAC,EAAGA,EAAG,CAAC,EAAE,CAAC,CAAC,CAAG,CAC5D,EAEIG,GAAK,CACP,KAAM,KACN,QAAS,CAAC,IAAK,IAAK,IAAK,IAAK,KAAM,KAAM,KAAM,IAAI,EAAE,IAAIN,EAAI,EAC9D,MAAO,SAASG,EAAI,CAAE,OAAOA,GAAM,KAAO,KAAOL,GAAQK,CAAE,CAAG,EAC9D,OAAQ,SAASA,EAAI,CAAE,OAAOA,CAAI,CACpC,EA2DA,SAASI,GAAKC,EAAG,CACf,MAAO,CAAC,KAAMA,CAAC,CACjB,CCxGA,SAASC,GAAMC,EAAM,CACnB,IAAIC,EAAM,EACNC,EAAWF,EAAK,SAChBG,EAAID,GAAYA,EAAS,OAC7B,GAAI,CAACC,EAAGF,EAAM,MACT,MAAO,EAAEE,GAAK,GAAGF,GAAOC,EAASC,CAAC,EAAE,MACzCH,EAAK,MAAQC,CACf,CAEe,SAARG,IAAmB,CACxB,OAAO,KAAK,UAAUL,EAAK,CAC7B,CCXe,SAARM,GAAiBC,EAAUC,EAAM,CACtC,IAAIC,EAAQ,GACZ,QAAWC,KAAQ,KACjBH,EAAS,KAAKC,EAAME,EAAM,EAAED,EAAO,IAAI,EAEzC,OAAO,IACT,CCNe,SAARE,GAAiBC,EAAUC,EAAM,CAEtC,QADIC,EAAO,KAAMC,EAAQ,CAACD,CAAI,EAAGE,EAAUC,EAAGC,EAAQ,GAC/CJ,EAAOC,EAAM,IAAI,GAEtB,GADAH,EAAS,KAAKC,EAAMC,EAAM,EAAEI,EAAO,IAAI,EACnCF,EAAWF,EAAK,SAClB,IAAKG,EAAID,EAAS,OAAS,EAAGC,GAAK,EAAG,EAAEA,EACtCF,EAAM,KAAKC,EAASC,CAAC,CAAC,EAI5B,OAAO,IACT,CCXe,SAARE,GAAiBC,EAAUC,EAAM,CAEtC,QADIC,EAAO,KAAMC,EAAQ,CAACD,CAAI,EAAGE,EAAO,CAAC,EAAGC,EAAU,EAAGC,EAAGC,EAAQ,GAC7DL,EAAOC,EAAM,IAAI,GAEtB,GADAC,EAAK,KAAKF,CAAI,EACVG,EAAWH,EAAK,SAClB,IAAK,EAAI,EAAGI,EAAID,EAAS,OAAQ,EAAIC,EAAG,EAAE,EACxCH,EAAM,KAAKE,EAAS,CAAC,CAAC,EAI5B,KAAOH,EAAOE,EAAK,IAAI,GACrBJ,EAAS,KAAKC,EAAMC,EAAM,EAAEK,EAAO,IAAI,EAEzC,OAAO,IACT,CCde,SAARC,GAAiBC,EAAUC,EAAM,CACtC,IAAIC,EAAQ,GACZ,QAAWC,KAAQ,KACjB,GAAIH,EAAS,KAAKC,EAAME,EAAM,EAAED,EAAO,IAAI,EACzC,OAAOC,CAGb,CCPe,SAARC,GAAiBC,EAAO,CAC7B,OAAO,KAAK,UAAU,SAASC,EAAM,CAInC,QAHIC,EAAM,CAACF,EAAMC,EAAK,IAAI,GAAK,EAC3BE,EAAWF,EAAK,SAChBG,EAAID,GAAYA,EAAS,OACtB,EAAEC,GAAK,GAAGF,GAAOC,EAASC,CAAC,EAAE,MACpCH,EAAK,MAAQC,CACf,CAAC,CACH,CCRe,SAARG,GAAiBC,EAAS,CAC/B,OAAO,KAAK,WAAW,SAASC,EAAM,CAChCA,EAAK,UACPA,EAAK,SAAS,KAAKD,CAAO,CAE9B,CAAC,CACH,CCNe,SAARE,GAAiBC,EAAK,CAI3B,QAHIC,EAAQ,KACRC,EAAWC,GAAoBF,EAAOD,CAAG,EACzCI,EAAQ,CAACH,CAAK,EACXA,IAAUC,GACfD,EAAQA,EAAM,OACdG,EAAM,KAAKH,CAAK,EAGlB,QADII,EAAID,EAAM,OACPJ,IAAQE,GACbE,EAAM,OAAOC,EAAG,EAAGL,CAAG,EACtBA,EAAMA,EAAI,OAEZ,OAAOI,CACT,CAEA,SAASD,GAAoBG,EAAGC,EAAG,CACjC,GAAID,IAAMC,EAAG,OAAOD,EACpB,IAAIE,EAASF,EAAE,UAAU,EACrBG,EAASF,EAAE,UAAU,EACrBG,EAAI,KAGR,IAFAJ,EAAIE,EAAO,IAAI,EACfD,EAAIE,EAAO,IAAI,EACRH,IAAMC,GACXG,EAAIJ,EACJA,EAAIE,EAAO,IAAI,EACfD,EAAIE,EAAO,IAAI,EAEjB,OAAOC,CACT,CC7Be,SAARC,IAAmB,CAExB,QADIC,EAAO,KAAMC,EAAQ,CAACD,CAAI,EACvBA,EAAOA,EAAK,QACjBC,EAAM,KAAKD,CAAI,EAEjB,OAAOC,CACT,CCNe,SAARC,IAAmB,CACxB,OAAO,MAAM,KAAK,IAAI,CACxB,CCFe,SAARC,IAAmB,CACxB,IAAIC,EAAS,CAAC,EACd,YAAK,WAAW,SAASC,EAAM,CACxBA,EAAK,UACRD,EAAO,KAAKC,CAAI,CAEpB,CAAC,EACMD,CACT,CCRe,SAARE,IAAmB,CACxB,IAAIC,EAAO,KAAMC,EAAQ,CAAC,EAC1B,OAAAD,EAAK,KAAK,SAASE,EAAM,CACnBA,IAASF,GACXC,EAAM,KAAK,CAAC,OAAQC,EAAK,OAAQ,OAAQA,CAAI,CAAC,CAElD,CAAC,EACMD,CACT,CCRe,SAARE,IAAoB,CACzB,IAAIC,EAAO,KAAMC,EAASC,EAAO,CAACF,CAAI,EAAGG,EAAUC,EAAGC,EACtD,EAEE,KADAJ,EAAUC,EAAK,QAAQ,EAAGA,EAAO,CAAC,EAC3BF,EAAOC,EAAQ,IAAI,GAExB,GADA,MAAMD,EACFG,EAAWH,EAAK,SAClB,IAAKI,EAAI,EAAGC,EAAIF,EAAS,OAAQC,EAAIC,EAAG,EAAED,EACxCF,EAAK,KAAKC,EAASC,CAAC,CAAC,QAIpBF,EAAK,OAChB,CCCe,SAARI,GAA2BC,EAAMC,EAAU,CAC5CD,aAAgB,KAClBA,EAAO,CAAC,OAAWA,CAAI,EACnBC,IAAa,SAAWA,EAAWC,KAC9BD,IAAa,SACtBA,EAAWE,IAWb,QARIC,EAAO,IAAIC,GAAKL,CAAI,EACpBM,EACAC,EAAQ,CAACH,CAAI,EACbI,EACAC,EACAC,EACAC,EAEGL,EAAOC,EAAM,IAAI,GACtB,IAAKE,EAASR,EAASK,EAAK,IAAI,KAAOK,GAAKF,EAAS,MAAM,KAAKA,CAAM,GAAG,QAEvE,IADAH,EAAK,SAAWG,EACXC,EAAIC,EAAI,EAAGD,GAAK,EAAG,EAAEA,EACxBH,EAAM,KAAKC,EAAQC,EAAOC,CAAC,EAAI,IAAIL,GAAKI,EAAOC,CAAC,CAAC,CAAC,EAClDF,EAAM,OAASF,EACfE,EAAM,MAAQF,EAAK,MAAQ,EAKjC,OAAOF,EAAK,WAAWQ,EAAa,CACtC,CAEA,SAASC,IAAY,CACnB,OAAOd,GAAU,IAAI,EAAE,WAAWe,EAAQ,CAC5C,CAEA,SAASX,GAAeY,EAAG,CACzB,OAAOA,EAAE,QACX,CAEA,SAASb,GAAYa,EAAG,CACtB,OAAO,MAAM,QAAQA,CAAC,EAAIA,EAAE,CAAC,EAAI,IACnC,CAEA,SAASD,GAASR,EAAM,CAClBA,EAAK,KAAK,QAAU,SAAWA,EAAK,MAAQA,EAAK,KAAK,OAC1DA,EAAK,KAAOA,EAAK,KAAK,IACxB,CAEO,SAASM,GAAcN,EAAM,CAClC,IAAIU,EAAS,EACb,GAAGV,EAAK,OAASU,SACTV,EAAOA,EAAK,SAAYA,EAAK,OAAS,EAAEU,EAClD,CAEO,SAASX,GAAKL,EAAM,CACzB,KAAK,KAAOA,EACZ,KAAK,MACL,KAAK,OAAS,EACd,KAAK,OAAS,IAChB,CAEAK,GAAK,UAAYN,GAAU,UAAY,CACrC,YAAaM,GACb,MAAOY,GACP,KAAMC,GACN,UAAWC,GACX,WAAYC,GACZ,KAAMC,GACN,IAAKC,GACL,KAAMC,GACN,KAAMC,GACN,UAAWC,GACX,YAAaC,GACb,OAAQC,GACR,MAAOC,GACP,KAAMf,GACN,CAAC,OAAO,QAAQ,EAAGgB,EACrB,ECtFO,SAASC,GAASC,EAAG,CAC1B,GAAI,OAAOA,GAAM,WAAY,MAAM,IAAI,MACvC,OAAOA,CACT,CCPO,SAASC,IAAe,CAC7B,MAAO,EACT,CAEe,SAARC,GAAiBC,EAAG,CACzB,OAAO,UAAW,CAChB,OAAOA,CACT,CACF,CCRe,SAARC,GAAiBC,EAAM,CAC5BA,EAAK,GAAK,KAAK,MAAMA,EAAK,EAAE,EAC5BA,EAAK,GAAK,KAAK,MAAMA,EAAK,EAAE,EAC5BA,EAAK,GAAK,KAAK,MAAMA,EAAK,EAAE,EAC5BA,EAAK,GAAK,KAAK,MAAMA,EAAK,EAAE,CAC9B,CCLe,SAARC,GAAiBC,EAAQC,EAAIC,EAAIC,EAAIC,EAAI,CAO9C,QANIC,EAAQL,EAAO,SACfM,EACAC,EAAI,GACJC,EAAIH,EAAM,OACVI,EAAIT,EAAO,QAAUG,EAAKF,GAAMD,EAAO,MAEpC,EAAEO,EAAIC,GACXF,EAAOD,EAAME,CAAC,EAAGD,EAAK,GAAKJ,EAAII,EAAK,GAAKF,EACzCE,EAAK,GAAKL,EAAIK,EAAK,GAAKL,GAAMK,EAAK,MAAQG,CAE/C,CCXe,SAARC,GAAiBC,EAAQC,EAAIC,EAAIC,EAAIC,EAAI,CAO9C,QANIC,EAAQL,EAAO,SACfM,EACAC,EAAI,GACJC,EAAIH,EAAM,OACVI,EAAIT,EAAO,QAAUI,EAAKF,GAAMF,EAAO,MAEpC,EAAEO,EAAIC,GACXF,EAAOD,EAAME,CAAC,EAAGD,EAAK,GAAKL,EAAIK,EAAK,GAAKH,EACzCG,EAAK,GAAKJ,EAAII,EAAK,GAAKJ,GAAMI,EAAK,MAAQG,CAE/C,CCRO,IAAIC,IAAO,EAAI,KAAK,KAAK,CAAC,GAAK,EAE/B,SAASC,GAAcC,EAAOC,EAAQC,EAAIC,EAAIC,EAAIC,EAAI,CAkB3D,QAjBIC,EAAO,CAAC,EACRC,EAAQN,EAAO,SACfO,EACAC,EACAC,EAAK,EACLC,EAAK,EACLC,EAAIL,EAAM,OACVM,EAAIC,EACJC,EAAQd,EAAO,MACfe,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAEGZ,EAAKE,GAAG,CACbC,EAAKT,EAAKF,EAAIY,EAAKT,EAAKF,EAGxB,GAAGa,EAAWT,EAAMI,GAAI,EAAE,YAAc,CAACK,GAAYL,EAAKC,GAO1D,IANAK,EAAWC,EAAWF,EACtBK,EAAQ,KAAK,IAAIP,EAAKD,EAAIA,EAAKC,CAAE,GAAKC,EAAQf,GAC9CsB,EAAON,EAAWA,EAAWK,EAC7BD,EAAW,KAAK,IAAIF,EAAWI,EAAMA,EAAOL,CAAQ,EAG7CN,EAAKC,EAAG,EAAED,EAAI,CAMnB,GALAK,GAAYP,EAAYF,EAAMI,CAAE,EAAE,MAC9BF,EAAYQ,IAAUA,EAAWR,GACjCA,EAAYS,IAAUA,EAAWT,GACrCa,EAAON,EAAWA,EAAWK,EAC7BF,EAAW,KAAK,IAAID,EAAWI,EAAMA,EAAOL,CAAQ,EAChDE,EAAWC,EAAU,CAAEJ,GAAYP,EAAW,KAAO,CACzDW,EAAWD,CACb,CAGAb,EAAK,KAAKE,EAAM,CAAC,MAAOQ,EAAU,KAAMH,EAAKC,EAAI,SAAUP,EAAM,MAAMG,EAAIC,CAAE,CAAC,CAAC,EAC3EH,EAAI,KAAMe,GAAYf,EAAKN,EAAIC,EAAIC,EAAIW,EAAQZ,GAAMW,EAAKE,EAAWD,EAAQV,CAAE,EAC9EmB,GAAahB,EAAKN,EAAIC,EAAIY,EAAQb,GAAMW,EAAKG,EAAWD,EAAQX,EAAIC,CAAE,EAC3EU,GAASC,EAAUN,EAAKC,CAC1B,CAEA,OAAOL,CACT,CAEA,IAAOmB,GAAS,SAASC,EAAO1B,EAAO,CAErC,SAAS2B,EAAS1B,EAAQC,EAAIC,EAAIC,EAAIC,EAAI,CACxCN,GAAcC,EAAOC,EAAQC,EAAIC,EAAIC,EAAIC,CAAE,CAC7C,CAEA,OAAAsB,EAAS,MAAQ,SAASC,EAAG,CAC3B,OAAOF,GAAQE,EAAI,CAACA,GAAK,EAAIA,EAAI,CAAC,CACpC,EAEOD,CACT,EAAG7B,EAAG,EC5DS,SAAR+B,IAAmB,CACxB,IAAIC,EAAOC,GACPC,EAAQ,GACRC,EAAK,EACLC,EAAK,EACLC,EAAe,CAAC,CAAC,EACjBC,EAAeC,GACfC,EAAaD,GACbE,EAAeF,GACfG,EAAgBH,GAChBI,EAAcJ,GAElB,SAASK,EAAQC,EAAM,CACrB,OAAAA,EAAK,GACLA,EAAK,GAAK,EACVA,EAAK,GAAKV,EACVU,EAAK,GAAKT,EACVS,EAAK,WAAWC,CAAY,EAC5BT,EAAe,CAAC,CAAC,EACbH,GAAOW,EAAK,WAAWE,EAAS,EAC7BF,CACT,CAEA,SAASC,EAAaE,EAAM,CAC1B,IAAIC,EAAIZ,EAAaW,EAAK,KAAK,EAC3BE,EAAKF,EAAK,GAAKC,EACfE,EAAKH,EAAK,GAAKC,EACfG,EAAKJ,EAAK,GAAKC,EACfI,EAAKL,EAAK,GAAKC,EACfG,EAAKF,IAAIA,EAAKE,GAAMF,EAAKE,GAAM,GAC/BC,EAAKF,IAAIA,EAAKE,GAAMF,EAAKE,GAAM,GACnCL,EAAK,GAAKE,EACVF,EAAK,GAAKG,EACVH,EAAK,GAAKI,EACVJ,EAAK,GAAKK,EACNL,EAAK,WACPC,EAAIZ,EAAaW,EAAK,MAAQ,CAAC,EAAIV,EAAaU,CAAI,EAAI,EACxDE,GAAMP,EAAYK,CAAI,EAAIC,EAC1BE,GAAMX,EAAWQ,CAAI,EAAIC,EACzBG,GAAMX,EAAaO,CAAI,EAAIC,EAC3BI,GAAMX,EAAcM,CAAI,EAAIC,EACxBG,EAAKF,IAAIA,EAAKE,GAAMF,EAAKE,GAAM,GAC/BC,EAAKF,IAAIA,EAAKE,GAAMF,EAAKE,GAAM,GACnCrB,EAAKgB,EAAME,EAAIC,EAAIC,EAAIC,CAAE,EAE7B,CAEA,OAAAT,EAAQ,MAAQ,SAASU,EAAG,CAC1B,OAAO,UAAU,QAAUpB,EAAQ,CAAC,CAACoB,EAAGV,GAAWV,CACrD,EAEAU,EAAQ,KAAO,SAASU,EAAG,CACzB,OAAO,UAAU,QAAUnB,EAAK,CAACmB,EAAE,CAAC,EAAGlB,EAAK,CAACkB,EAAE,CAAC,EAAGV,GAAW,CAACT,EAAIC,CAAE,CACvE,EAEAQ,EAAQ,KAAO,SAASU,EAAG,CACzB,OAAO,UAAU,QAAUtB,EAAOuB,GAASD,CAAC,EAAGV,GAAWZ,CAC5D,EAEAY,EAAQ,QAAU,SAASU,EAAG,CAC5B,OAAO,UAAU,OAASV,EAAQ,aAAaU,CAAC,EAAE,aAAaA,CAAC,EAAIV,EAAQ,aAAa,CAC3F,EAEAA,EAAQ,aAAe,SAASU,EAAG,CACjC,OAAO,UAAU,QAAUhB,EAAe,OAAOgB,GAAM,WAAaA,EAAIE,GAAS,CAACF,CAAC,EAAGV,GAAWN,CACnG,EAEAM,EAAQ,aAAe,SAASU,EAAG,CACjC,OAAO,UAAU,OAASV,EAAQ,WAAWU,CAAC,EAAE,aAAaA,CAAC,EAAE,cAAcA,CAAC,EAAE,YAAYA,CAAC,EAAIV,EAAQ,WAAW,CACvH,EAEAA,EAAQ,WAAa,SAASU,EAAG,CAC/B,OAAO,UAAU,QAAUd,EAAa,OAAOc,GAAM,WAAaA,EAAIE,GAAS,CAACF,CAAC,EAAGV,GAAWJ,CACjG,EAEAI,EAAQ,aAAe,SAASU,EAAG,CACjC,OAAO,UAAU,QAAUb,EAAe,OAAOa,GAAM,WAAaA,EAAIE,GAAS,CAACF,CAAC,EAAGV,GAAWH,CACnG,EAEAG,EAAQ,cAAgB,SAASU,EAAG,CAClC,OAAO,UAAU,QAAUZ,EAAgB,OAAOY,GAAM,WAAaA,EAAIE,GAAS,CAACF,CAAC,EAAGV,GAAWF,CACpG,EAEAE,EAAQ,YAAc,SAASU,EAAG,CAChC,OAAO,UAAU,QAAUX,EAAc,OAAOW,GAAM,WAAaA,EAAIE,GAAS,CAACF,CAAC,EAAGV,GAAWD,CAClG,EAEOC,CACT,CC7FO,SAASa,GAAUC,EAAQC,EAAO,CACvC,OAAQ,UAAU,OAAQ,CACxB,IAAK,GAAG,MACR,IAAK,GAAG,KAAK,MAAMD,CAAM,EAAG,MAC5B,QAAS,KAAK,MAAMC,CAAK,EAAE,OAAOD,CAAM,EAAG,KAC7C,CACA,OAAO,IACT,CCJO,IAAME,GAAW,OAAO,UAAU,EAE1B,SAARC,IAA2B,CAChC,IAAIC,EAAQ,IAAIC,GACZC,EAAS,CAAC,EACVC,EAAQ,CAAC,EACTC,EAAUN,GAEd,SAASO,EAAMC,EAAG,CAChB,IAAI,EAAIN,EAAM,IAAIM,CAAC,EACnB,GAAI,IAAM,OAAW,CACnB,GAAIF,IAAYN,GAAU,OAAOM,EACjCJ,EAAM,IAAIM,EAAG,EAAIJ,EAAO,KAAKI,CAAC,EAAI,CAAC,CACrC,CACA,OAAOH,EAAM,EAAIA,EAAM,MAAM,CAC/B,CAEA,OAAAE,EAAM,OAAS,SAASE,EAAG,CACzB,GAAI,CAAC,UAAU,OAAQ,OAAOL,EAAO,MAAM,EAC3CA,EAAS,CAAC,EAAGF,EAAQ,IAAIC,GACzB,QAAWO,KAASD,EACdP,EAAM,IAAIQ,CAAK,GACnBR,EAAM,IAAIQ,EAAON,EAAO,KAAKM,CAAK,EAAI,CAAC,EAEzC,OAAOH,CACT,EAEAA,EAAM,MAAQ,SAASE,EAAG,CACxB,OAAO,UAAU,QAAUJ,EAAQ,MAAM,KAAKI,CAAC,EAAGF,GAASF,EAAM,MAAM,CACzE,EAEAE,EAAM,QAAU,SAASE,EAAG,CAC1B,OAAO,UAAU,QAAUH,EAAUG,EAAGF,GAASD,CACnD,EAEAC,EAAM,KAAO,UAAW,CACtB,OAAON,GAAQG,EAAQC,CAAK,EAAE,QAAQC,CAAO,CAC/C,EAEAK,GAAU,MAAMJ,EAAO,SAAS,EAEzBA,CACT,CC7CO,SAASK,EAAUC,EAAGC,EAAGC,EAAG,CACjC,KAAK,EAAIF,EACT,KAAK,EAAIC,EACT,KAAK,EAAIC,CACX,CAEAH,EAAU,UAAY,CACpB,YAAaA,EACb,MAAO,SAASC,EAAG,CACjB,OAAOA,IAAM,EAAI,KAAO,IAAID,EAAU,KAAK,EAAIC,EAAG,KAAK,EAAG,KAAK,CAAC,CAClE,EACA,UAAW,SAASC,EAAGC,EAAG,CACxB,OAAOD,IAAM,EAAIC,IAAM,EAAI,KAAO,IAAIH,EAAU,KAAK,EAAG,KAAK,EAAI,KAAK,EAAIE,EAAG,KAAK,EAAI,KAAK,EAAIC,CAAC,CAClG,EACA,MAAO,SAASC,EAAO,CACrB,MAAO,CAACA,EAAM,CAAC,EAAI,KAAK,EAAI,KAAK,EAAGA,EAAM,CAAC,EAAI,KAAK,EAAI,KAAK,CAAC,CAChE,EACA,OAAQ,SAASF,EAAG,CAClB,OAAOA,EAAI,KAAK,EAAI,KAAK,CAC3B,EACA,OAAQ,SAASC,EAAG,CAClB,OAAOA,EAAI,KAAK,EAAI,KAAK,CAC3B,EACA,OAAQ,SAASE,EAAU,CACzB,MAAO,EAAEA,EAAS,CAAC,EAAI,KAAK,GAAK,KAAK,GAAIA,EAAS,CAAC,EAAI,KAAK,GAAK,KAAK,CAAC,CAC1E,EACA,QAAS,SAASH,EAAG,CACnB,OAAQA,EAAI,KAAK,GAAK,KAAK,CAC7B,EACA,QAAS,SAASC,EAAG,CACnB,OAAQA,EAAI,KAAK,GAAK,KAAK,CAC7B,EACA,SAAU,SAASD,EAAG,CACpB,OAAOA,EAAE,KAAK,EAAE,OAAOA,EAAE,MAAM,EAAE,IAAI,KAAK,QAAS,IAAI,EAAE,IAAIA,EAAE,OAAQA,CAAC,CAAC,CAC3E,EACA,SAAU,SAASC,EAAG,CACpB,OAAOA,EAAE,KAAK,EAAE,OAAOA,EAAE,MAAM,EAAE,IAAI,KAAK,QAAS,IAAI,EAAE,IAAIA,EAAE,OAAQA,CAAC,CAAC,CAC3E,EACA,SAAU,UAAW,CACnB,MAAO,aAAe,KAAK,EAAI,IAAM,KAAK,EAAI,WAAa,KAAK,EAAI,GACtE,CACF,EAEO,IAAIG,GAAW,IAAIN,EAAU,EAAG,EAAG,CAAC,EAE3CO,GAAU,UAAYP,EAAU,UAEjB,SAARO,GAA2BC,EAAM,CACtC,KAAO,CAACA,EAAK,QAAQ,GAAI,EAAEA,EAAOA,EAAK,YAAa,OAAOF,GAC3D,OAAOE,EAAK,MACd,CCxBO,IAAMC,GAAN,KAAqB,CAQxB,YAAYC,EAAqB,CAJjC,KAAQ,YAAsB,IAC9B,KAAQ,YAAwB,CAAC,EACjC,KAAQ,UAAqB,GAGzB,IAAMC,EAAK,SAAS,eAAeD,CAAW,EAC9C,GAAI,CAACC,EAAI,MAAM,IAAI,MAAM,aAAaD,CAAW,YAAY,EAC7D,KAAK,UAAYC,EACjB,KAAK,MAAQ,IACb,KAAK,OAAS,IAEd,KAAK,QAAQ,CACjB,CAEQ,SAAU,CACd,KAAK,UAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAqR3B,KAAK,UAAU,cAAc,gBAAgB,GAAG,iBAAiB,QAAS,IAAM,KAAK,KAAK,CAAC,EAC3F,KAAK,UAAU,cAAc,gBAAgB,GAAG,iBAAiB,QAAS,IAAM,KAAK,OAAO,CAAC,EAC7F,KAAK,UAAU,cAAc,gBAAgB,GAAG,iBAAiB,QAAS,IAAM,KAAK,OAAO,CAAC,EAE7F,IAAMC,EAAY,KAAK,UAAU,cAAc,gBAAgB,EAC/DA,GAAW,iBAAiB,WAAaC,GAAM,CACvCA,EAAE,MAAQ,SAAS,KAAK,KAAK,CACrC,CAAC,EAGD,KAAK,UAAU,iBAAiB,uCAAuC,EAAE,QAAQC,GAAO,CACpFA,EAAI,iBAAiB,QAAS,IAAM,CAChC,IAAMC,EAAQD,EAAoB,QAAQ,MAAQ,IAClDF,EAAU,MAAQG,EAClB,KAAK,YAAcA,EACnB,KAAK,KAAK,CACd,CAAC,CACL,CAAC,CACL,CAEA,MAAM,MAAO,CACT,GAAI,KAAK,UAAW,OAEpB,IAAMH,EAAY,KAAK,UAAU,cAAc,gBAAgB,EACzDI,EAAc,KAAK,UAAU,cAAc,iBAAiB,EAC5DC,EAAgB,KAAK,UAAU,cAAc,oBAAoB,EAEjEF,EAAOH,EAAU,OAAS,IAC1BM,EAAQ,SAASF,EAAY,KAAK,GAAK,EACvCG,EAAY,SAASF,EAAc,KAAK,GAAK,EAEnD,KAAK,YAAcF,EACnB,KAAK,UAAY,GACjB,KAAK,YAAY,EAEjB,GAAI,CACA,IAAMK,EAAW,MAAM,MAAM,wBAAwB,mBAAmBL,CAAI,CAAC,UAAUG,CAAK,gBAAgBC,CAAS,EAAE,EAEvH,GAAI,CAACC,EAAS,GAAI,CACd,IAAMC,EAAY,MAAMD,EAAS,KAAK,EAAE,MAAM,KAAO,CAAE,OAAQ,gBAAiB,EAAE,EAClF,KAAK,UAAUC,EAAU,QAAU,QAAQD,EAAS,MAAM,EAAE,EAC5D,MACJ,CAEA,IAAME,EAAS,MAAMF,EAAS,KAAK,EAI/BE,EAAO,OAAS,CAACA,EAAO,KACxB,KAAK,UAAUA,EAAO,KAAK,EACpBA,EAAO,MAEd,KAAK,cAAcA,CAAkB,EACrC,KAAK,kBAAkB,EAEnBA,EAAO,UAAYA,EAAO,SAAS,OAAS,EAC5CC,EAAU,sBAAsBD,EAAO,SAAS,MAAM,yBAA0B,SAAS,EAEzFC,EAAU,kBAAkBD,EAAO,oBAAsB,MAAM,GAAI,SAAS,GAGhF,KAAK,UAAU,8BAA8B,CAErD,OAASE,EAAO,CACZ,KAAK,UAAU,mBAAmBA,CAAK,EAAE,CAC7C,QAAE,CACE,KAAK,UAAY,EACrB,CACJ,CAEQ,aAAc,CAClB,IAAMC,EAAU,KAAK,UAAU,cAAc,iBAAiB,EAC9DA,EAAQ,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAOxB,CAEQ,UAAUC,EAAiB,CAC/B,IAAMD,EAAU,KAAK,UAAU,cAAc,iBAAiB,EAC9DA,EAAQ,UAAY;AAAA;AAAA;AAAA;AAAA,qBAIPC,CAAO;AAAA;AAAA,UAGpBH,EAAUG,EAAS,OAAO,CAC9B,CAEQ,cAAcC,EAAgB,CAClC,IAAMF,EAAU,KAAK,UAAU,cAAc,iBAAiB,EAC9DA,EAAQ,UAAY,GAGpB,IAAMG,EAAOH,EAAQ,sBAAsB,EAC3C,KAAK,MAAQG,EAAK,OAAS,IAC3B,KAAK,OAAS,KAAK,IAAI,IAAKA,EAAK,MAAM,EAGvC,IAAMC,EAASC,GAAOL,CAAO,EACxB,OAAO,KAAK,EACZ,KAAK,QAAS,KAAK,KAAK,EACxB,KAAK,SAAU,KAAK,MAAM,EAC1B,KAAK,UAAW,OAAO,KAAK,KAAK,IAAI,KAAK,MAAM,EAAE,EAClD,MAAM,cAAe,+CAA+C,EAGnEM,EAAUC,GAAUL,CAAI,EACzB,IAAIM,GAAKA,EAAE,SAAW,EAAIA,EAAE,KAAK,EACjC,KAAK,CAACC,EAAGC,KAAOA,EAAE,OAAS,IAAMD,EAAE,OAAS,EAAE,EAW7CE,EARaC,GAAkB,EAChC,KAAK,CAAC,KAAK,MAAO,KAAK,MAAM,CAAC,EAC9B,aAAa,CAAC,EACd,aAAa,CAAC,EACd,WAAW,EAAE,EACb,MAAM,EAAI,EAGaN,CAAI,EAM1BO,EAAgBC,GAAqB,EACtC,OAAO,CAAC,eAAgB,QAAS,UAAW,SAAU,UAAW,MAAO,MAAO,MAAO,OAAO,CAAC,EAC9F,MAAM,CACH,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,SACJ,CAAC,EAECC,EAAYP,GAA2B,CAEzC,IAAIQ,EAA2BR,EAC/B,KAAOQ,GAAQA,EAAK,MAAQ,GACxBA,EAAOA,EAAK,OAEhB,IAAMC,EAAWD,GAAM,KAAK,MAAQ,QACpC,OAAOH,EAAWI,CAAQ,CAC9B,EAGMC,EAAQP,EAAY,YAAY,EAGhCQ,EAAOf,EAAI,UAAU,GAAG,EACzB,KAAKc,EAAM,OAAOV,GAAKA,EAAE,MAAQ,CAAC,CAAC,EACnC,KAAK,GAAG,EACR,KAAK,YAAaA,GAAK,aAAaA,EAAE,EAAE,IAAIA,EAAE,EAAE,GAAG,EAGxDW,EAAK,OAAO,MAAM,EACb,KAAK,QAAS,cAAc,EAC5B,KAAK,QAASX,GAAK,KAAK,IAAI,EAAGA,EAAE,GAAKA,EAAE,EAAE,CAAC,EAC3C,KAAK,SAAUA,GAAK,KAAK,IAAI,EAAGA,EAAE,GAAKA,EAAE,EAAE,CAAC,EAC5C,KAAK,OAAQA,GAAKO,EAASP,CAAC,CAAC,EAC7B,KAAK,SAAU,qBAAqB,EACpC,KAAK,eAAgB,CAAC,EACtB,GAAG,QAAS,CAACY,EAAOZ,IAAM,KAAK,gBAAgBA,CAAC,CAAC,EACjD,GAAG,YAAa,CAACY,EAAOZ,IAAM,KAAK,YAAYA,CAAC,CAAC,EACjD,GAAG,WAAY,IAAM,KAAK,YAAY,CAAC,EACvC,OAAO,OAAO,EACd,KAAKA,GAAK,GAAGA,EAAE,KAAK,IAAI;AAAA,EAAKA,EAAE,KAAK,eAAiB,KAAK;AAAA,GAAMA,EAAE,KAAK,YAAc,GAAG,QAAQ,CAAC,CAAC,GAAG,EAG1GW,EAAK,OAAOX,GAAMA,EAAE,GAAKA,EAAE,GAAM,IAAOA,EAAE,GAAKA,EAAE,GAAM,EAAE,EACpD,OAAO,MAAM,EACb,KAAK,QAAS,eAAe,EAC7B,KAAK,IAAK,CAAC,EACX,KAAK,IAAK,EAAE,EACZ,KAAKA,GAAK,KAAK,cAAcA,EAAE,KAAK,KAAMA,EAAE,GAAKA,EAAE,GAAK,CAAC,CAAC,EAG/DW,EAAK,OAAOX,GAAMA,EAAE,GAAKA,EAAE,GAAM,IAAOA,EAAE,GAAKA,EAAE,GAAM,EAAE,EACpD,OAAO,MAAM,EACb,KAAK,QAAS,cAAc,EAC5B,KAAK,IAAK,CAAC,EACX,KAAK,IAAK,EAAE,EACZ,KAAKA,GAAKA,EAAE,KAAK,eAAiB,EAAE,EAGzC,KAAK,aAAaK,CAAU,CAChC,CAEQ,cAAcQ,EAAcC,EAA0B,CAE1D,IAAMC,EAAW,KAAK,MAAMD,EAAW,CAAS,EAChD,OAAID,EAAK,QAAUE,EAAiBF,EAC7BA,EAAK,MAAM,EAAGE,EAAW,CAAC,EAAI,QACzC,CAEQ,gBAAgBf,EAA4D,CAChF,GAAIA,EAAE,UAAYA,EAAE,KAAK,KAAM,CAE3B,KAAK,YAAY,KAAK,KAAK,WAAW,EACtC,KAAK,YAAcA,EAAE,KAAK,KAE1B,IAAMrB,EAAY,KAAK,UAAU,cAAc,gBAAgB,EAC/DA,EAAU,MAAQqB,EAAE,KAAK,KAGzB,IAAMgB,EAAU,KAAK,UAAU,cAAc,gBAAgB,EAC7DA,EAAQ,SAAW,GAEnB,KAAK,KAAK,CACd,CACJ,CAEQ,YAAYhB,EAAuB,CACvC,IAAMiB,EAAY,KAAK,UAAU,cAAc,mBAAmB,EAC5DC,EAAS,KAAK,UAAU,cAAc,yBAAyB,EAErED,EAAU,MAAM,QAAU,QAC1BC,EAAO,UAAY;AAAA,sBACLlB,EAAE,KAAK,IAAI;AAAA,oBACbA,EAAE,KAAK,IAAI;AAAA,oBACXA,EAAE,KAAK,eAAiB,KAAK;AAAA,wBACzBA,EAAE,KAAK,YAAc,GAAG,QAAQ,CAAC,CAAC;AAAA,SAEtD,CAEQ,aAAc,CAClB,IAAMiB,EAAY,KAAK,UAAU,cAAc,mBAAmB,EAClEA,EAAU,MAAM,QAAU,MAC9B,CAEQ,aAAaZ,EAA6C,CAC9D,IAAMc,EAAW,KAAK,UAAU,cAAc,kBAAkB,EAC1DC,EAAaf,EAAW,OAAO,EAErCc,EAAS,UAAYC,EAAW,IAAIC,GAAO;AAAA;AAAA,wEAEqBhB,EAAWgB,CAAG,CAAC;AAAA,wBAC/DA,CAAG;AAAA;AAAA,SAElB,EAAE,KAAK,EAAE,CACd,CAEQ,mBAAoB,CACxB,IAAMC,EAAgB,KAAK,UAAU,cAAc,uBAAuB,EACpEC,EAAQ,KAAK,YAAY,MAAM,GAAG,EAAE,OAAOC,GAAKA,CAAC,EAEnDC,EAAO,kDACPC,EAAc,GAElBH,EAAM,QAAQ,CAACI,EAAM,IAAM,CACvBD,GAAe,IAAMC,EACrBF,GAAQ,mCACRA,GAAQ,uCAAuCC,CAAW,KAAKC,CAAI,SACvE,CAAC,EAEDL,EAAc,UAAYG,EAG1BH,EAAc,iBAAiB,aAAa,EAAE,QAAQ5C,GAAM,CACxDA,EAAG,iBAAiB,QAAS,IAAM,CAC/B,IAAMI,EAAQJ,EAAmB,QAAQ,MAAQ,IAC3CC,EAAY,KAAK,UAAU,cAAc,gBAAgB,EAC/DA,EAAU,MAAQG,EAClB,KAAK,YAAcA,EACnB,KAAK,KAAK,CACd,CAAC,CACL,CAAC,CACL,CAEQ,QAAS,CACb,GAAI,KAAK,YAAY,OAAS,EAAG,CAC7B,IAAM8C,EAAW,KAAK,YAAY,IAAI,EACtC,KAAK,YAAcA,EAEnB,IAAMjD,EAAY,KAAK,UAAU,cAAc,gBAAgB,EAI/D,GAHAA,EAAU,MAAQiD,EAGd,KAAK,YAAY,SAAW,EAAG,CAC/B,IAAMZ,EAAU,KAAK,UAAU,cAAc,gBAAgB,EAC7DA,EAAQ,SAAW,EACvB,CAEA,KAAK,KAAK,CACd,CACJ,CAEQ,QAAS,CACb,KAAK,YAAc,CAAC,EACpB,KAAK,YAAc,IAEnB,IAAMrC,EAAY,KAAK,UAAU,cAAc,gBAAgB,EAC/DA,EAAU,MAAQ,IAElB,IAAMqC,EAAU,KAAK,UAAU,cAAc,gBAAgB,EAC7DA,EAAQ,SAAW,GAEnB,KAAK,KAAK,CACd,CACJ,ECnkBO,IAAMa,GAAN,KAAsB,CAazB,YAAYC,EAAqB,CAJjC,KAAQ,cAA+B,KACvC,KAAQ,WAAgC,KACxC,KAAQ,cAA6B,IAAI,IAGrC,IAAMC,EAAK,SAAS,eAAeD,CAAW,EAC9C,GAAI,CAACC,EAAI,MAAM,IAAI,MAAM,aAAaD,CAAW,YAAY,EAC7D,KAAK,UAAYC,EAEjB,KAAK,QAAQ,EACb,KAAK,WAAW,CACpB,CAEQ,SAAgB,CACpB,KAAK,UAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAyE3B,KAAK,UAAY,KAAK,UAAU,cAAc,WAAW,EACzD,KAAK,cAAgB,KAAK,UAAU,cAAc,eAAe,EACjE,KAAK,sBAAwB,KAAK,UAAU,cAAc,aAAa,EACvE,KAAK,WAAa,KAAK,UAAU,cAAc,eAAe,EAC9D,KAAK,kBAAoB,KAAK,UAAU,cAAc,eAAe,EACrE,KAAK,iBAAmB,KAAK,UAAU,cAAc,cAAc,CACvE,CAEQ,YAAmB,CAEvB,KAAK,UAAU,cAAc,eAAe,GAAG,iBAAiB,QAAS,IAAM,CAC3E,KAAK,UAAU,MAAQ,GAC3B,CAAC,EACD,KAAK,UAAU,cAAc,oBAAoB,GAAG,iBAAiB,QAAS,IAAM,CAChF,KAAK,UAAU,MAAQ,aAC3B,CAAC,EACD,KAAK,UAAU,cAAc,oBAAoB,GAAG,iBAAiB,QAAS,IAAM,CAChF,KAAK,UAAU,MAAQ,aAC3B,CAAC,EAGD,KAAK,WAAW,iBAAiB,QAAS,IAAM,KAAK,UAAU,CAAC,EAGhE,KAAK,UAAU,cAAc,iBAAiB,GAAG,iBAAiB,QAAS,IAAM,KAAK,cAAc,KAAK,CAAC,EAC1G,KAAK,UAAU,cAAc,kBAAkB,GAAG,iBAAiB,QAAS,IAAM,KAAK,cAAc,MAAM,CAAC,EAG5G,KAAK,UAAU,cAAc,sBAAsB,GAAG,iBAAiB,QAAS,IAAM,KAAK,eAAe,CAAC,CAC/G,CAEQ,WAAWC,EAAsB,CAErC,OAAIA,IAAS,KAAOA,EAAK,WAAW,IAAI,EAE7BA,CAGf,CAEA,MAAM,WAA2B,CAC7B,IAAMA,EAAO,KAAK,WAAW,KAAK,UAAU,MAAM,KAAK,GAAK,GAAG,EACzDC,EAAY,WAAW,KAAK,cAAc,KAAK,EAC/CC,EAAgB,KAAK,sBAAsB,QAGjD,KAAK,cAAc,MAAM,EACzB,KAAK,WAAa,KAClB,KAAK,aAAa,EAElB,GAAI,CAEA,IAAMC,EAAgB,MAAM,MACxB,8BAA8B,mBAAmBH,CAAI,CAAC,gBAAgBC,CAAS,mBAAmBC,CAAa,GAC/G,CAAE,OAAQ,MAAO,CACrB,EAEA,GAAI,CAACC,EAAc,GAAI,CACnB,IAAMC,EAAQ,MAAMD,EAAc,KAAK,EACvC,MAAM,IAAI,MAAMC,EAAM,QAAU,sBAAsB,CAC1D,CAEA,GAAM,CAAE,QAAAC,CAAQ,EAAI,MAAMF,EAAc,KAAK,EAC7C,KAAK,cAAgBE,EAGrB,MAAM,KAAK,eAAeA,CAAO,CACrC,OAASC,EAAG,CACRC,EAAU,eAAeD,CAAC,GAAI,OAAO,EACrC,KAAK,aAAa,CACtB,CACJ,CAEA,MAAc,eAAeE,EAA+B,CAGxD,IAAIC,EAAW,EAETC,EAAO,SAA2B,CACpC,GAAI,CACA,IAAMC,EAAW,MAAM,MAAM,0BAA0BH,CAAM,EAAE,EAC/D,GAAI,CAACG,EAAS,GACV,MAAM,IAAI,MAAM,2BAA2B,EAG/C,IAAMC,EAAqB,MAAMD,EAAS,KAAK,EAG/C,GAFA,KAAK,eAAeC,CAAM,EAEtBA,EAAO,SAAW,WAAY,CAC9B,MAAM,KAAK,YAAYJ,CAAM,EAC7B,MACJ,CAEA,GAAII,EAAO,SAAW,QAClB,MAAM,IAAI,MAAMA,EAAO,OAAS,aAAa,EAKjD,GADAH,IACIA,EAAW,IACX,WAAWC,EAAM,GAAY,MAE7B,OAAM,IAAI,MAAM,gCAAgC,CAExD,OAASJ,EAAG,CACRC,EAAU,GAAGD,CAAC,GAAI,OAAO,EACzB,KAAK,aAAa,CACtB,CACJ,EAEA,MAAMI,EAAK,CACf,CAEQ,eAAeE,EAA0B,CAC7C,IAAMC,EAAe,KAAK,kBAAkB,cAAc,gBAAgB,EACpEC,EAAe,KAAK,kBAAkB,cAAc,gBAAgB,EASpEC,EAPqC,CACvC,SAAU,oBACV,cAAe,sBACf,gBAAiB,8BACjB,aAAc,yBAClB,EAE6BH,EAAO,SAAS,KAAK,GAAKA,EAAO,SAAS,MAEvE,GAAIA,EAAO,SAAS,MAAQ,EAAG,CAC3B,IAAMI,EAAU,KAAK,MAAOJ,EAAO,SAAS,QAAUA,EAAO,SAAS,MAAS,GAAG,EAClFC,EAAa,MAAM,MAAQ,GAAGG,CAAO,IACrCF,EAAa,YAAc,GAAGC,CAAS,KAAKC,CAAO,IACvD,MACIF,EAAa,YAAcC,CAEnC,CAEA,MAAc,YAAYP,EAA+B,CACrD,GAAI,CACA,IAAMG,EAAW,MAAM,MAAM,2BAA2BH,CAAM,EAAE,EAChE,GAAI,CAACG,EAAS,GACV,MAAM,IAAI,MAAM,wBAAwB,EAG5C,IAAMM,EAAsB,MAAMN,EAAS,KAAK,EAChD,KAAK,WAAaM,EAClB,KAAK,cAAcA,CAAO,CAC9B,OAASX,EAAG,CACRC,EAAU,2BAA2BD,CAAC,GAAI,OAAO,EACjD,KAAK,aAAa,CACtB,CACJ,CAEQ,cAAcW,EAA2B,CAG7C,GAFA,KAAK,aAAa,EAEdA,EAAQ,iBAAiB,SAAW,EAAG,CAEtC,KAAK,UAAU,cAAc,YAAY,EAAkB,MAAM,QAAU,QAC5E,KAAK,iBAAiB,MAAM,QAAU,OACtC,MACJ,CAEC,KAAK,UAAU,cAAc,YAAY,EAAkB,MAAM,QAAU,OAC5E,KAAK,iBAAiB,MAAM,QAAU,QAGtC,GAAM,CAAE,aAAAC,CAAa,EAAID,EACxB,KAAK,UAAU,cAAc,oBAAoB,EAAkB,YAChEC,EAAa,oBAAoB,eAAe,EACnD,KAAK,UAAU,cAAc,mBAAmB,EAAkB,YAC/DA,EAAa,uBAAuB,SAAS,EAChD,KAAK,UAAU,cAAc,mBAAmB,EAAkB,YAC/DA,EAAa,uBAChB,KAAK,UAAU,cAAc,gBAAgB,EAAkB,YAC5D,GAAGA,EAAa,sBAAsB,QAAQ,CAAC,CAAC,IAGpD,IAAMC,EAAkB,KAAK,UAAU,cAAc,uBAAuB,EAC5EA,EAAgB,UAAY,GAE5BF,EAAQ,iBAAiB,QAAQ,CAACG,EAAOC,IAAU,CAC/C,IAAMC,EAAU,KAAK,mBAAmBF,EAAOC,CAAK,EACpDF,EAAgB,YAAYG,CAAO,CACvC,CAAC,CACL,CAEQ,mBAAmBF,EAAuBC,EAA4B,CAC1E,IAAMtB,EAAK,SAAS,cAAc,KAAK,EACvCA,EAAG,UAAY,kBACfA,EAAG,UAAY;AAAA,oDAC6BsB,CAAK;AAAA;AAAA,kDAEPA,EAAQ,CAAC,KAAKD,EAAM,UAAU;AAAA,2CACrCA,EAAM,cAAc;AAAA,mDACZA,EAAM,2BAA2B;AAAA;AAAA;AAAA,kBAGlEA,EAAM,MAAM,IAAI,CAACG,EAAMC,IAAc;AAAA;AAAA;AAAA;AAAA;AAAA,gDAKP,KAAK,WAAWD,EAAK,IAAI,CAAC;AAAA,iDACzBF,CAAK;AAAA,qCACjBG,IAAc,EAAI,0CAA4C,EAAE;AAAA,sDAC/C,KAAK,WAAWD,EAAK,IAAI,CAAC;AAAA;AAAA,mDAE7BA,EAAK,MAAQ,IAAI,KAAKA,EAAK,KAAK,EAAE,mBAAmB,EAAI,EAAE;AAAA;AAAA,iBAE7F,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA,wEAE6CF,CAAK;AAAA,wEACLA,CAAK;AAAA,uEACNA,CAAK;AAAA;AAAA;AAAA,UAMpE,IAAMI,EAAS1B,EAAG,cAAc,eAAe,EACzC2B,EAAQ3B,EAAG,cAAc,cAAc,EACvC4B,EAAS5B,EAAG,cAAc,eAAe,EAE/C,OAAA0B,EAAO,iBAAiB,QAAS,IAAM,CACnC,IAAMG,EAAaF,EAAM,MAAM,UAAY,OAC3CA,EAAM,MAAM,QAAUE,EAAa,OAAS,QAC5CD,EAAO,YAAcC,EAAa,SAAM,QAC5C,CAAC,EAGD7B,EAAG,iBAAiB,gBAAgB,EAAE,QAAQ8B,GAAY,CACtDA,EAAS,iBAAiB,SAAWvB,GAAM,CACvC,IAAMwB,EAAQxB,EAAE,OACVN,EAAO8B,EAAM,QAAQ,KACvBA,EAAM,QACN,KAAK,cAAc,IAAI9B,CAAI,EAE3B,KAAK,cAAc,OAAOA,CAAI,EAElC,KAAK,mBAAmB,CAC5B,CAAC,CACL,CAAC,EAGDD,EAAG,cAAc,cAAc,GAAG,iBAAiB,QAAS,IAAM,KAAK,WAAWqB,EAAOC,EAAOtB,CAAE,CAAC,EACnGA,EAAG,cAAc,cAAc,GAAG,iBAAiB,QAAS,IAAM,KAAK,WAAWqB,EAAOC,EAAOtB,CAAE,CAAC,EACnGA,EAAG,cAAc,aAAa,GAAG,iBAAiB,QAAS,IAAM,KAAK,qBAAqBqB,EAAOC,EAAOtB,CAAE,CAAC,EAErGA,CACX,CAEQ,WAAWqB,EAAuBW,EAAoBhC,EAAuB,CAEjF,IAAMiC,EAAiBZ,EAAM,MACxB,IAAI,CAACa,EAAGC,KAAO,CAAE,KAAMD,EAAG,MAAOC,CAAE,EAAE,EACrC,OAAOD,GAAKA,EAAE,KAAK,KAAK,EACxB,KAAK,CAACE,EAAGC,IAAM,IAAI,KAAKA,EAAE,KAAK,KAAM,EAAE,QAAQ,EAAI,IAAI,KAAKD,EAAE,KAAK,KAAM,EAAE,QAAQ,CAAC,EAEnFE,EAAcL,EAAe,OAAS,EAAIA,EAAe,CAAC,EAAG,MAAQ,EAE3EjC,EAAG,iBAAiB,gBAAgB,EAAE,QAAQ,CAAC8B,EAAUK,IAAM,CAC3D,IAAMJ,EAAQD,EACd,GAAI,CAACC,EAAM,SAAU,CACjBA,EAAM,QAAUI,IAAMG,EACtB,IAAMrC,EAAO8B,EAAM,QAAQ,KACvBA,EAAM,QACN,KAAK,cAAc,IAAI9B,CAAI,EAE3B,KAAK,cAAc,OAAOA,CAAI,CAEtC,CACJ,CAAC,EACD,KAAK,mBAAmB,CAC5B,CAEQ,WAAWoB,EAAuBW,EAAoBhC,EAAuB,CAEjF,IAAMiC,EAAiBZ,EAAM,MACxB,IAAI,CAACa,EAAGC,KAAO,CAAE,KAAMD,EAAG,MAAOC,CAAE,EAAE,EACrC,OAAOD,GAAKA,EAAE,KAAK,KAAK,EACxB,KAAK,CAACE,EAAGC,IAAM,IAAI,KAAKD,EAAE,KAAK,KAAM,EAAE,QAAQ,EAAI,IAAI,KAAKC,EAAE,KAAK,KAAM,EAAE,QAAQ,CAAC,EAEnFE,EAAcN,EAAe,OAAS,EAAIA,EAAe,CAAC,EAAG,MAAQ,EAE3EjC,EAAG,iBAAiB,gBAAgB,EAAE,QAAQ,CAAC8B,EAAUK,IAAM,CAC3D,IAAMJ,EAAQD,EACd,GAAI,CAACC,EAAM,SAAU,CACjBA,EAAM,QAAUI,IAAMI,EACtB,IAAMtC,EAAO8B,EAAM,QAAQ,KACvBA,EAAM,QACN,KAAK,cAAc,IAAI9B,CAAI,EAE3B,KAAK,cAAc,OAAOA,CAAI,CAEtC,CACJ,CAAC,EACD,KAAK,mBAAmB,CAC5B,CAEQ,qBAAqBoB,EAAuBW,EAAoBhC,EAAuB,CAC3FA,EAAG,iBAAiB,gBAAgB,EAAE,QAAS8B,GAAa,CACxD,IAAMC,EAAQD,EACTC,EAAM,WACPA,EAAM,QAAU,GAChB,KAAK,cAAc,IAAIA,EAAM,QAAQ,IAAK,EAElD,CAAC,EACD,KAAK,mBAAmB,CAC5B,CAEQ,oBAA2B,CAC/B,IAAMS,EAAM,KAAK,UAAU,cAAc,sBAAsB,EAC/DA,EAAI,SAAW,KAAK,cAAc,OAAS,EAC3CA,EAAI,YAAc,oCAAwB,KAAK,cAAc,IAAI,GACrE,CAEA,MAAc,gBAAgC,CAC1C,GAAI,KAAK,cAAc,OAAS,GAAK,CAAC,KAAK,cAAe,OAE1D,IAAMC,EAAQ,KAAK,cAAc,KACjC,GAAI,CAAC,QAAQ,QAAQA,CAAK,mDAAmD,EACzE,OAGJ,IAAMD,EAAM,KAAK,UAAU,cAAc,sBAAsB,EAC/DA,EAAI,SAAW,GACfA,EAAI,YAAc,cAElB,GAAI,CACA,IAAM5B,EAAW,MAAM,MACnB,kCAAkC,KAAK,aAAa,GACpD,CACI,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,UAAU,CAAE,MAAO,MAAM,KAAK,KAAK,aAAa,CAAE,CAAC,CAClE,CACJ,EAEA,GAAI,CAACA,EAAS,GAAI,CACd,IAAMP,EAAQ,MAAMO,EAAS,KAAK,EAClC,MAAM,IAAI,MAAMP,EAAM,QAAU,eAAe,CACnD,CAEA,IAAMqC,EAAS,MAAM9B,EAAS,KAAK,EAE/B8B,EAAO,cAAgB,GACvBlC,EAAU,SAASkC,EAAO,aAAa,oBAAqB,SAAS,EAErEA,EAAO,YAAc,GACrBlC,EAAU,oBAAoBkC,EAAO,WAAW,WAAY,OAAO,EAIvE,MAAM,KAAK,UAAU,CACzB,OAASnC,EAAG,CACRC,EAAU,iBAAiBD,CAAC,GAAI,OAAO,EACvC,KAAK,mBAAmB,CAC5B,CACJ,CAEA,MAAc,cAAcoC,EAAuC,CAC/D,GAAK,KAAK,cAEV,GAAI,CACA,IAAM/B,EAAW,MAAM,MAAM,2BAA2B,KAAK,aAAa,WAAW+B,CAAM,EAAE,EAC7F,GAAI,CAAC/B,EAAS,GAAI,MAAM,IAAI,MAAM,eAAe,EAEjD,IAAMgC,EAAU,MAAMhC,EAAS,KAAK,EAC9BiC,EAAO,IAAI,KAAK,CAACD,CAAO,EAAG,CAAE,KAAMD,IAAW,MAAQ,WAAa,YAAa,CAAC,EACjFG,EAAM,IAAI,gBAAgBD,CAAI,EAE9BT,EAAI,SAAS,cAAc,GAAG,EACpCA,EAAE,KAAOU,EACTV,EAAE,SAAW,cAAc,KAAK,aAAa,IAAIO,IAAW,MAAQ,MAAQ,KAAK,GACjFP,EAAE,MAAM,EAER,IAAI,gBAAgBU,CAAG,EACvBtC,EAAU,eAAemC,EAAO,YAAY,CAAC,GAAI,SAAS,CAC9D,OAASpC,EAAG,CACRC,EAAU,iBAAiBD,CAAC,GAAI,OAAO,CAC3C,CACJ,CAEQ,cAAqB,CACzB,KAAK,kBAAkB,MAAM,QAAU,QACvC,KAAK,iBAAiB,MAAM,QAAU,OACrC,KAAK,UAAU,cAAc,YAAY,EAAkB,MAAM,QAAU,OAC5E,KAAK,WAAW,SAAW,GAC3B,KAAK,WAAW,YAAc,cAG9B,IAAMO,EAAe,KAAK,kBAAkB,cAAc,gBAAgB,EAC1EA,EAAa,MAAM,MAAQ,IAC/B,CAEQ,cAAqB,CACzB,KAAK,kBAAkB,MAAM,QAAU,OACvC,KAAK,WAAW,SAAW,GAC3B,KAAK,WAAW,YAAc,+BAClC,CAEQ,WAAWiC,EAAqB,CACpC,IAAMC,EAAM,SAAS,cAAc,KAAK,EACxC,OAAAA,EAAI,YAAcD,EACXC,EAAI,SACf,CACJ,ECzhBA,QAAQ,IAAI,8SAAoD,EAChE,QAAQ,IAAI,oDAA0C,EACtD,QAAQ,IAAI,8SAAoD,EA+EhE,OAAO,UAAYC,GACnB,OAAO,QAAUA,GACjB,OAAO,YAAcC,GACrB,OAAO,cAAgBC,GACvB,OAAO,SAAWC,GAClB,OAAO,kBAAoBC,GAC3B,OAAO,mBAAqBC,GAC5B,OAAO,kBAAoBC,GAC3B,OAAO,oBAAsBC,GAC7B,OAAO,sBAAwBC,GAC/B,OAAO,eAAiBC,GACxB,OAAO,gBAAkBC,GACzB,OAAO,oBAAsBC,GAC7B,OAAO,iBAAmBC,GAC1B,OAAO,eAAiBC,GACxB,OAAO,UAAYC,GACnB,OAAO,eAAiBC,GACxB,OAAO,sBAAwBC,GAC/B,OAAO,iBAAmBC,GAC1B,OAAO,qBAAuBC,GAC9B,OAAO,cAAgBC,GACvB,OAAO,oBAAsBC,GAC7B,OAAO,sBAAwBC,GAC/B,OAAO,uBAAyBC,GAChC,OAAO,qBAAuBC,GAC9B,OAAO,gBAAkBC,GACzB,OAAO,kBAAoBC,GAC3B,OAAO,sBAAwBC,GAC/B,OAAO,qBAAuBC,GAC9B,OAAO,YAAcC,GACrB,OAAO,mBAAqBC,GAC5B,OAAO,eAAiBC,GACxB,OAAO,gBAAkBC,GACzB,OAAO,eAAiBC,GACxB,OAAO,QAAUC,GACjB,OAAO,YAAcC,GACrB,OAAO,kBAAoBC,GAC3B,OAAO,kBAAoBC,GAC3B,OAAO,mBAAqBC,GAC5B,OAAO,cAAgBC,EACvB,OAAO,aAAeC,GACtB,OAAO,eAAiBC,GACxB,OAAO,sBAAwBC,GAC/B,OAAO,eAAiBC,GACxB,OAAO,sBAAwBC,GAC/B,OAAO,UAAYC,EAMnB,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,QAAQ,IAAI,2BAAsB,EAGlCC,GAAsB,EAGtBC,GAAU,EACV,QAAQ,IAAI,0BAAqB,EAGjCC,GAAa,EACb,QAAQ,IAAI,6BAAwB,EAGpCtC,GAAe,EACfC,GAAgB,EAChBE,GAAiB,EACjB,QAAQ,IAAI,uCAAkC,EAG9C,GAAI,CACF,IAAIoC,GAAe,2BAA2B,EAC9C,QAAQ,IAAI,oCAA+B,CAC7C,OAAS,EAAG,CACV,QAAQ,KAAK,oDAAqD,CAAC,CACrE,CAGA,GAAI,CACF,IAAIC,GAAe,oBAAoB,EACvC,QAAQ,IAAI,oCAA+B,CAC7C,OAAS,EAAG,CACV,QAAQ,KAAK,oDAAqD,CAAC,CACrE,CAGA,GAAI,CACF,IAAIC,GAAgB,sBAAsB,EAC1C,QAAQ,IAAI,qCAAgC,CAC9C,OAAS,EAAG,CACV,QAAQ,KAAK,qDAAsD,CAAC,CACtE,CAIA,QAAQ,IAAI,6CAAwC,EAEpD,QAAQ,IAAI,8SAAoD,EAChE,QAAQ,IAAI,oDAA0C,EACtD,QAAQ,IAAI,8SAAoD,CAClE,CAAC",
  "names": ["initTheme", "savedTheme", "applyTheme", "toggleTheme", "currentTheme", "newTheme", "theme", "actualTheme", "icon", "showToast", "message", "type", "duration", "toast", "container", "progressOverlayActive", "progressCancelCallback", "progressStartTime", "showProgressOverlay", "title", "total", "cancelCallback", "overlay", "titleEl", "percentEl", "currentEl", "barEl", "remainingEl", "handleProgressEscape", "updateProgressOverlay", "current", "message", "percent", "messageEl", "currentPercent", "animateValue", "elapsed", "rate", "eta", "minutes", "seconds", "hideProgressOverlay", "cancelProgress", "showToast", "element", "start", "end", "duration", "decimals", "suffix", "startTime", "delta", "update", "currentTime", "progress", "easeProgress", "reloadScripts", "btn", "statusEl", "response", "error", "result", "errorMessage", "dashboardRefreshInterval", "processRefreshInterval", "setTheme", "theme", "applyTheme", "updateThemeSelector", "activeTheme", "selector", "toggleAutoRefresh", "enabled", "interval", "startAutoRefresh", "stopAutoRefresh", "setRefreshInterval", "ms", "dashboardTab", "loadSystemInfo", "loadHealthScore", "processMs", "loadTopProcesses", "togglePreviewMode", "toggleConfirmations", "initSettings", "savedTheme", "updateThemeSelector", "autoRefresh", "autoRefreshToggle", "interval", "intervalSelector", "btn", "previewMode", "previewToggle", "confirmations", "confirmToggle", "loadAboutInfo", "startAutoRefresh", "versionEl", "opsCountEl", "schedulesCountEl", "versionMeta", "opsResponse", "data", "schedResponse", "showKeyboardShortcuts", "event", "switchTab", "tabName", "tab", "tabContent", "loadSystemInfo", "loadOperations", "onScheduleTabShow", "previousMetrics", "currentUsername", "fetchWithRetry", "url", "maxRetries", "delayMs", "lastError", "attempt", "response", "error", "resolve", "loadSystemInfo", "data", "cpuTrend", "calculateTrend", "memoryTrend", "diskTrend", "metricsDiv", "getTrendHTML", "getStatusClass", "memBar", "cpuValueEl", "memoryValueEl", "diskValueEl", "animateValue", "cpuBar", "memoryBar", "diskBar", "cpuCard", "memoryCard", "diskCard", "existingTrend", "valueDiv", "res", "sparkData", "drawSparkline", "err", "systemInfoDiv", "diskWarning", "memoryWarning", "loadLastMaintenanceRun", "getHealthColor", "score", "overall", "generateHealthGaugeSVG", "scoreAngle", "toRadians", "deg", "startX", "startY", "endX", "endY", "scoreX", "scoreY", "bgLargeArc", "scoreLargeArc", "color", "bgPath", "scorePath", "emoji", "loadHealthScore", "healthDiv", "gaugeSVG", "issuesHTML", "issue", "loadTopProcesses", "processesDiv", "html", "proc", "idx", "statusDiv", "lastRunText", "lastRun", "relative", "canvasId", "canvas", "ctx", "width", "height", "min", "range", "value", "index", "x", "y", "history", "recent", "previous", "delta", "trend", "percent", "runQuickHealthCheck", "btn", "originalText", "showToast", "result", "issueCount", "switchTab", "formatDuration", "seconds", "minutes", "secs", "hours", "escapeHtml", "str", "div", "STORAGE_KEY", "loadOperationTimes", "data", "STORAGE_KEY", "error", "saveOperationTimes", "times", "recordOperationTime", "operationId", "durationSeconds", "avg", "sum", "time", "getAverageDuration", "getMedianDuration", "sorted", "a", "b", "mid", "m", "getTypicalDurationDisplay", "median", "minutes", "seconds", "hours", "calculateETA", "remainingOperationIds", "currentOperationId", "currentOperationProgress", "eta", "opId", "avgDuration", "remainingProgress", "runningOperations", "operationInvocationId", "allOperations", "operationStartTime", "batchStartTime", "currentOperationIndex", "totalOperations", "operationTimes", "progressTimerInterval", "queueStatusInterval", "currentOperationId", "selectedOperationIds", "operationStats", "activeCategory", "collapsedCategories", "DEFAULT_COLLAPSED_CATEGORIES", "CATEGORY_CONFIG", "initCollapsedState", "saved", "saveCollapsedState", "loadOperations", "cacheBuster", "data", "operationsDiv", "a", "b", "operationsHistory", "error", "runDoctor", "html", "op", "opHistory", "typicalDuration", "getTypicalDurationDisplay", "durationHtml", "lastRunHtml", "statusIcon", "statusColor", "whyWhatHtml", "hasWhen", "hasContext", "hasProblems", "hasOutcomes", "hasTimeline", "whenToRunHtml", "when", "escapeHtml", "contextHtml", "problemsHtml", "problem", "outcomesHtml", "outcome", "timelineHtml", "categories", "orderA", "orderB", "recommendedOps", "filterButtonsHtml", "cat", "count", "icon", "renderOperationItem", "isRecommendedSection", "detailsContent", "category", "categoryOps", "isCollapsed", "itemStyle", "selectedCount", "showToast", "lastRunData", "banner", "relative", "selectAllOperations", "checkboxes", "cb", "deselectAllOperations", "filterByCategory", "btn", "item", "opId", "o", "shouldShow", "header", "toggleCategory", "items", "expandAllCategories", "collapseAllCategories", "applyTemplate", "template", "checkbox", "runSelectedOperations", "selected", "thisInvocationId", "runBtn", "selectAllBtn", "deselectAllBtn", "skipBtn", "cancelBtn", "progressContainer", "updateProgress", "startProgressTimer", "startQueueStatusPolling", "progressText", "response", "reader", "decoder", "buffer", "done", "value", "lines", "line", "jsonData", "event", "handleOperationEvent", "e", "stopProgressTimer", "stopQueueStatusPolling", "skipCurrentOperation", "result", "message", "cancelOperations", "inlineActionsStart", "status", "durationMs", "durationSec", "recordOperationTime", "spaceRecovered", "refreshLastRunTimestamp", "inlineActions", "copyBtn", "copyOutputToClipboard", "originalText", "updateElapsedTime", "elapsed", "elapsedEl", "formatDuration", "timerEl", "currentDuration", "serverTypicalSec", "medianSec", "getMedianDuration", "percent", "progressBar", "progressPercent", "progressLabel", "opsProgress", "estRemaining", "remainingOps", "currentProgress", "getAverageDuration", "etaSeconds", "calculateETA", "queueDiv", "queueCount", "opData", "opItem", "lastRunDiv", "WIZARD_PRESETS", "showQuickStartWizard", "modal", "closeWizard", "selectWizardOption", "option", "operationsToRun", "operationsList", "wizardPrompt", "isTypingInField", "target", "el", "tag", "panel", "results", "issues", "rows", "severityColor", "affects", "button", "fixDoctorIssue", "action", "res", "closeShortcuts", "openShortcuts", "initKeyboardShortcuts", "search", "closeScheduleModalFn", "exportLatestLog", "link", "selectedFiles", "analyzeStorage", "path", "resultsDiv", "analyzeBtn", "updateBreadcrumbs", "response", "errorMsg", "showToast", "data", "categoryViz", "renderCategoryBreakdown", "entry", "idx", "displayName", "trashBtn", "permBtn", "selAllBtn", "deselAllBtn", "deleteSelected", "selectAllFiles", "deselectAllFiles", "checkboxes", "checkbox", "toggleFileSelection", "error", "updateSelectedCount", "count", "countEl", "countElPermanent", "cb", "mode", "confirmMessage", "confirmed", "totalFiles", "deleted", "failed", "failedPaths", "operationCancelled", "permanentBtn", "showProgressOverlay", "current", "fileName", "updateProgressOverlay", "errorData", "result", "hideProgressOverlay", "successVerb", "failedVerb", "breadcrumbsDiv", "parts", "p", "html", "currentPath", "part", "index", "fullPath", "navigateToPath", "pathInput", "setPath", "getUsername", "CATEGORY_CONFIG", "formatBytes", "bytes", "k", "sizes", "i", "categorySizes", "totalBytes", "entries", "_", "size", "a", "b", "categorizedTotal", "sum", "total", "otherBytes", "maxSize", "bars", "category", "config", "percentage", "barWidth", "otherBar", "otherPercent", "otherWidth", "loadScheduleTemplates", "response", "data", "container", "template", "templateJson", "escapeHtml", "error", "showToast", "loadSchedules", "schedule", "nextRun", "formatDateTime", "lastRun", "statusClass", "statusText", "formatFrequency", "saveSchedule", "scheduleId", "name", "description", "frequency", "time", "enabled", "notify", "wake_mac", "operations", "cb", "scheduleData", "days", "dayEl", "day", "url", "closeScheduleModal", "deleteSchedule", "toggleScheduleEnabled", "runScheduleNow", "openScheduleModal", "modal", "title", "form", "scheduleIdEl", "loadOperationsForSchedule", "loadScheduleForEdit", "op", "nameEl", "descEl", "freqEl", "timeEl", "enabledEl", "notifyEl", "wakeEl", "opId", "checkbox", "updateFrequencyOptions", "daysSelector", "daySelector", "applyScheduleTemplate", "scheduleRefreshTimer", "onScheduleTabShow", "tab", "d", "isoString", "date", "now", "diffMs", "diffDays", "diffHours", "AppUninstaller", "containerId", "el", "response", "data", "e", "query", "filtered", "app", "apps", "row", "btn", "result", "showToast", "a", "bytes", "k", "sizes", "i", "InternMap", "entries", "key", "keyof", "value", "intern_get", "intern_set", "intern_delete", "intern_get", "_intern", "_key", "value", "key", "intern_set", "intern_delete", "keyof", "noop", "dispatch", "i", "n", "_", "t", "Dispatch", "parseTypenames", "typenames", "types", "name", "typename", "callback", "T", "get", "set", "copy", "type", "that", "args", "c", "dispatch_default", "xhtml", "namespaces_default", "namespace_default", "name", "prefix", "i", "namespaces_default", "creatorInherit", "name", "document", "uri", "xhtml", "creatorFixed", "fullname", "creator_default", "namespace_default", "none", "selector_default", "selector", "select_default", "select", "selector_default", "groups", "m", "subgroups", "j", "group", "n", "subgroup", "node", "subnode", "i", "Selection", "array", "x", "empty", "selectorAll_default", "selector", "arrayAll", "select", "array", "selectAll_default", "selectorAll_default", "groups", "m", "subgroups", "parents", "j", "group", "n", "node", "i", "Selection", "matcher_default", "selector", "childMatcher", "node", "find", "childFind", "match", "childFirst", "selectChild_default", "childMatcher", "filter", "children", "childrenFilter", "match", "selectChildren_default", "childMatcher", "filter_default", "match", "matcher_default", "groups", "m", "subgroups", "j", "group", "n", "subgroup", "node", "i", "Selection", "sparse_default", "update", "enter_default", "Selection", "sparse_default", "EnterNode", "parent", "datum", "child", "next", "selector", "constant_default", "x", "bindIndex", "parent", "group", "enter", "update", "exit", "data", "node", "groupLength", "dataLength", "EnterNode", "bindKey", "key", "i", "nodeByKeyValue", "keyValues", "keyValue", "datum", "data_default", "value", "bind", "parents", "groups", "constant_default", "m", "j", "arraylike", "enterGroup", "updateGroup", "exitGroup", "i0", "i1", "previous", "next", "Selection", "exit_default", "Selection", "sparse_default", "join_default", "onenter", "onupdate", "onexit", "enter", "update", "exit", "merge_default", "context", "selection", "groups0", "groups1", "m0", "m1", "m", "merges", "j", "group0", "group1", "n", "merge", "node", "i", "Selection", "order_default", "groups", "j", "m", "group", "i", "next", "node", "sort_default", "compare", "ascending", "compareNode", "a", "b", "groups", "m", "sortgroups", "j", "group", "n", "sortgroup", "node", "i", "Selection", "call_default", "callback", "nodes_default", "node_default", "groups", "j", "m", "group", "i", "n", "node", "size_default", "size", "node", "empty_default", "each_default", "callback", "groups", "j", "m", "group", "i", "n", "node", "attrRemove", "name", "attrRemoveNS", "fullname", "attrConstant", "value", "attrConstantNS", "attrFunction", "v", "attrFunctionNS", "attr_default", "namespace_default", "node", "window_default", "node", "styleRemove", "name", "styleConstant", "value", "priority", "styleFunction", "v", "style_default", "styleValue", "node", "window_default", "propertyRemove", "name", "propertyConstant", "value", "propertyFunction", "v", "property_default", "classArray", "string", "classList", "node", "ClassList", "name", "i", "classedAdd", "names", "list", "n", "classedRemove", "classedTrue", "classedFalse", "classedFunction", "value", "classed_default", "textRemove", "textConstant", "value", "textFunction", "v", "text_default", "htmlRemove", "htmlConstant", "value", "htmlFunction", "v", "html_default", "raise", "raise_default", "lower", "lower_default", "append_default", "name", "create", "creator_default", "constantNull", "insert_default", "name", "before", "create", "creator_default", "select", "selector_default", "remove", "parent", "remove_default", "selection_cloneShallow", "clone", "parent", "selection_cloneDeep", "clone_default", "deep", "datum_default", "value", "contextListener", "listener", "event", "parseTypenames", "typenames", "name", "i", "onRemove", "typename", "on", "j", "m", "o", "onAdd", "value", "options", "on_default", "n", "t", "dispatchEvent", "node", "type", "params", "window", "window_default", "event", "dispatchConstant", "dispatchFunction", "dispatch_default", "iterator_default", "groups", "j", "m", "group", "i", "n", "node", "root", "Selection", "groups", "parents", "selection", "selection_selection", "select_default", "selectAll_default", "selectChild_default", "selectChildren_default", "filter_default", "data_default", "enter_default", "exit_default", "join_default", "merge_default", "order_default", "sort_default", "call_default", "nodes_default", "node_default", "size_default", "empty_default", "each_default", "attr_default", "style_default", "property_default", "classed_default", "text_default", "html_default", "raise_default", "lower_default", "append_default", "insert_default", "remove_default", "clone_default", "datum_default", "on_default", "dispatch_default", "iterator_default", "selection_default", "select_default", "selector", "Selection", "root", "define_default", "constructor", "factory", "prototype", "extend", "parent", "definition", "key", "Color", "darker", "brighter", "reI", "reN", "reP", "reHex", "reRgbInteger", "reRgbPercent", "reRgbaInteger", "reRgbaPercent", "reHslPercent", "reHslaPercent", "named", "define_default", "color", "channels", "color_formatHex", "color_formatHex8", "color_formatHsl", "color_formatRgb", "hslConvert", "format", "m", "l", "rgbn", "Rgb", "rgba", "hsla", "n", "r", "g", "b", "a", "rgbConvert", "o", "rgb", "opacity", "extend", "k", "clampi", "clampa", "rgb_formatHex", "rgb_formatHex8", "rgb_formatRgb", "hex", "value", "h", "s", "Hsl", "min", "max", "hsl", "m2", "m1", "hsl2rgb", "clamph", "clampt", "basis", "t1", "v0", "v1", "v2", "v3", "t2", "t3", "basis_default", "values", "n", "t", "i", "basisClosed_default", "values", "n", "t", "i", "v0", "v1", "v2", "v3", "basis", "constant_default", "x", "linear", "a", "d", "t", "exponential", "b", "y", "gamma", "y", "nogamma", "a", "b", "exponential", "constant_default", "d", "linear", "rgb_default", "rgbGamma", "y", "color", "gamma", "rgb", "start", "end", "r", "g", "b", "opacity", "nogamma", "t", "rgbSpline", "spline", "colors", "rgbBasis", "basis_default", "rgbBasisClosed", "basisClosed_default", "number_default", "a", "b", "t", "reA", "reB", "zero", "b", "one", "string_default", "a", "bi", "am", "bm", "bs", "s", "q", "number_default", "t", "i", "o", "degrees", "identity", "decompose_default", "a", "b", "c", "d", "e", "f", "scaleX", "scaleY", "skewX", "svgNode", "parseCss", "value", "m", "identity", "decompose_default", "parseSvg", "interpolateTransform", "parse", "pxComma", "pxParen", "degParen", "pop", "s", "translate", "xa", "ya", "xb", "yb", "q", "i", "number_default", "rotate", "a", "b", "skewX", "scale", "t", "n", "o", "interpolateTransformCss", "parseCss", "interpolateTransformSvg", "parseSvg", "frame", "timeout", "interval", "pokeDelay", "taskHead", "taskTail", "clockLast", "clockNow", "clockSkew", "clock", "setFrame", "f", "now", "clearNow", "Timer", "timer", "callback", "delay", "time", "sleep", "t", "timerFlush", "e", "wake", "nap", "poke", "t0", "t1", "t2", "timeout_default", "callback", "delay", "time", "t", "Timer", "elapsed", "emptyOn", "dispatch_default", "emptyTween", "CREATED", "SCHEDULED", "STARTING", "STARTED", "RUNNING", "ENDING", "ENDED", "schedule_default", "node", "name", "id", "index", "group", "timing", "schedules", "create", "init", "schedule", "get", "set", "self", "tween", "timer", "elapsed", "start", "i", "j", "n", "o", "stop", "timeout_default", "tick", "t", "interrupt_default", "node", "name", "schedules", "schedule", "active", "empty", "STARTING", "ENDING", "ENDED", "interrupt_default", "name", "tweenRemove", "id", "name", "tween0", "tween1", "schedule", "set", "tween", "n", "tweenFunction", "value", "t", "i", "tween_default", "get", "tweenValue", "transition", "node", "interpolate_default", "a", "b", "c", "number_default", "color", "rgb_default", "string_default", "attrRemove", "name", "attrRemoveNS", "fullname", "attrConstant", "interpolate", "value1", "string00", "string1", "interpolate0", "string0", "attrConstantNS", "attrFunction", "value", "string10", "attrFunctionNS", "attr_default", "namespace_default", "i", "interpolateTransformSvg", "interpolate_default", "tweenValue", "attrInterpolate", "name", "i", "t", "attrInterpolateNS", "fullname", "attrTweenNS", "value", "t0", "i0", "tween", "attrTween", "attrTween_default", "key", "namespace_default", "delayFunction", "id", "value", "init", "delayConstant", "delay_default", "get", "durationFunction", "id", "value", "set", "durationConstant", "duration_default", "get", "easeConstant", "id", "value", "set", "ease_default", "get", "easeVarying", "id", "value", "v", "set", "easeVarying_default", "filter_default", "match", "matcher_default", "groups", "m", "subgroups", "j", "group", "n", "subgroup", "node", "i", "Transition", "merge_default", "transition", "groups0", "groups1", "m0", "m1", "m", "merges", "j", "group0", "group1", "n", "merge", "node", "i", "Transition", "start", "name", "i", "onFunction", "id", "listener", "on0", "on1", "sit", "init", "set", "schedule", "on", "on_default", "get", "removeFunction", "id", "parent", "i", "remove_default", "select_default", "select", "name", "id", "selector_default", "groups", "m", "subgroups", "j", "group", "n", "subgroup", "node", "subnode", "i", "schedule_default", "get", "Transition", "selectAll_default", "select", "name", "id", "selectorAll_default", "groups", "m", "subgroups", "parents", "j", "group", "n", "node", "i", "children", "child", "inherit", "get", "k", "l", "schedule_default", "Transition", "Selection", "selection_default", "styleNull", "name", "interpolate", "string00", "string10", "interpolate0", "string0", "styleValue", "string1", "styleRemove", "styleConstant", "value1", "styleFunction", "value", "styleMaybeRemove", "id", "on0", "on1", "listener0", "key", "event", "remove", "schedule", "set", "on", "listener", "style_default", "priority", "i", "interpolateTransformCss", "interpolate_default", "tweenValue", "styleInterpolate", "name", "i", "priority", "t", "styleTween", "value", "i0", "tween", "styleTween_default", "key", "textConstant", "value", "textFunction", "value1", "text_default", "tweenValue", "textInterpolate", "i", "textTween", "value", "t0", "i0", "tween", "textTween_default", "key", "transition_default", "name", "id0", "id1", "newId", "groups", "m", "j", "group", "n", "node", "i", "inherit", "get", "schedule_default", "Transition", "end_default", "on0", "on1", "that", "id", "size", "resolve", "reject", "cancel", "end", "schedule", "set", "on", "id", "Transition", "groups", "parents", "name", "transition", "selection_default", "newId", "selection_prototype", "select_default", "selectAll_default", "filter_default", "merge_default", "transition_default", "on_default", "attr_default", "attrTween_default", "style_default", "styleTween_default", "text_default", "textTween_default", "remove_default", "tween_default", "delay_default", "duration_default", "ease_default", "easeVarying_default", "end_default", "cubicInOut", "t", "defaultTiming", "cubicInOut", "inherit", "node", "id", "timing", "transition_default", "name", "Transition", "newId", "now", "groups", "m", "j", "group", "n", "i", "schedule_default", "selection_default", "interrupt_default", "transition_default", "abs", "max", "min", "number1", "number2", "X", "type", "x", "e", "xy", "Y", "y", "XY", "type", "t", "count", "node", "sum", "children", "i", "count_default", "each_default", "callback", "that", "index", "node", "eachBefore_default", "callback", "that", "node", "nodes", "children", "i", "index", "eachAfter_default", "callback", "that", "node", "nodes", "next", "children", "n", "index", "find_default", "callback", "that", "index", "node", "sum_default", "value", "node", "sum", "children", "i", "sort_default", "compare", "node", "path_default", "end", "start", "ancestor", "leastCommonAncestor", "nodes", "k", "a", "b", "aNodes", "bNodes", "c", "ancestors_default", "node", "nodes", "descendants_default", "leaves_default", "leaves", "node", "links_default", "root", "links", "node", "iterator_default", "node", "current", "next", "children", "i", "n", "hierarchy", "data", "children", "mapChildren", "objectChildren", "root", "Node", "node", "nodes", "child", "childs", "i", "n", "computeHeight", "node_copy", "copyData", "d", "height", "count_default", "each_default", "eachAfter_default", "eachBefore_default", "find_default", "sum_default", "sort_default", "path_default", "ancestors_default", "descendants_default", "leaves_default", "links_default", "iterator_default", "required", "f", "constantZero", "constant_default", "x", "round_default", "node", "dice_default", "parent", "x0", "y0", "x1", "y1", "nodes", "node", "i", "n", "k", "slice_default", "parent", "x0", "y0", "x1", "y1", "nodes", "node", "i", "n", "k", "phi", "squarifyRatio", "ratio", "parent", "x0", "y0", "x1", "y1", "rows", "nodes", "row", "nodeValue", "i0", "i1", "n", "dx", "dy", "value", "sumValue", "minValue", "maxValue", "newRatio", "minRatio", "alpha", "beta", "dice_default", "slice_default", "squarify_default", "custom", "squarify", "x", "treemap_default", "tile", "squarify_default", "round", "dx", "dy", "paddingStack", "paddingInner", "constantZero", "paddingTop", "paddingRight", "paddingBottom", "paddingLeft", "treemap", "root", "positionNode", "round_default", "node", "p", "x0", "y0", "x1", "y1", "x", "required", "constant_default", "initRange", "domain", "range", "implicit", "ordinal", "index", "InternMap", "domain", "range", "unknown", "scale", "d", "_", "value", "initRange", "Transform", "k", "x", "y", "point", "location", "identity", "transform", "node", "DiskVisualizer", "containerId", "el", "pathInput", "e", "btn", "path", "depthSelect", "minSizeSelect", "depth", "minSizeMb", "response", "errorData", "result", "showToast", "error", "chartEl", "message", "data", "rect", "svg", "select_default", "root", "hierarchy", "d", "a", "b", "treemapRoot", "treemap_default", "colorScale", "ordinal", "getColor", "node", "category", "nodes", "cell", "event", "text", "maxWidth", "maxChars", "backBtn", "detailsEl", "infoEl", "legendEl", "categories", "cat", "breadcrumbsEl", "parts", "p", "html", "currentPath", "part", "prevPath", "DuplicateFinder", "containerId", "el", "path", "minSizeMb", "includeHidden", "startResponse", "error", "scan_id", "e", "showToast", "scanId", "attempts", "poll", "response", "status", "progressFill", "progressText", "stageName", "percent", "results", "scan_summary", "groupsContainer", "group", "index", "groupEl", "file", "fileIndex", "header", "files", "toggle", "isExpanded", "checkbox", "input", "groupIndex", "filesWithMtime", "f", "i", "a", "b", "newestIndex", "oldestIndex", "btn", "count", "result", "format", "content", "blob", "url", "str", "div", "switchTab", "toggleTheme", "reloadScripts", "setTheme", "toggleAutoRefresh", "setRefreshInterval", "togglePreviewMode", "toggleConfirmations", "showKeyboardShortcuts", "loadSystemInfo", "loadHealthScore", "runQuickHealthCheck", "loadTopProcesses", "loadOperations", "runDoctor", "fixDoctorIssue", "runSelectedOperations", "cancelOperations", "skipCurrentOperation", "applyTemplate", "selectAllOperations", "deselectAllOperations", "filterByCategory", "toggleCategory", "expandAllCategories", "collapseAllCategories", "copyOutputToClipboard", "showQuickStartWizard", "closeWizard", "selectWizardOption", "closeShortcuts", "exportLatestLog", "analyzeStorage", "setPath", "getUsername", "onScheduleTabShow", "openScheduleModal", "closeScheduleModal", "loadSchedules", "saveSchedule", "deleteSchedule", "toggleScheduleEnabled", "runScheduleNow", "applyScheduleTemplate", "showToast", "initKeyboardShortcuts", "initTheme", "initSettings", "AppUninstaller", "DiskVisualizer", "DuplicateFinder"]
}
